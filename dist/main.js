module.exports=function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e){m.driver=m.driver.migrate(e)}function a(e){return m.driver.getItem(e)}function u(e,t){m.driver.setItem(e,t)}function i(e){m.driver.removeItem(e)}Object.defineProperty(t,"__esModule",{value:!0});var c;t.setStorageDriver=o,t.getStorage=a,t.addStorage=u,t.removeStorage=i;var s=new Map,f=new Map,l=t.storageKeys={PROPS:"props",EVENTS:"events"},d={items:Object.create((c={},n(c,l.PROPS,s),n(c,l.EVENTS,f),c)),setItem:function(e,t){this.items[e]=t},getItem:function(e){return this.items[e]},removeItem:function(e){delete this.items[e]},migrate:function(e){for(var t in this.items)e.setItem(t,this.items[t]);return e}},m=t.storage={driver:d}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={registerComponent:function(e,t){"customElements"in window?customElements.define(e,t):u().then(function(){a(e,t)})},isCustomComponent:function(e){return e.nodeName.includes("-")}},o=n,a=function(e,t){return o.registerComponent(e,t)},u=(t.setImplementation=function(e){o=e},function(){return Promise.resolve()});t.componentsReady=function(){return u()},t.setReadyCheck=function(e){u=e};t.default=a;t.isCustomComponent=function(e){return o.isCustomComponent(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={reducers:{},subscriptions:{},addReducer:function(e,t){this.reducers[e]=t},removeReducer:function(e){return delete this.reducers[e],!1},subscribe:function(e,t){var r=this;return this.subscriptions[e]||(this.subscriptions[e]=[]),this.subscriptions[e].push(t),{unsubscribe:function(){r.subscriptions[e]=r.subscriptions[e].filter(function(e){return e!==t})}}},getState:function(e){},migrate:function(e){for(var t in this.reducers){var r=this.reducers[t];e.addReducer(t,r)}for(var n in this.subscriptions){var o=!0,a=!1,u=void 0;try{for(var i,c=this.subscriptions[n][Symbol.iterator]();!(o=(i=c.next()).done);o=!0){var s=i.value;e.subscribe(n,s)}}catch(e){a=!0,u=e}finally{try{!o&&c.return&&c.return()}finally{if(a)throw u}}}return e}},o={currentImplementation:n};t.setImplementation=function(e){o.currentImplementation=o.currentImplementation.migrate(e)},t.registerReducer=function(e,t){o.currentImplementation.addReducer(e,t)},t.removeReducer=function(e){o.currentImplementation.removeReducer(e)},t.subscribe=function(e,t){return o.currentImplementation.subscribe(e,t)},t.getState=function(e){return o.currentImplementation.getState(e)}},function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){return"function"==typeof e||"object"===(void 0===e?"undefined":d(e))||(0,b.isCustomComponent)(t)}function a(e,t,r){var n=(0,y.matchTagArg)(e.nodeValue);if(n&&n[1]){var o=Number(n[1]),a=e.nodeName;return[(0,y.tagNameToProp)(a),r[o]]}return[e.nodeName,e.nodeValue]}function u(e,t){(e.attributes||[]).length&&_.forEach(function(r){r(e,t)});for(var r=0;r<e.childNodes.length;r++)u(e.childNodes[r],t)}function i(e,t){P[e]=t,_.unshift(t.call)}function c(e){return P[e]}function s(e){var t=P[e];_=_.filter(function(e){return e!==t.call})}function f(e,t){O[e]=t}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(n=(u=i.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&i.return&&i.return()}finally{if(o)throw a}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.callHandlers=u,t.addTemplateHandler=i,t.accessHandler=c,t.unloadHandler=s,t.setCoreHandler=f;var p=r(0),y=r(4),b=r(1),g=(0,p.getStorage)(p.storageKeys.PROPS),v=(0,p.getStorage)(p.storageKeys.EVENTS),h={call:function(e,t){for(var r=e.attributes||[],o=0;o<r.length;o++){var a=r[o];if(a.nodeName.startsWith("on")){var u=(0,y.matchTagArg)(a.nodeValue);if(u&&u[1]){var i=Number(u[1]),c=t[i];if("function"==typeof c){e.removeAttribute(a.nodeName);var s=a.nodeName.toLowerCase().slice(2);e.addEventListener(s,c);var f=v.get(e)||{};v.set(e,m({},f,n({},s,c)))}}}}}},k={call:function(e,t){if(e instanceof HTMLTemplateElement&&e.hasAttribute("map")){var r=(0,y.matchTagArg)(String(e.getAttribute("map")));if(r&&r[1]){var n=Number(r[1]),o=t[n],a=e.innerHTML,u=document.createElement("template"),i=o.map(function(e){return(0,y.replaceTagArg)(a,function(r,n){var o=t[n];if("function"==typeof o){var a=o(e);return a instanceof HTMLTemplateElement?a.innerHTML:Array.isArray(a)?a.join(""):a}return o})});u.innerHTML=i.join(""),e.parentNode.replaceChild(u.content,e)}}}},S={call:function(e,t){for(var r=e.attributes||[],u=0;u<r.length;u++){var i=r[u],c=a(i,e,t),s=l(c,2),f=s[0],d=s[1];if(o(d,e)){var p=g.get(e)||{};e.removeAttribute(i.nodeName),g.set(e,m({},p,n({},f,d)))}}}},O={events:h,map:k,props:S},P={},_=[O.map.call,O.events.call,O.props.call]},function(e,t,r){"use strict";function n(){setTimeout(function(){var e=!0,t=!1,r=void 0;try{for(var n,o=l.keys()[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var a=n.value;a.isConnected||l.delete(a)}}catch(e){t=!0,r=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw r}}})}function o(){setTimeout(function(){var e=!0,t=!1,r=void 0;try{for(var n,o=d.keys()[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var a=n.value;a.isConnected||d.delete(a)}}catch(e){t=!0,r=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw r}}})}function a(e){return e.split("-").reduce(function(e,t){return t?e+t[0].toUpperCase()+t.slice(1):e})}function u(e){return"\x3c!--__ARG__"+e+"--\x3e"}function i(e){return e.match(/__ARG__(\d+)/)}function c(e,t){return e.replace(/<!--__ARG__(\d+)-->/,t)}function s(e){return'="'===e.trim().slice(-2)}Object.defineProperty(t,"__esModule",{value:!0}),t.clearPropsStorage=n,t.clearEventsStorage=o,t.tagNameToProp=a,t.createTagArg=u,t.matchTagArg=i,t.replaceTagArg=c,t.attributeStarts=s;var f=r(0),l=(0,f.getStorage)(f.storageKeys.PROPS),d=(0,f.getStorage)(f.storageKeys.EVENTS)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(1);Object.defineProperty(t,"changeWebComponentsImplemenation",{enumerable:!0,get:function(){return o.setImplementation}}),Object.defineProperty(t,"componentsReady",{enumerable:!0,get:function(){return o.componentsReady}}),Object.defineProperty(t,"changeWebComponentsReadyCheck",{enumerable:!0,get:function(){return o.setReadyCheck}}),Object.defineProperty(t,"registerComponent",{enumerable:!0,get:function(){return n(o).default}});var a=r(2);Object.defineProperty(t,"changeStoreImplementation",{enumerable:!0,get:function(){return a.setImplementation}}),Object.defineProperty(t,"registerReducer",{enumerable:!0,get:function(){return a.registerReducer}}),Object.defineProperty(t,"removeReducer",{enumerable:!0,get:function(){return a.removeReducer}}),Object.defineProperty(t,"subscribe",{enumerable:!0,get:function(){return a.subscribe}}),Object.defineProperty(t,"getState",{enumerable:!0,get:function(){return a.getState}});var u=r(3);Object.defineProperty(t,"addTemplateHandler",{enumerable:!0,get:function(){return u.addTemplateHandler}}),Object.defineProperty(t,"setCoreHandler",{enumerable:!0,get:function(){return u.setCoreHandler}}),Object.defineProperty(t,"unloadHandler",{enumerable:!0,get:function(){return u.unloadHandler}}),Object.defineProperty(t,"accessHandler",{enumerable:!0,get:function(){return u.accessHandler}});var i=r(6);Object.defineProperty(t,"html",{enumerable:!0,get:function(){return i.html}}),Object.defineProperty(t,"css",{enumerable:!0,get:function(){return i.css}});var c=r(0);Object.defineProperty(t,"getStorage",{enumerable:!0,get:function(){return c.getStorage}}),Object.defineProperty(t,"addStorage",{enumerable:!0,get:function(){return c.addStorage}}),Object.defineProperty(t,"removeStorage",{enumerable:!0,get:function(){return c.removeStorage}}),Object.defineProperty(t,"setStorageDriver",{enumerable:!0,get:function(){return c.setStorageDriver}});var s=r(7);Object.defineProperty(t,"bind",{enumerable:!0,get:function(){return s.bind}});var f=r(4);Object.defineProperty(t,"matchTagArg",{enumerable:!0,get:function(){return f.matchTagArg}}),Object.defineProperty(t,"replaceTagArg",{enumerable:!0,get:function(){return f.replaceTagArg}});var l=r(8);Object.defineProperty(t,"Component",{enumerable:!0,get:function(){return n(l).default}})},function(e,t,r){"use strict";function n(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(!r.length)return e[0];for(var o="",c=0;c<e.length;c++)o+=e[c],c<e.length-1&&(Array.isArray(r[c])&&!1===(0,i.attributeStarts)(o)?o+=r[c].join(""):"function"==typeof r[c]||"object"===a(r[c])?o+=(0,i.createTagArg)(c):o+=r[c]);var s=document.createElement("template");return s.innerHTML=o,(0,u.callHandlers)(s.content,r),s}function o(e){for(var t="",r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];for(var a=0;a<e.length;a++)t+=e[a],a<e.length-1&&("function"==typeof n[a]?t+=n[a]():t+=n[a]);return t}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.html=n,t.css=o;var u=r(3),i=r(4)},function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e,t){var r=(0,u.getStorage)(i);if(r.size===c){var n=r.keys();r.delete(n.next().value)}r.set(e,t)}function a(e){for(var t=(0,u.getStorage)(i),r=t.get(e),a=arguments.length,c=Array(a>1?a-1:0),s=1;s<a;s++)c[s-1]=arguments[s];var f=c[0],l=e.bind.apply(e,[null].concat(n(c)));if(r)return r.get(f)?r.get(f):(r.set(f,l),l);var d=new Map;return d.set(f,l),o(e,d),l}Object.defineProperty(t,"__esModule",{value:!0}),t.bind=a;var u=r(0),i="BOUNDS",c=100;(0,u.addStorage)(i,new Map)},function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t={},r=!0,n=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var i=a.value;t[i.name]=i.value}}catch(e){n=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(n)throw o}}return t}Object.defineProperty(t,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(2),d=r(9),m=r(0),p=r(4),y=function(e){var t=e.getPrototypeOf||function(e){return e.__proto__},r=e.setPrototypeOf||function(e,t){return e.__proto__=t,e},n="object"===("undefined"==typeof Reflect?"undefined":c(Reflect))?Reflect.construct:function(e,t,n){var o,a=[null];return a.push.apply(a,t),o=e.bind.apply(e,a),r(new o,n.prototype)};return function(e){var o=t(e);return r(e,r(function(){return n(o,arguments,t(this).constructor)},o))}}(Object),b=(0,m.getStorage)(m.storageKeys.PROPS),g=y(function(e){function t(){var e,r,n,u;o(this,t);for(var i=arguments.length,c=Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=n=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),n.__defaultProps={},n.subscriptions=[],n.state={},n.mounted=!1,u=r,a(n,u)}return u(t,e),f(t,[{key:"beforeRender",value:function(){}},{key:"render",value:function(){return""}},{key:"afterRender",value:function(){}},{key:"subscribeToStore",value:function(){var e=this,t=!0,r=!1,n=void 0;try{for(var o,a=this.keys[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var u=o.value;!function(t){e.subscriptions.push((0,l.subscribe)(t,function(r){e.state[t]=r,d.render.call(e)})),e.state[t]=(0,l.getState)(t)}(u)}}catch(e){r=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(r)throw n}}}},{key:"connectedCallback",value:function(){this.subscribeToStore(),d.render.call(this),this.connected()}},{key:"connected",value:function(){}},{key:"disconnectedCallback",value:function(){var e=!0,t=!1,r=void 0;try{for(var n,o=this.subscriptions[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){n.value.unsubscribe()}}catch(e){t=!0,r=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw r}}(0,p.clearPropsStorage)(),(0,p.clearEventsStorage)(),this.disconnected()}},{key:"disconnected",value:function(){}},{key:"adoptedCallback",value:function(){this.subscribeToStore(),d.render.call(this),this.adopted()}},{key:"adopted",value:function(){}},{key:"attributeChangedCallback",value:function(e,t,r){this.mounted&&t!=r&&(this.propsChanged(s({},this.props,n({},e,r))),d.render.call(this))}},{key:"propsChanged",value:function(e){}},{key:"name",get:function(){return Object.getPrototypeOf(this).constructor.name}},{key:"isShadow",get:function(){return!0}},{key:"props",get:function(){return s({},this.__defaultProps,i(this.attributes),b.get(this)||{})},set:function(e){this.__defaultProps=e}},{key:"keys",get:function(){return[]}},{key:"styles",get:function(){return""}}],[{key:"observedAttributes",get:function(){return this.observableProps.map(function(e){for(var t="",r=0;r<e.length;r++)e[r]===e[r].toUpperCase()?t+="-"+e[r].toLowerCase():t+=e[r];return t})}},{key:"observableProps",get:function(){return[]}}]),t}(HTMLElement));t.default=g},function(e,t,r){"use strict";function n(e,t){var r=e.cloneNode(!1),n=t.cloneNode(!1);return k.get(t)?(0,h.default)(k.get(e),k.get(t))&&r.isEqualNode(n):r.isEqualNode(n)}function o(e,t){return!1===e.isEqualNode(t)}function a(e,t){if(e.length>t.length)for(var r=0;r<e.length;r++){if(e[r]&&!t[r])return[e[r]].concat(a(Array.from(e).slice(r+1),Array.from(t).slice(r)));if(!n(e[r],t[r])){var o=a(Array.from(e).slice(r+1),Array.from(t).slice(r));if(0===o.length)return[e[r]]}}return[]}function u(e,t){if(e.length>t.length)return t.length;for(var r=0,o=0;o<e.length;o++){var a=e[o].cloneNode(!1),u=t[o].cloneNode(!1);n(e[o],t[o])||f(a)||f(u)||r++}return r}function i(e,t,r){for(var n=document.createDocumentFragment(),o=t.length;o<r.length;o++)n.appendChild(r[o]);e.appendChild(n)}function c(e,t){var r=t.attributes||[],n=e.attributes||[];if(n.length>r.length)for(var o=0;o<n.length;o++){var a=n[o];t.hasAttribute(a.nodeName)||e.removeAttribute(a.nodeName)}for(var u=0;u<r.length;u++){var i=r[u];e.setAttribute(i.nodeName,i.nodeValue)}if(k.get(t)){var c=k.get(e),s=k.get(t);k.set(e,s),(0,h.default)(c,s)||(0,b.isCustomComponent)(e)&&y.call(e)}}function s(e,t){if((0,b.isCustomComponent)(e))return c(e,t);n(e,t)||c(e,t),m(e,t)}function f(e){return e.nodeType===Node.TEXT_NODE&&(!e.childNodes.length&&(e.innerText?!1===Boolean(e.innerText.trim()):e.innerHTML?!1===Boolean(e.innerHTML.trim()):!e.textContent||!1===Boolean(e.textContent.trim())))}function l(e){return!!e&&((e.nodeType===Node.ELEMENT_NODE||e.nodeType===Node.TEXT_NODE)&&"STYLE"!==e.nodeName&&!f(e))}function d(e,t,r,n){var o=a(r,n);return 0===n.length?e.parentNode.replaceChild(t,e):1===o.length?(o[0].parentNode.removeChild(o[0]),m(e,t)):u(r,n)>0?e.parentNode.replaceChild(t,e):i(e,r,n)}function m(e,t){var r=Array.from(e.childNodes).filter(l),n=Array.from(t.childNodes).filter(l);if(r.length!==n.length)return d(e,t,r,n);if(0===r.length&&0===n.length&&o(e,t))return e.parentNode.replaceChild(t,e);for(var a=0;a<r.length;a++)s(r[a],n[a])}function p(e){var t=document.createElement("template");return t.innerHTML=e,t}function y(){performance.mark("muskot start rendering"),this.beforeRender(),this.isShadow&&!this.shadowRoot&&(performance.mark("muskot attaching root"),this.attachShadow({mode:"open"}),performance.mark("muskot root attached"),performance.measure("muskot attach root","muskot attaching root","muskot root attached")),performance.mark("muskot create render DOM");var e=this.render();performance.mark("muskot render DOM created"),performance.measure("muskot component render result","muskot create render DOM","muskot render DOM created");var t=this.isShadow?this.shadowRoot:this;performance.mark("muskot create fragment");var r="string"==typeof e?p(e):e;if(performance.mark("muskot fragment created"),performance.measure("muskot fragment creation","muskot create fragment","muskot fragment created"),this.mounted){performance.mark("muskot insert styles before content on update");var n=document.createElement("style");n.innerHTML=this.styles,r.content.insertBefore(n,r.content.firstChild),performance.mark("muskot styles inserted on update"),performance.measure("muskot add styles by insertBefore","muskot insert styles before content on update","muskot styles inserted on update"),performance.mark("muskot update children"),m(t,r.content),performance.mark("muskot children updated"),performance.measure("muskot update component's children","muskot update children","muskot children updated")}else performance.mark("muskot insert style into component"),t.innerHTML="<style>"+this.styles+"</style>",performance.mark("muskot style inserted"),performance.measure("muskot style creation & insert by innerHTML","muskot insert style into component","muskot style inserted"),performance.mark("muskot append child with content"),t.appendChild(r.content),performance.mark("muskot content appended"),performance.measure("muskot append content on initial render","muskot append child with content","muskot content appended"),this.mounted=!0;performance.mark("muskot finish rendering"),performance.measure("muskot full render","muskot start rendering","muskot finish rendering"),this.afterRender()}Object.defineProperty(t,"__esModule",{value:!0}),t.render=y;var b=r(1),g=r(0),v=r(10),h=function(e){return e&&e.__esModule?e:{default:e}}(v),k=(0,g.getStorage)(g.storageKeys.PROPS)},function(e,t,r){"use strict";function n(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!==e&&t!==t}function o(e,t){if(n(e,t))return!0;if("object"!==(void 0===e?"undefined":a(e))||null===e||"object"!==(void 0===t?"undefined":a(t))||null===t)return!1;var r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(var i=0;i<r.length;i++)if(!u.call(t,r[i])||!n(e[r[i]],t[r[i]]))return!1;return!0}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=Object.prototype.hasOwnProperty;t.default=o}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vbWFpbi5qcyIsIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgYThkYTQ1ZDNlMDk3MDk5M2RkYzMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0b3JhZ2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3dlYi1jb21wb25lbnRzLmpzIiwid2VicGFjazovLy8uL3NyYy9zdG9yZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvaGFuZGxlcnMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxzLmpzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvdGFnLmpzIiwid2VicGFjazovLy8uL3NyYy9iaW5kLmpzIiwid2VicGFjazovLy8uL3NyYy9Db21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3JlbmRlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc2hhbGxvdy1lcXVhbC5qcyJdLCJuYW1lcyI6WyJtb2R1bGUiLCJleHBvcnRzIiwibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJpIiwibCIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsIm4iLCJfX2VzTW9kdWxlIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiX2RlZmluZVByb3BlcnR5Iiwib2JqIiwia2V5IiwidmFsdWUiLCJ3cml0YWJsZSIsInNldFN0b3JhZ2VEcml2ZXIiLCJkcml2ZXIiLCJzdG9yYWdlIiwibWlncmF0ZSIsImdldFN0b3JhZ2UiLCJnZXRJdGVtIiwiYWRkU3RvcmFnZSIsInNldEl0ZW0iLCJyZW1vdmVTdG9yYWdlIiwicmVtb3ZlSXRlbSIsIl9PYmplY3QkY3JlYXRlIiwicHJvcHNNYXAiLCJNYXAiLCJldmVudHNNYXAiLCJzdG9yYWdlS2V5cyIsIlBST1BTIiwiRVZFTlRTIiwiaXRlbXMiLCJjcmVhdGUiLCJ0aGlzIiwiZGVmYXVsdEltcGxlbWVudGF0aW9uIiwicmVnaXN0ZXJDb21wb25lbnQiLCJjb21wb25lbnQiLCJ3aW5kb3ciLCJjdXN0b21FbGVtZW50cyIsImRlZmluZSIsImN1cnJlbnRSZWFkeUNoZWNrIiwidGhlbiIsImlzQ3VzdG9tQ29tcG9uZW50Iiwibm9kZSIsIm5vZGVOYW1lIiwiaW5jbHVkZXMiLCJjdXJyZW50SW1wbGVtZW50YXRpb24iLCJzZXRJbXBsZW1lbnRhdGlvbiIsImltcGxlbWVudGF0aW9uIiwiUHJvbWlzZSIsInJlc29sdmUiLCJjb21wb25lbnRzUmVhZHkiLCJzZXRSZWFkeUNoZWNrIiwicmVhZHlDaGVjayIsImRlZmF1bHQiLCJzdHViSW1wbGVtZW50YXRpb24iLCJyZWR1Y2VycyIsInN1YnNjcmlwdGlvbnMiLCJhZGRSZWR1Y2VyIiwicmVkdWNlciIsInJlbW92ZVJlZHVjZXIiLCJzdWJzY3JpYmUiLCJjYiIsIl90aGlzIiwicHVzaCIsInVuc3Vic2NyaWJlIiwiZmlsdGVyIiwiZWwiLCJnZXRTdGF0ZSIsIm5ld1N0b3JlIiwiX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiIsIl9kaWRJdGVyYXRvckVycm9yIiwiX2l0ZXJhdG9yRXJyb3IiLCJ1bmRlZmluZWQiLCJfc3RlcCIsIl9pdGVyYXRvciIsIlN5bWJvbCIsIml0ZXJhdG9yIiwibmV4dCIsImRvbmUiLCJzdWJzY3JpcHRpb24iLCJlcnIiLCJyZXR1cm4iLCJzdG9yZSIsInJlZ2lzdGVyUmVkdWNlciIsInNob3VsZFNldFByb3BUb1N0b3JhZ2UiLCJfdHlwZW9mIiwiX3dlYkNvbXBvbmVudHMiLCJwYXJzZUF0dHJpYnV0ZSIsImF0dHJpYnV0ZSIsImFyZ3MiLCJtYXRjaCIsIl91dGlscyIsIm1hdGNoVGFnQXJnIiwibm9kZVZhbHVlIiwiaW5kZXgiLCJOdW1iZXIiLCJ0YWdOYW1lVG9Qcm9wIiwiY2FsbEhhbmRsZXJzIiwiZWxlbWVudCIsImF0dHJpYnV0ZXMiLCJsZW5ndGgiLCJoYW5kbGVycyIsImZvckVhY2giLCJoYW5kbGVyIiwiY2hpbGROb2RlcyIsImFkZFRlbXBsYXRlSGFuZGxlciIsImN1c3RvbUhhbmRsZXJzIiwidW5zaGlmdCIsImFjY2Vzc0hhbmRsZXIiLCJ1bmxvYWRIYW5kbGVyIiwic2V0Q29yZUhhbmRsZXIiLCJjb3JlSGFuZGxlcnMiLCJfc2xpY2VkVG9BcnJheSIsInNsaWNlSXRlcmF0b3IiLCJhcnIiLCJfYXJyIiwiX24iLCJfZCIsIl9lIiwiX3MiLCJfaSIsIkFycmF5IiwiaXNBcnJheSIsIlR5cGVFcnJvciIsImNvbnN0cnVjdG9yIiwiX2V4dGVuZHMiLCJhc3NpZ24iLCJ0YXJnZXQiLCJhcmd1bWVudHMiLCJzb3VyY2UiLCJfc3RvcmFnZSIsInByb3BzU3RvcmFnZSIsImV2ZW50c1N0b3JhZ2UiLCJFdmVudHNUYWdIYW5kbGVyIiwic3RhcnRzV2l0aCIsImxpc3RlbmVyIiwicmVtb3ZlQXR0cmlidXRlIiwiZXZlbnROYW1lIiwidG9Mb3dlckNhc2UiLCJzbGljZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJsaXN0ZW5lcnMiLCJzZXQiLCJNYXBIYW5kbGVyIiwiSFRNTFRlbXBsYXRlRWxlbWVudCIsImhhc0F0dHJpYnV0ZSIsIlN0cmluZyIsImdldEF0dHJpYnV0ZSIsInRwbCIsImlubmVySFRNTCIsImZyYWdtZW50IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwibm9kZXMiLCJtYXAiLCJyZXBsYWNlVGFnQXJnIiwiYXJnIiwidHBsQ2FsbCIsImpvaW4iLCJwYXJlbnROb2RlIiwicmVwbGFjZUNoaWxkIiwiY29udGVudCIsIlByb3BzSGFuZGxlciIsIl9wYXJzZUF0dHJpYnV0ZSIsIl9wYXJzZUF0dHJpYnV0ZTIiLCJwcm9wTmFtZSIsInByb3BzIiwiZXZlbnRzIiwiY2xlYXJQcm9wc1N0b3JhZ2UiLCJzZXRUaW1lb3V0Iiwia2V5cyIsImlzQ29ubmVjdGVkIiwiZGVsZXRlIiwiY2xlYXJFdmVudHNTdG9yYWdlIiwiX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIiLCJfZGlkSXRlcmF0b3JFcnJvcjIiLCJfaXRlcmF0b3JFcnJvcjIiLCJfc3RlcDIiLCJfaXRlcmF0b3IyIiwic3BsaXQiLCJyZWR1Y2UiLCJhY2MiLCJ0b1VwcGVyQ2FzZSIsImNyZWF0ZVRhZ0FyZyIsInN0ciIsImZuIiwicmVwbGFjZSIsImF0dHJpYnV0ZVN0YXJ0cyIsInRyaW0iLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiX3N0b3JlIiwiX2hhbmRsZXJzIiwiX3RhZyIsImh0bWwiLCJjc3MiLCJfYmluZCIsImJpbmQiLCJfQ29tcG9uZW50Iiwic3RyaW5ncyIsIl9sZW4iLCJfa2V5IiwidGVtcGxhdGUiLCJyZXN1bHQiLCJfbGVuMiIsIl9rZXkyIiwiX3RvQ29uc3VtYWJsZUFycmF5IiwiYXJyMiIsImZyb20iLCJhcHBlbmRUb1N0b3JhZ2UiLCJLRVkiLCJzaXplIiwiTUFYX1NUT1JBR0VfU0laRSIsImJvdW5kIiwiZmlyc3RBcmciLCJib3VuZEZuIiwiYXBwbHkiLCJjb25jYXQiLCJmbk1hcCIsIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsInNlbGYiLCJSZWZlcmVuY2VFcnJvciIsIl9pbmhlcml0cyIsInN1YkNsYXNzIiwic3VwZXJDbGFzcyIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwicGFyc2VBdHRyaWJ1dGVzIiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsImRlc2NyaXB0b3IiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJfcmVuZGVyIiwiX2ZpeEJhYmVsRXh0ZW5kIiwiTyIsImdQTyIsImdldFByb3RvdHlwZU9mIiwic1BPIiwiY29uc3RydWN0IiwiUmVmbGVjdCIsIlBhcmVudCIsIkNsYXNzIiwiYSIsIkNvbXBvbmVudCIsIl9IVE1MRWxlbWVudCIsIl9yZWYiLCJfdGVtcCIsIl9yZXQiLCJfX2RlZmF1bHRQcm9wcyIsInN0YXRlIiwibW91bnRlZCIsIl90aGlzMiIsInJlbmRlciIsInN1YnNjcmliZVRvU3RvcmUiLCJjb25uZWN0ZWQiLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyIsIl9kaWRJdGVyYXRvckVycm9yMyIsIl9pdGVyYXRvckVycm9yMyIsIl9zdGVwMyIsIl9pdGVyYXRvcjMiLCJkaXNjb25uZWN0ZWQiLCJhZG9wdGVkIiwiYXR0cmlidXRlTmFtZSIsIm9sZFZhbHVlIiwibmV3VmFsdWUiLCJwcm9wc0NoYW5nZWQiLCJuZXdQcm9wcyIsIm9ic2VydmFibGVQcm9wcyIsInByb3AiLCJyZXMiLCJIVE1MRWxlbWVudCIsIm5vZGVFcXVhbHMiLCJlbGVtZW50Tm9kZSIsImZyYWdtZW50Tm9kZSIsImVsQ2xvbmUiLCJjbG9uZU5vZGUiLCJmckNsb25lIiwiX3NoYWxsb3dFcXVhbDIiLCJpc0VxdWFsTm9kZSIsImNvbnRlbnREaWZmZXIiLCJlbGVtZW50c0RlbGV0ZWQiLCJlbGVtZW50Tm9kZXMiLCJmcmFnbWVudE5vZGVzIiwiZGVsZXRlZCIsImNoaWxkcmVuQ2hhbmdlZENvdW50IiwiY2hhbmdlZCIsImlzRW1wdHlOb2RlIiwiYXBwZW5kQ2hpbGRyZW4iLCJlbGVtZW50Q2hpbGRyZW4iLCJmcmFnbWVudENoaWxkcmVuIiwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudCIsImFwcGVuZENoaWxkIiwidXBkYXRlQXR0cmlidXRlcyIsImVsZW1lbnRBdHRyaWJ1dGVzIiwic2V0QXR0cmlidXRlIiwiZWxQcm9wcyIsImZyUHJvcHMiLCJ1cGRhdGVFbGVtZW50IiwidXBkYXRlQ2hpbGRyZW4iLCJub2RlVHlwZSIsIk5vZGUiLCJURVhUX05PREUiLCJpbm5lclRleHQiLCJCb29sZWFuIiwidGV4dENvbnRlbnQiLCJub2RlRmlsdGVyIiwiRUxFTUVOVF9OT0RFIiwiaGFuZGxlQ2hpbGRyZW5Db3VudENoYW5nZWQiLCJyZW1vdmVDaGlsZCIsImNyZWF0ZUZyYWdtZW50RnJvbVN0ciIsInBlcmZvcm1hbmNlIiwibWFyayIsImJlZm9yZVJlbmRlciIsImlzU2hhZG93Iiwic2hhZG93Um9vdCIsImF0dGFjaFNoYWRvdyIsIm1vZGUiLCJtZWFzdXJlIiwicmVuZGVyUmVzIiwicm9vdCIsInN0eWxlIiwic3R5bGVzIiwiaW5zZXJ0QmVmb3JlIiwiZmlyc3RDaGlsZCIsImFmdGVyUmVuZGVyIiwiX3NoYWxsb3dFcXVhbCIsImlzIiwieCIsInkiLCJzaGFsbG93RXF1YWwiLCJvYmpBIiwib2JqQiIsImtleXNBIiwia2V5c0IiXSwibWFwcGluZ3MiOiJBQUFBQSxPQUFPQyxRQUNFLFNBQVVDLEdDR25CLFFBQUFDLEdBQUFDLEdBR0EsR0FBQUMsRUFBQUQsR0FDQSxNQUFBQyxHQUFBRCxHQUFBSCxPQUdBLElBQUFELEdBQUFLLEVBQUFELElBQ0FFLEVBQUFGLEVBQ0FHLEdBQUEsRUFDQU4sV0FVQSxPQU5BQyxHQUFBRSxHQUFBSSxLQUFBUixFQUFBQyxRQUFBRCxJQUFBQyxRQUFBRSxHQUdBSCxFQUFBTyxHQUFBLEVBR0FQLEVBQUFDLFFBdkJBLEdBQUFJLEtBNERBLE9BaENBRixHQUFBTSxFQUFBUCxFQUdBQyxFQUFBTyxFQUFBTCxFQUdBRixFQUFBUSxFQUFBLFNBQUFWLEVBQUFXLEVBQUFDLEdBQ0FWLEVBQUFXLEVBQUFiLEVBQUFXLElBQ0FHLE9BQUFDLGVBQUFmLEVBQUFXLEdBQ0FLLGNBQUEsRUFDQUMsWUFBQSxFQUNBQyxJQUFBTixLQU1BVixFQUFBaUIsRUFBQSxTQUFBcEIsR0FDQSxHQUFBYSxHQUFBYixLQUFBcUIsV0FDQSxXQUEyQixNQUFBckIsR0FBQSxTQUMzQixXQUFpQyxNQUFBQSxHQUVqQyxPQURBRyxHQUFBUSxFQUFBRSxFQUFBLElBQUFBLEdBQ0FBLEdBSUFWLEVBQUFXLEVBQUEsU0FBQVEsRUFBQUMsR0FBc0QsTUFBQVIsUUFBQVMsVUFBQUMsZUFBQWpCLEtBQUFjLEVBQUFDLElBR3REcEIsRUFBQXVCLEVBQUEsR0FHQXZCLElBQUF3QixFQUFBLEtET00s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eUIsa0JBQVhrRSxTQUF5QmxFLEVBQUltSCxjQUFnQmpELFFBQVVsRSxJQUFRa0UsT0FBT3ZFLFVBQVksZUFBa0JLLElZaDJDaFFKLEVBQWlCVixPQUFPUyxVQUFVQyxjWm81Q3hDeEIsR0FBUXdFLFFZMTFDT3VSIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9XG4vKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGk6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bDogZmFsc2UsXG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuLyoqKioqKi8gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbi8qKioqKiovIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4vKioqKioqLyBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4vKioqKioqLyBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4vKioqKioqLyBcdFx0XHRcdGdldDogZ2V0dGVyXG4vKioqKioqLyBcdFx0XHR9KTtcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbi8qKioqKiovIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4vKioqKioqLyBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuLyoqKioqKi8gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbi8qKioqKiovIFx0XHRyZXR1cm4gZ2V0dGVyO1xuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNSk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9PYmplY3QkY3JlYXRlO1xuXG5leHBvcnRzLnNldFN0b3JhZ2VEcml2ZXIgPSBzZXRTdG9yYWdlRHJpdmVyO1xuZXhwb3J0cy5nZXRTdG9yYWdlID0gZ2V0U3RvcmFnZTtcbmV4cG9ydHMuYWRkU3RvcmFnZSA9IGFkZFN0b3JhZ2U7XG5leHBvcnRzLnJlbW92ZVN0b3JhZ2UgPSByZW1vdmVTdG9yYWdlO1xuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfVxuXG52YXIgcHJvcHNNYXAgPSBuZXcgTWFwKCk7XG5cbnZhciBldmVudHNNYXAgPSBuZXcgTWFwKCk7XG5cbnZhciBzdG9yYWdlS2V5cyA9IGV4cG9ydHMuc3RvcmFnZUtleXMgPSB7XG4gICAgUFJPUFM6IFwicHJvcHNcIixcbiAgICBFVkVOVFM6IFwiZXZlbnRzXCJcbn07XG5cbnZhciBkcml2ZXIgPSB7XG4gICAgaXRlbXM6IE9iamVjdC5jcmVhdGUoKF9PYmplY3QkY3JlYXRlID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfT2JqZWN0JGNyZWF0ZSwgc3RvcmFnZUtleXMuUFJPUFMsIHByb3BzTWFwKSwgX2RlZmluZVByb3BlcnR5KF9PYmplY3QkY3JlYXRlLCBzdG9yYWdlS2V5cy5FVkVOVFMsIGV2ZW50c01hcCksIF9PYmplY3QkY3JlYXRlKSksXG4gICAgc2V0SXRlbTogZnVuY3Rpb24gc2V0SXRlbShrZXksIHZhbHVlKSB7XG4gICAgICAgIHRoaXMuaXRlbXNba2V5XSA9IHZhbHVlO1xuICAgIH0sXG4gICAgZ2V0SXRlbTogZnVuY3Rpb24gZ2V0SXRlbShrZXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlbXNba2V5XTtcbiAgICB9LFxuICAgIHJlbW92ZUl0ZW06IGZ1bmN0aW9uIHJlbW92ZUl0ZW0oa2V5KSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLml0ZW1zW2tleV07XG4gICAgfSxcbiAgICBtaWdyYXRlOiBmdW5jdGlvbiBtaWdyYXRlKGRyaXZlcikge1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5pdGVtcykge1xuICAgICAgICAgICAgZHJpdmVyLnNldEl0ZW0oa2V5LCB0aGlzLml0ZW1zW2tleV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkcml2ZXI7XG4gICAgfVxufTtcblxudmFyIHN0b3JhZ2UgPSBleHBvcnRzLnN0b3JhZ2UgPSB7XG4gICAgZHJpdmVyOiBkcml2ZXJcbn07XG5cbmZ1bmN0aW9uIHNldFN0b3JhZ2VEcml2ZXIoZHJpdmVyKSB7XG4gICAgc3RvcmFnZS5kcml2ZXIgPSBzdG9yYWdlLmRyaXZlci5taWdyYXRlKGRyaXZlcik7XG59XG5cbmZ1bmN0aW9uIGdldFN0b3JhZ2Uoa2V5KSB7XG4gICAgcmV0dXJuIHN0b3JhZ2UuZHJpdmVyLmdldEl0ZW0oa2V5KTtcbn1cblxuZnVuY3Rpb24gYWRkU3RvcmFnZShrZXksIHZhbHVlKSB7XG4gICAgc3RvcmFnZS5kcml2ZXIuc2V0SXRlbShrZXksIHZhbHVlKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlU3RvcmFnZShrZXkpIHtcbiAgICBzdG9yYWdlLmRyaXZlci5yZW1vdmVJdGVtKGtleSk7XG59XG5cbi8qKiovIH0pLFxuLyogMSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cblxudmFyIGRlZmF1bHRJbXBsZW1lbnRhdGlvbiA9IHtcbiAgICByZWdpc3RlckNvbXBvbmVudDogZnVuY3Rpb24gcmVnaXN0ZXJDb21wb25lbnQobmFtZSwgY29tcG9uZW50KSB7XG4gICAgICAgIGlmICgnY3VzdG9tRWxlbWVudHMnIGluIHdpbmRvdykge1xuICAgICAgICAgICAgY3VzdG9tRWxlbWVudHMuZGVmaW5lKG5hbWUsIGNvbXBvbmVudCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjdXJyZW50UmVhZHlDaGVjaygpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF9yZWdpc3RlckNvbXBvbmVudChuYW1lLCBjb21wb25lbnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGlzQ3VzdG9tQ29tcG9uZW50OiBmdW5jdGlvbiBpc0N1c3RvbUNvbXBvbmVudChub2RlKSB7XG4gICAgICAgIHJldHVybiBub2RlLm5vZGVOYW1lLmluY2x1ZGVzKFwiLVwiKTtcbiAgICB9XG59O1xuXG52YXIgY3VycmVudEltcGxlbWVudGF0aW9uID0gZGVmYXVsdEltcGxlbWVudGF0aW9uO1xuXG52YXIgX3JlZ2lzdGVyQ29tcG9uZW50ID0gZnVuY3Rpb24gX3JlZ2lzdGVyQ29tcG9uZW50KG5hbWUsIGNvbXBvbmVudCkge1xuICAgIHJldHVybiBjdXJyZW50SW1wbGVtZW50YXRpb24ucmVnaXN0ZXJDb21wb25lbnQobmFtZSwgY29tcG9uZW50KTtcbn07XG5cbnZhciBzZXRJbXBsZW1lbnRhdGlvbiA9IGV4cG9ydHMuc2V0SW1wbGVtZW50YXRpb24gPSBmdW5jdGlvbiBzZXRJbXBsZW1lbnRhdGlvbihpbXBsZW1lbnRhdGlvbikge1xuICAgIGN1cnJlbnRJbXBsZW1lbnRhdGlvbiA9IGltcGxlbWVudGF0aW9uO1xufTtcblxudmFyIGN1cnJlbnRSZWFkeUNoZWNrID0gZnVuY3Rpb24gY3VycmVudFJlYWR5Q2hlY2soKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xufTtcblxudmFyIGNvbXBvbmVudHNSZWFkeSA9IGV4cG9ydHMuY29tcG9uZW50c1JlYWR5ID0gZnVuY3Rpb24gY29tcG9uZW50c1JlYWR5KCkge1xuICAgIHJldHVybiBjdXJyZW50UmVhZHlDaGVjaygpO1xufTtcblxudmFyIHNldFJlYWR5Q2hlY2sgPSBleHBvcnRzLnNldFJlYWR5Q2hlY2sgPSBmdW5jdGlvbiBzZXRSZWFkeUNoZWNrKHJlYWR5Q2hlY2spIHtcbiAgICBjdXJyZW50UmVhZHlDaGVjayA9IHJlYWR5Q2hlY2s7XG59O1xuXG5leHBvcnRzLmRlZmF1bHQgPSBfcmVnaXN0ZXJDb21wb25lbnQ7XG52YXIgaXNDdXN0b21Db21wb25lbnQgPSBleHBvcnRzLmlzQ3VzdG9tQ29tcG9uZW50ID0gZnVuY3Rpb24gaXNDdXN0b21Db21wb25lbnQobm9kZSkge1xuICAgIHJldHVybiBjdXJyZW50SW1wbGVtZW50YXRpb24uaXNDdXN0b21Db21wb25lbnQobm9kZSk7XG59O1xuXG4vKioqLyB9KSxcbi8qIDIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG5cbnZhciBzdHViSW1wbGVtZW50YXRpb24gPSB7XG4gICAgcmVkdWNlcnM6IHt9LFxuICAgIHN1YnNjcmlwdGlvbnM6IHt9LFxuICAgIGFkZFJlZHVjZXI6IGZ1bmN0aW9uIGFkZFJlZHVjZXIoa2V5LCByZWR1Y2VyKSB7XG4gICAgICAgIHRoaXMucmVkdWNlcnNba2V5XSA9IHJlZHVjZXI7XG4gICAgfSxcbiAgICByZW1vdmVSZWR1Y2VyOiBmdW5jdGlvbiByZW1vdmVSZWR1Y2VyKGtleSkge1xuICAgICAgICBkZWxldGUgdGhpcy5yZWR1Y2Vyc1trZXldO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcbiAgICBzdWJzY3JpYmU6IGZ1bmN0aW9uIHN1YnNjcmliZShrZXksIGNiKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgICAgaWYgKCF0aGlzLnN1YnNjcmlwdGlvbnNba2V5XSkge1xuICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zW2tleV0gPSBbXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnNba2V5XS5wdXNoKGNiKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlOiBmdW5jdGlvbiB1bnN1YnNjcmliZSgpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5zdWJzY3JpcHRpb25zW2tleV0gPSBfdGhpcy5zdWJzY3JpcHRpb25zW2tleV0uZmlsdGVyKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWwgIT09IGNiO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0sXG4gICAgZ2V0U3RhdGU6IGZ1bmN0aW9uIGdldFN0YXRlKGtleSkge30sXG4gICAgbWlncmF0ZTogZnVuY3Rpb24gbWlncmF0ZShuZXdTdG9yZSkge1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5yZWR1Y2Vycykge1xuICAgICAgICAgICAgdmFyIHJlZHVjZXIgPSB0aGlzLnJlZHVjZXJzW2tleV07XG4gICAgICAgICAgICBuZXdTdG9yZS5hZGRSZWR1Y2VyKGtleSwgcmVkdWNlcik7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgX2tleSBpbiB0aGlzLnN1YnNjcmlwdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBfZGlkSXRlcmF0b3JFcnJvciA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIF9pdGVyYXRvckVycm9yID0gdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pdGVyYXRvciA9IHRoaXMuc3Vic2NyaXB0aW9uc1tfa2V5XVtTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSAoX3N0ZXAgPSBfaXRlcmF0b3IubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IF9zdGVwLnZhbHVlO1xuXG4gICAgICAgICAgICAgICAgICAgIG5ld1N0b3JlLnN1YnNjcmliZShfa2V5LCBzdWJzY3JpcHRpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBfaXRlcmF0b3JFcnJvciA9IGVycjtcbiAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uICYmIF9pdGVyYXRvci5yZXR1cm4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pdGVyYXRvci5yZXR1cm4oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ld1N0b3JlO1xuICAgIH1cbn07XG5cbnZhciBzdG9yZSA9IHtcbiAgICBjdXJyZW50SW1wbGVtZW50YXRpb246IHN0dWJJbXBsZW1lbnRhdGlvblxufTtcblxudmFyIHNldEltcGxlbWVudGF0aW9uID0gZXhwb3J0cy5zZXRJbXBsZW1lbnRhdGlvbiA9IGZ1bmN0aW9uIHNldEltcGxlbWVudGF0aW9uKGltcGxlbWVudGF0aW9uKSB7XG4gICAgc3RvcmUuY3VycmVudEltcGxlbWVudGF0aW9uID0gc3RvcmUuY3VycmVudEltcGxlbWVudGF0aW9uLm1pZ3JhdGUoaW1wbGVtZW50YXRpb24pO1xufTtcblxudmFyIHJlZ2lzdGVyUmVkdWNlciA9IGV4cG9ydHMucmVnaXN0ZXJSZWR1Y2VyID0gZnVuY3Rpb24gcmVnaXN0ZXJSZWR1Y2VyKGtleSwgcmVkdWNlcikge1xuICAgIHN0b3JlLmN1cnJlbnRJbXBsZW1lbnRhdGlvbi5hZGRSZWR1Y2VyKGtleSwgcmVkdWNlcik7XG59O1xudmFyIHJlbW92ZVJlZHVjZXIgPSBleHBvcnRzLnJlbW92ZVJlZHVjZXIgPSBmdW5jdGlvbiByZW1vdmVSZWR1Y2VyKGtleSkge1xuICAgIHN0b3JlLmN1cnJlbnRJbXBsZW1lbnRhdGlvbi5yZW1vdmVSZWR1Y2VyKGtleSk7XG59O1xudmFyIHN1YnNjcmliZSA9IGV4cG9ydHMuc3Vic2NyaWJlID0gZnVuY3Rpb24gc3Vic2NyaWJlKGtleSwgY2IpIHtcbiAgICByZXR1cm4gc3RvcmUuY3VycmVudEltcGxlbWVudGF0aW9uLnN1YnNjcmliZShrZXksIGNiKTtcbn07XG52YXIgZ2V0U3RhdGUgPSBleHBvcnRzLmdldFN0YXRlID0gZnVuY3Rpb24gZ2V0U3RhdGUoa2V5KSB7XG4gICAgcmV0dXJuIHN0b3JlLmN1cnJlbnRJbXBsZW1lbnRhdGlvbi5nZXRTdGF0ZShrZXkpO1xufTtcblxuLyoqKi8gfSksXG4vKiAzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9zbGljZWRUb0FycmF5ID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBzbGljZUl0ZXJhdG9yKGFyciwgaSkgeyB2YXIgX2FyciA9IFtdOyB2YXIgX24gPSB0cnVlOyB2YXIgX2QgPSBmYWxzZTsgdmFyIF9lID0gdW5kZWZpbmVkOyB0cnkgeyBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7IF9hcnIucHVzaChfcy52YWx1ZSk7IGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsgfSB9IGNhdGNoIChlcnIpIHsgX2QgPSB0cnVlOyBfZSA9IGVycjsgfSBmaW5hbGx5IHsgdHJ5IHsgaWYgKCFfbiAmJiBfaVtcInJldHVyblwiXSkgX2lbXCJyZXR1cm5cIl0oKTsgfSBmaW5hbGx5IHsgaWYgKF9kKSB0aHJvdyBfZTsgfSB9IHJldHVybiBfYXJyOyB9IHJldHVybiBmdW5jdGlvbiAoYXJyLCBpKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgcmV0dXJuIGFycjsgfSBlbHNlIGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGFycikpIHsgcmV0dXJuIHNsaWNlSXRlcmF0b3IoYXJyLCBpKTsgfSBlbHNlIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2VcIik7IH0gfTsgfSgpO1xuXG52YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbmV4cG9ydHMuY2FsbEhhbmRsZXJzID0gY2FsbEhhbmRsZXJzO1xuZXhwb3J0cy5hZGRUZW1wbGF0ZUhhbmRsZXIgPSBhZGRUZW1wbGF0ZUhhbmRsZXI7XG5leHBvcnRzLmFjY2Vzc0hhbmRsZXIgPSBhY2Nlc3NIYW5kbGVyO1xuZXhwb3J0cy51bmxvYWRIYW5kbGVyID0gdW5sb2FkSGFuZGxlcjtcbmV4cG9ydHMuc2V0Q29yZUhhbmRsZXIgPSBzZXRDb3JlSGFuZGxlcjtcblxudmFyIF9zdG9yYWdlID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIF91dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cbnZhciBfd2ViQ29tcG9uZW50cyA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9XG5cbnZhciBwcm9wc1N0b3JhZ2UgPSAoMCwgX3N0b3JhZ2UuZ2V0U3RvcmFnZSkoX3N0b3JhZ2Uuc3RvcmFnZUtleXMuUFJPUFMpO1xudmFyIGV2ZW50c1N0b3JhZ2UgPSAoMCwgX3N0b3JhZ2UuZ2V0U3RvcmFnZSkoX3N0b3JhZ2Uuc3RvcmFnZUtleXMuRVZFTlRTKTtcblxudmFyIEV2ZW50c1RhZ0hhbmRsZXIgPSB7XG4gICAgY2FsbDogZnVuY3Rpb24gY2FsbChub2RlLCBhcmdzKSB7XG4gICAgICAgIHZhciBhdHRyaWJ1dGVzID0gbm9kZS5hdHRyaWJ1dGVzIHx8IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGF0dHJpYnV0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBhdHRyaWJ1dGUgPSBhdHRyaWJ1dGVzW2ldO1xuICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZS5ub2RlTmFtZS5zdGFydHNXaXRoKFwib25cIikpIHtcbiAgICAgICAgICAgICAgICB2YXIgbWF0Y2ggPSAoMCwgX3V0aWxzLm1hdGNoVGFnQXJnKShhdHRyaWJ1dGUubm9kZVZhbHVlKTtcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2ggJiYgbWF0Y2hbMV0pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gTnVtYmVyKG1hdGNoWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxpc3RlbmVyID0gYXJnc1tpbmRleF07XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbGlzdGVuZXIgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUoYXR0cmlidXRlLm5vZGVOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBldmVudE5hbWUgPSBhdHRyaWJ1dGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKS5zbGljZSgyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGxpc3RlbmVyKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpc3RlbmVycyA9IGV2ZW50c1N0b3JhZ2UuZ2V0KG5vZGUpIHx8IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRzU3RvcmFnZS5zZXQobm9kZSwgX2V4dGVuZHMoe30sIGxpc3RlbmVycywgX2RlZmluZVByb3BlcnR5KHt9LCBldmVudE5hbWUsIGxpc3RlbmVyKSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufTtcblxudmFyIE1hcEhhbmRsZXIgPSB7XG4gICAgY2FsbDogZnVuY3Rpb24gY2FsbChub2RlLCBhcmdzKSB7XG4gICAgICAgIGlmIChub2RlIGluc3RhbmNlb2YgSFRNTFRlbXBsYXRlRWxlbWVudCkge1xuICAgICAgICAgICAgaWYgKG5vZGUuaGFzQXR0cmlidXRlKFwibWFwXCIpKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1hdGNoID0gKDAsIF91dGlscy5tYXRjaFRhZ0FyZykoU3RyaW5nKG5vZGUuZ2V0QXR0cmlidXRlKFwibWFwXCIpKSk7XG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoICYmIG1hdGNoWzFdKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IE51bWJlcihtYXRjaFsxXSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhcnIgPSBhcmdzW2luZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRwbCA9IG5vZGUuaW5uZXJIVE1MO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGVtcGxhdGVcIik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBub2RlcyA9IGFyci5tYXAoZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKDAsIF91dGlscy5yZXBsYWNlVGFnQXJnKSh0cGwsIGZ1bmN0aW9uIChtYXRjaCwgaW5kZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXJnID0gYXJnc1tpbmRleF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBhcmcgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHBsQ2FsbCA9IGFyZyhlbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0cGxDYWxsIGluc3RhbmNlb2YgSFRNTFRlbXBsYXRlRWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRwbENhbGwuaW5uZXJIVE1MO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodHBsQ2FsbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHBsQ2FsbC5qb2luKCcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRwbENhbGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyZztcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgZnJhZ21lbnQuaW5uZXJIVE1MID0gbm9kZXMuam9pbignJyk7XG4gICAgICAgICAgICAgICAgICAgIC8vICRGbG93Rml4TWVcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChmcmFnbWVudC5jb250ZW50LCBub2RlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5mdW5jdGlvbiBzaG91bGRTZXRQcm9wVG9TdG9yYWdlKHZhbHVlLCBub2RlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiIHx8ICh0eXBlb2YgdmFsdWUgPT09IFwidW5kZWZpbmVkXCIgPyBcInVuZGVmaW5lZFwiIDogX3R5cGVvZih2YWx1ZSkpID09PSBcIm9iamVjdFwiIHx8ICgwLCBfd2ViQ29tcG9uZW50cy5pc0N1c3RvbUNvbXBvbmVudCkobm9kZSk7XG59XG5cbmZ1bmN0aW9uIHBhcnNlQXR0cmlidXRlKGF0dHJpYnV0ZSwgbm9kZSwgYXJncykge1xuICAgIHZhciBtYXRjaCA9ICgwLCBfdXRpbHMubWF0Y2hUYWdBcmcpKGF0dHJpYnV0ZS5ub2RlVmFsdWUpO1xuICAgIGlmIChtYXRjaCAmJiBtYXRjaFsxXSkge1xuICAgICAgICB2YXIgaW5kZXggPSBOdW1iZXIobWF0Y2hbMV0pO1xuICAgICAgICB2YXIgbm9kZU5hbWUgPSBhdHRyaWJ1dGUubm9kZU5hbWU7XG4gICAgICAgIHZhciBwcm9wTmFtZSA9ICgwLCBfdXRpbHMudGFnTmFtZVRvUHJvcCkobm9kZU5hbWUpO1xuICAgICAgICB2YXIgdmFsdWUgPSBhcmdzW2luZGV4XTtcbiAgICAgICAgcmV0dXJuIFtwcm9wTmFtZSwgdmFsdWVdO1xuICAgIH1cbiAgICByZXR1cm4gW2F0dHJpYnV0ZS5ub2RlTmFtZSwgYXR0cmlidXRlLm5vZGVWYWx1ZV07XG59XG5cbnZhciBQcm9wc0hhbmRsZXIgPSB7XG4gICAgY2FsbDogZnVuY3Rpb24gY2FsbChub2RlLCBhcmdzKSB7XG4gICAgICAgIHZhciBhdHRyaWJ1dGVzID0gbm9kZS5hdHRyaWJ1dGVzIHx8IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGF0dHJpYnV0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBhdHRyaWJ1dGUgPSBhdHRyaWJ1dGVzW2ldO1xuXG4gICAgICAgICAgICB2YXIgX3BhcnNlQXR0cmlidXRlID0gcGFyc2VBdHRyaWJ1dGUoYXR0cmlidXRlLCBub2RlLCBhcmdzKSxcbiAgICAgICAgICAgICAgICBfcGFyc2VBdHRyaWJ1dGUyID0gX3NsaWNlZFRvQXJyYXkoX3BhcnNlQXR0cmlidXRlLCAyKSxcbiAgICAgICAgICAgICAgICBwcm9wTmFtZSA9IF9wYXJzZUF0dHJpYnV0ZTJbMF0sXG4gICAgICAgICAgICAgICAgdmFsdWUgPSBfcGFyc2VBdHRyaWJ1dGUyWzFdO1xuXG4gICAgICAgICAgICBpZiAoc2hvdWxkU2V0UHJvcFRvU3RvcmFnZSh2YWx1ZSwgbm9kZSkpIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJvcHMgPSBwcm9wc1N0b3JhZ2UuZ2V0KG5vZGUpIHx8IHt9O1xuICAgICAgICAgICAgICAgIG5vZGUucmVtb3ZlQXR0cmlidXRlKGF0dHJpYnV0ZS5ub2RlTmFtZSk7XG4gICAgICAgICAgICAgICAgcHJvcHNTdG9yYWdlLnNldChub2RlLCBfZXh0ZW5kcyh7fSwgcHJvcHMsIF9kZWZpbmVQcm9wZXJ0eSh7fSwgcHJvcE5hbWUsIHZhbHVlKSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufTtcblxudmFyIGNvcmVIYW5kbGVycyA9IHtcbiAgICBldmVudHM6IEV2ZW50c1RhZ0hhbmRsZXIsXG4gICAgbWFwOiBNYXBIYW5kbGVyLFxuICAgIHByb3BzOiBQcm9wc0hhbmRsZXJcbn07XG5cbnZhciBjdXN0b21IYW5kbGVycyA9IHt9O1xuXG52YXIgaGFuZGxlcnMgPSBbY29yZUhhbmRsZXJzLm1hcC5jYWxsLCBjb3JlSGFuZGxlcnMuZXZlbnRzLmNhbGwsIGNvcmVIYW5kbGVycy5wcm9wcy5jYWxsXTtcblxuZnVuY3Rpb24gY2FsbEhhbmRsZXJzKGVsZW1lbnQsIGFyZ3MpIHtcbiAgICBpZiAoKGVsZW1lbnQuYXR0cmlidXRlcyB8fCBbXSkubGVuZ3RoKSB7XG4gICAgICAgIGhhbmRsZXJzLmZvckVhY2goZnVuY3Rpb24gKGhhbmRsZXIpIHtcbiAgICAgICAgICAgIGhhbmRsZXIoZWxlbWVudCwgYXJncyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnQuY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjYWxsSGFuZGxlcnMoZWxlbWVudC5jaGlsZE5vZGVzW2ldLCBhcmdzKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGFkZFRlbXBsYXRlSGFuZGxlcihrZXksIGhhbmRsZXIpIHtcbiAgICBjdXN0b21IYW5kbGVyc1trZXldID0gaGFuZGxlcjtcbiAgICAvLyAkRmxvd0ZpeE1lXG4gICAgaGFuZGxlcnMudW5zaGlmdChoYW5kbGVyLmNhbGwpO1xufVxuXG5mdW5jdGlvbiBhY2Nlc3NIYW5kbGVyKGtleSkge1xuICAgIHJldHVybiBjdXN0b21IYW5kbGVyc1trZXldO1xufVxuXG5mdW5jdGlvbiB1bmxvYWRIYW5kbGVyKGtleSkge1xuICAgIHZhciBoYW5kbGVyID0gY3VzdG9tSGFuZGxlcnNba2V5XTtcbiAgICBoYW5kbGVycyA9IGhhbmRsZXJzLmZpbHRlcihmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgcmV0dXJuIGVsICE9PSBoYW5kbGVyLmNhbGw7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIHNldENvcmVIYW5kbGVyKGtleSwgaGFuZGxlcikge1xuICAgIGNvcmVIYW5kbGVyc1trZXldID0gaGFuZGxlcjtcbn1cblxuLyoqKi8gfSksXG4vKiA0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuY2xlYXJQcm9wc1N0b3JhZ2UgPSBjbGVhclByb3BzU3RvcmFnZTtcbmV4cG9ydHMuY2xlYXJFdmVudHNTdG9yYWdlID0gY2xlYXJFdmVudHNTdG9yYWdlO1xuZXhwb3J0cy50YWdOYW1lVG9Qcm9wID0gdGFnTmFtZVRvUHJvcDtcbmV4cG9ydHMuY3JlYXRlVGFnQXJnID0gY3JlYXRlVGFnQXJnO1xuZXhwb3J0cy5tYXRjaFRhZ0FyZyA9IG1hdGNoVGFnQXJnO1xuZXhwb3J0cy5yZXBsYWNlVGFnQXJnID0gcmVwbGFjZVRhZ0FyZztcbmV4cG9ydHMuYXR0cmlidXRlU3RhcnRzID0gYXR0cmlidXRlU3RhcnRzO1xuXG52YXIgX3N0b3JhZ2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgcHJvcHNTdG9yYWdlID0gKDAsIF9zdG9yYWdlLmdldFN0b3JhZ2UpKF9zdG9yYWdlLnN0b3JhZ2VLZXlzLlBST1BTKTtcblxudmFyIGV2ZW50c1N0b3JhZ2UgPSAoMCwgX3N0b3JhZ2UuZ2V0U3RvcmFnZSkoX3N0b3JhZ2Uuc3RvcmFnZUtleXMuRVZFTlRTKTtcblxuZnVuY3Rpb24gY2xlYXJQcm9wc1N0b3JhZ2UoKSB7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZTtcbiAgICAgICAgdmFyIF9kaWRJdGVyYXRvckVycm9yID0gZmFsc2U7XG4gICAgICAgIHZhciBfaXRlcmF0b3JFcnJvciA9IHVuZGVmaW5lZDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gcHJvcHNTdG9yYWdlLmtleXMoKVtTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSAoX3N0ZXAgPSBfaXRlcmF0b3IubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWUpIHtcbiAgICAgICAgICAgICAgICB2YXIga2V5ID0gX3N0ZXAudmFsdWU7XG5cbiAgICAgICAgICAgICAgICBpZiAoIWtleS5pc0Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICBwcm9wc1N0b3JhZ2UuZGVsZXRlKGtleSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgIF9pdGVyYXRvckVycm9yID0gZXJyO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gJiYgX2l0ZXJhdG9yLnJldHVybikge1xuICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3IucmV0dXJuKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGNsZWFyRXZlbnRzU3RvcmFnZSgpIHtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gdHJ1ZTtcbiAgICAgICAgdmFyIF9kaWRJdGVyYXRvckVycm9yMiA9IGZhbHNlO1xuICAgICAgICB2YXIgX2l0ZXJhdG9yRXJyb3IyID0gdW5kZWZpbmVkO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IyID0gZXZlbnRzU3RvcmFnZS5rZXlzKClbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDI7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSAoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiA9IHRydWUpIHtcbiAgICAgICAgICAgICAgICB2YXIga2V5ID0gX3N0ZXAyLnZhbHVlO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFrZXkuaXNDb25uZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRzU3RvcmFnZS5kZWxldGUoa2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgX2RpZEl0ZXJhdG9yRXJyb3IyID0gdHJ1ZTtcbiAgICAgICAgICAgIF9pdGVyYXRvckVycm9yMiA9IGVycjtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiAmJiBfaXRlcmF0b3IyLnJldHVybikge1xuICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3IyLnJldHVybigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yMikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIHRhZ05hbWVUb1Byb3Aobm9kZU5hbWUpIHtcbiAgICByZXR1cm4gbm9kZU5hbWUuc3BsaXQoXCItXCIpLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBuZXh0KSB7XG4gICAgICAgIGlmIChuZXh0KSB7XG4gICAgICAgICAgICByZXR1cm4gYWNjICsgbmV4dFswXS50b1VwcGVyQ2FzZSgpICsgbmV4dC5zbGljZSgxKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYWNjO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVUYWdBcmcoaW5kZXgpIHtcbiAgICByZXR1cm4gXCI8IS0tX19BUkdfX1wiICsgaW5kZXggKyBcIi0tPlwiO1xufVxuXG5mdW5jdGlvbiBtYXRjaFRhZ0FyZyhzdHIpIHtcbiAgICByZXR1cm4gc3RyLm1hdGNoKC9fX0FSR19fKFxcZCspLyk7XG59XG5cbmZ1bmN0aW9uIHJlcGxhY2VUYWdBcmcoc3RyLCBmbikge1xuICAgIHJldHVybiBzdHIucmVwbGFjZSgvPCEtLV9fQVJHX18oXFxkKyktLT4vLCBmbik7XG59XG5cbmZ1bmN0aW9uIGF0dHJpYnV0ZVN0YXJ0cyhzdHIpIHtcbiAgICByZXR1cm4gc3RyLnRyaW0oKS5zbGljZSgtMikgPT09IFwiPVxcXCJcIjtcbn1cblxuLyoqKi8gfSksXG4vKiA1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF93ZWJDb21wb25lbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiY2hhbmdlV2ViQ29tcG9uZW50c0ltcGxlbWVuYXRpb25cIiwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBfd2ViQ29tcG9uZW50cy5zZXRJbXBsZW1lbnRhdGlvbjtcbiAgICB9XG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcImNvbXBvbmVudHNSZWFkeVwiLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIF93ZWJDb21wb25lbnRzLmNvbXBvbmVudHNSZWFkeTtcbiAgICB9XG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcImNoYW5nZVdlYkNvbXBvbmVudHNSZWFkeUNoZWNrXCIsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gX3dlYkNvbXBvbmVudHMuc2V0UmVhZHlDaGVjaztcbiAgICB9XG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcInJlZ2lzdGVyQ29tcG9uZW50XCIsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfd2ViQ29tcG9uZW50cykuZGVmYXVsdDtcbiAgICB9XG59KTtcblxudmFyIF9zdG9yZSA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcImNoYW5nZVN0b3JlSW1wbGVtZW50YXRpb25cIiwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBfc3RvcmUuc2V0SW1wbGVtZW50YXRpb247XG4gICAgfVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJyZWdpc3RlclJlZHVjZXJcIiwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBfc3RvcmUucmVnaXN0ZXJSZWR1Y2VyO1xuICAgIH1cbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwicmVtb3ZlUmVkdWNlclwiLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIF9zdG9yZS5yZW1vdmVSZWR1Y2VyO1xuICAgIH1cbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwic3Vic2NyaWJlXCIsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gX3N0b3JlLnN1YnNjcmliZTtcbiAgICB9XG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcImdldFN0YXRlXCIsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gX3N0b3JlLmdldFN0YXRlO1xuICAgIH1cbn0pO1xuXG52YXIgX2hhbmRsZXJzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiYWRkVGVtcGxhdGVIYW5kbGVyXCIsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gX2hhbmRsZXJzLmFkZFRlbXBsYXRlSGFuZGxlcjtcbiAgICB9XG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcInNldENvcmVIYW5kbGVyXCIsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gX2hhbmRsZXJzLnNldENvcmVIYW5kbGVyO1xuICAgIH1cbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwidW5sb2FkSGFuZGxlclwiLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIF9oYW5kbGVycy51bmxvYWRIYW5kbGVyO1xuICAgIH1cbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiYWNjZXNzSGFuZGxlclwiLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIF9oYW5kbGVycy5hY2Nlc3NIYW5kbGVyO1xuICAgIH1cbn0pO1xuXG52YXIgX3RhZyA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcImh0bWxcIiwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBfdGFnLmh0bWw7XG4gICAgfVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJjc3NcIiwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBfdGFnLmNzcztcbiAgICB9XG59KTtcblxudmFyIF9zdG9yYWdlID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiZ2V0U3RvcmFnZVwiLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIF9zdG9yYWdlLmdldFN0b3JhZ2U7XG4gICAgfVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJhZGRTdG9yYWdlXCIsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gX3N0b3JhZ2UuYWRkU3RvcmFnZTtcbiAgICB9XG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcInJlbW92ZVN0b3JhZ2VcIiwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBfc3RvcmFnZS5yZW1vdmVTdG9yYWdlO1xuICAgIH1cbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwic2V0U3RvcmFnZURyaXZlclwiLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIF9zdG9yYWdlLnNldFN0b3JhZ2VEcml2ZXI7XG4gICAgfVxufSk7XG5cbnZhciBfYmluZCA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcImJpbmRcIiwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBfYmluZC5iaW5kO1xuICAgIH1cbn0pO1xuXG52YXIgX3V0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwibWF0Y2hUYWdBcmdcIiwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBfdXRpbHMubWF0Y2hUYWdBcmc7XG4gICAgfVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJyZXBsYWNlVGFnQXJnXCIsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gX3V0aWxzLnJlcGxhY2VUYWdBcmc7XG4gICAgfVxufSk7XG5cbnZhciBfQ29tcG9uZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiQ29tcG9uZW50XCIsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQ29tcG9uZW50KS5kZWZhdWx0O1xuICAgIH1cbn0pO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG4vKioqLyB9KSxcbi8qIDYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cbmV4cG9ydHMuaHRtbCA9IGh0bWw7XG5leHBvcnRzLmNzcyA9IGNzcztcblxudmFyIF9oYW5kbGVycyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cbnZhciBfdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXG5mdW5jdGlvbiBodG1sKHN0cmluZ3MpIHtcbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4gPiAxID8gX2xlbiAtIDEgOiAwKSwgX2tleSA9IDE7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgICAgYXJnc1tfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgaWYgKCFhcmdzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gc3RyaW5nc1swXTtcbiAgICB9XG5cbiAgICB2YXIgdHBsID0gXCJcIjtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0cmluZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdHBsICs9IHN0cmluZ3NbaV07XG4gICAgICAgIGlmIChpIDwgc3RyaW5ncy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhcmdzW2ldKSAmJiAoMCwgX3V0aWxzLmF0dHJpYnV0ZVN0YXJ0cykodHBsKSA9PT0gZmFsc2UpIHRwbCArPSBhcmdzW2ldLmpvaW4oJycpO2Vsc2UgaWYgKHR5cGVvZiBhcmdzW2ldID09PSBcImZ1bmN0aW9uXCIgfHwgX3R5cGVvZihhcmdzW2ldKSA9PT0gXCJvYmplY3RcIikgdHBsICs9ICgwLCBfdXRpbHMuY3JlYXRlVGFnQXJnKShpKTtlbHNlIHRwbCArPSBhcmdzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHZhciB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZW1wbGF0ZVwiKTtcbiAgICB0ZW1wbGF0ZS5pbm5lckhUTUwgPSB0cGw7XG4gICAgKDAsIF9oYW5kbGVycy5jYWxsSGFuZGxlcnMpKHRlbXBsYXRlLmNvbnRlbnQsIGFyZ3MpO1xuICAgIHJldHVybiB0ZW1wbGF0ZTtcbn1cblxuZnVuY3Rpb24gY3NzKHN0cmluZ3MpIHtcbiAgICB2YXIgcmVzdWx0ID0gJyc7XG5cbiAgICBmb3IgKHZhciBfbGVuMiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuMiA+IDEgPyBfbGVuMiAtIDEgOiAwKSwgX2tleTIgPSAxOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7XG4gICAgICAgIGFyZ3NbX2tleTIgLSAxXSA9IGFyZ3VtZW50c1tfa2V5Ml07XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHJpbmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHJlc3VsdCArPSBzdHJpbmdzW2ldO1xuICAgICAgICBpZiAoaSA8IHN0cmluZ3MubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBhcmdzW2ldID09PSBcImZ1bmN0aW9uXCIpIHJlc3VsdCArPSBhcmdzW2ldKCk7ZWxzZSByZXN1bHQgKz0gYXJnc1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKioqLyB9KSxcbi8qIDcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5iaW5kID0gYmluZDtcblxudmFyIF9zdG9yYWdlID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfSBlbHNlIHsgcmV0dXJuIEFycmF5LmZyb20oYXJyKTsgfSB9XG5cbnZhciBLRVkgPSBcIkJPVU5EU1wiO1xudmFyIE1BWF9TVE9SQUdFX1NJWkUgPSAxMDA7XG5cbigwLCBfc3RvcmFnZS5hZGRTdG9yYWdlKShLRVksIG5ldyBNYXAoKSk7XG5cbmZ1bmN0aW9uIGFwcGVuZFRvU3RvcmFnZShmbiwgdmFsdWUpIHtcbiAgICB2YXIgc3RvcmFnZSA9ICgwLCBfc3RvcmFnZS5nZXRTdG9yYWdlKShLRVkpO1xuICAgIGlmIChzdG9yYWdlLnNpemUgPT09IE1BWF9TVE9SQUdFX1NJWkUpIHtcbiAgICAgICAgdmFyIGtleXMgPSBzdG9yYWdlLmtleXMoKTtcbiAgICAgICAgLy8gJEZsb3dGaXhNZVxuICAgICAgICBzdG9yYWdlLmRlbGV0ZShrZXlzLm5leHQoKS52YWx1ZSk7XG4gICAgfVxuICAgIHN0b3JhZ2Uuc2V0KGZuLCB2YWx1ZSk7XG59XG5cbmZ1bmN0aW9uIGJpbmQoZm4pIHtcbiAgICB2YXIgc3RvcmFnZSA9ICgwLCBfc3RvcmFnZS5nZXRTdG9yYWdlKShLRVkpO1xuICAgIHZhciBib3VuZCA9IHN0b3JhZ2UuZ2V0KGZuKTtcblxuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgICBhcmdzW19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICB2YXIgZmlyc3RBcmcgPSBhcmdzWzBdO1xuICAgIHZhciBib3VuZEZuID0gZm4uYmluZC5hcHBseShmbiwgW251bGxdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoYXJncykpKTtcbiAgICBpZiAoYm91bmQpIHtcbiAgICAgICAgaWYgKCFib3VuZC5nZXQoZmlyc3RBcmcpKSB7XG4gICAgICAgICAgICBib3VuZC5zZXQoZmlyc3RBcmcsIGJvdW5kRm4pO1xuICAgICAgICAgICAgcmV0dXJuIGJvdW5kRm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gJEZsb3dGaXhNZVxuICAgICAgICByZXR1cm4gYm91bmQuZ2V0KGZpcnN0QXJnKTtcbiAgICB9XG5cbiAgICB2YXIgZm5NYXAgPSBuZXcgTWFwKCk7XG4gICAgZm5NYXAuc2V0KGZpcnN0QXJnLCBib3VuZEZuKTtcbiAgICBhcHBlbmRUb1N0b3JhZ2UoZm4sIGZuTWFwKTtcbiAgICByZXR1cm4gYm91bmRGbjtcbn1cblxuLyoqKi8gfSksXG4vKiA4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX3N0b3JlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblxudmFyIF9yZW5kZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXG52YXIgX3N0b3JhZ2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3V0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgX2ZpeEJhYmVsRXh0ZW5kID0gZnVuY3Rpb24gKE8pIHtcbiAgICB2YXIgZ1BPID0gTy5nZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiAobykge1xuICAgICAgICByZXR1cm4gby5fX3Byb3RvX187XG4gICAgfSxcbiAgICAgICAgc1BPID0gTy5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiAobywgcCkge1xuICAgICAgICBvLl9fcHJvdG9fXyA9IHA7XG4gICAgICAgIHJldHVybiBvO1xuICAgIH0sXG4gICAgICAgIGNvbnN0cnVjdCA9ICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKFJlZmxlY3QpKSA9PT0gJ29iamVjdCcgPyBSZWZsZWN0LmNvbnN0cnVjdCA6IGZ1bmN0aW9uIChQYXJlbnQsIGFyZ3MsIENsYXNzKSB7XG4gICAgICAgIHZhciBDb25zdHJ1Y3RvcixcbiAgICAgICAgICAgIGEgPSBbbnVsbF07XG4gICAgICAgIGEucHVzaC5hcHBseShhLCBhcmdzKTtcbiAgICAgICAgQ29uc3RydWN0b3IgPSBQYXJlbnQuYmluZC5hcHBseShQYXJlbnQsIGEpO1xuICAgICAgICByZXR1cm4gc1BPKG5ldyBDb25zdHJ1Y3RvcigpLCBDbGFzcy5wcm90b3R5cGUpO1xuICAgIH07XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gZml4QmFiZWxFeHRlbmQoQ2xhc3MpIHtcbiAgICAgICAgdmFyIFBhcmVudCA9IGdQTyhDbGFzcyk7XG4gICAgICAgIHJldHVybiBzUE8oQ2xhc3MsIHNQTyhmdW5jdGlvbiBTdXBlcigpIHtcbiAgICAgICAgICAgIHJldHVybiBjb25zdHJ1Y3QoUGFyZW50LCBhcmd1bWVudHMsIGdQTyh0aGlzKS5jb25zdHJ1Y3Rvcik7XG4gICAgICAgIH0sIFBhcmVudCkpO1xuICAgIH07XG59KE9iamVjdCk7XG5cbnZhciBwcm9wc1N0b3JhZ2UgPSAoMCwgX3N0b3JhZ2UuZ2V0U3RvcmFnZSkoX3N0b3JhZ2Uuc3RvcmFnZUtleXMuUFJPUFMpO1xuXG5mdW5jdGlvbiBwYXJzZUF0dHJpYnV0ZXMoYXR0cmlidXRlcykge1xuICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWU7XG4gICAgdmFyIF9kaWRJdGVyYXRvckVycm9yID0gZmFsc2U7XG4gICAgdmFyIF9pdGVyYXRvckVycm9yID0gdW5kZWZpbmVkO1xuXG4gICAgdHJ5IHtcbiAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gYXR0cmlidXRlc1tTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSAoX3N0ZXAgPSBfaXRlcmF0b3IubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWUpIHtcbiAgICAgICAgICAgIHZhciBhdHRyaWJ1dGUgPSBfc3RlcC52YWx1ZTtcblxuICAgICAgICAgICAgcmVzdWx0W2F0dHJpYnV0ZS5uYW1lXSA9IGF0dHJpYnV0ZS52YWx1ZTtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBfZGlkSXRlcmF0b3JFcnJvciA9IHRydWU7XG4gICAgICAgIF9pdGVyYXRvckVycm9yID0gZXJyO1xuICAgIH0gZmluYWxseSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gJiYgX2l0ZXJhdG9yLnJldHVybikge1xuICAgICAgICAgICAgICAgIF9pdGVyYXRvci5yZXR1cm4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcikge1xuICAgICAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cblxudmFyIENvbXBvbmVudCA9IF9maXhCYWJlbEV4dGVuZChmdW5jdGlvbiAoX0hUTUxFbGVtZW50KSB7XG4gICAgX2luaGVyaXRzKENvbXBvbmVudCwgX0hUTUxFbGVtZW50KTtcblxuICAgIGZ1bmN0aW9uIENvbXBvbmVudCgpIHtcbiAgICAgICAgdmFyIF9yZWY7XG5cbiAgICAgICAgdmFyIF90ZW1wLCBfdGhpcywgX3JldDtcblxuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ29tcG9uZW50KTtcblxuICAgICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBfcmV0ID0gKF90ZW1wID0gKF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKF9yZWYgPSBDb21wb25lbnQuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihDb21wb25lbnQpKS5jYWxsLmFwcGx5KF9yZWYsIFt0aGlzXS5jb25jYXQoYXJncykpKSwgX3RoaXMpLCBfdGhpcy5fX2RlZmF1bHRQcm9wcyA9IHt9LCBfdGhpcy5zdWJzY3JpcHRpb25zID0gW10sIF90aGlzLnN0YXRlID0ge30sIF90aGlzLm1vdW50ZWQgPSBmYWxzZSwgX3RlbXApLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihfdGhpcywgX3JldCk7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKENvbXBvbmVudCwgW3tcbiAgICAgICAga2V5OiBcImJlZm9yZVJlbmRlclwiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYmVmb3JlUmVuZGVyKCkge31cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJyZW5kZXJcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImFmdGVyUmVuZGVyXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBhZnRlclJlbmRlcigpIHt9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwic3Vic2NyaWJlVG9TdG9yZVwiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc3Vic2NyaWJlVG9TdG9yZSgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgICAgICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcChrZXkpIHtcbiAgICAgICAgICAgICAgICBfdGhpczIuc3Vic2NyaXB0aW9ucy5wdXNoKCgwLCBfc3RvcmUuc3Vic2NyaWJlKShrZXksIGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpczIuc3RhdGVba2V5XSA9IHN0YXRlO1xuICAgICAgICAgICAgICAgICAgICBfcmVuZGVyLnJlbmRlci5jYWxsKF90aGlzMik7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIF90aGlzMi5zdGF0ZVtrZXldID0gKDAsIF9zdG9yZS5nZXRTdGF0ZSkoa2V5KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiA9IHRydWU7XG4gICAgICAgICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IyID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgX2l0ZXJhdG9yRXJyb3IyID0gdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjIgPSB0aGlzLmtleXNbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDI7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSAoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiA9IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IF9zdGVwMi52YWx1ZTtcblxuICAgICAgICAgICAgICAgICAgICBfbG9vcChrZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yMiA9IHRydWU7XG4gICAgICAgICAgICAgICAgX2l0ZXJhdG9yRXJyb3IyID0gZXJyO1xuICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yICYmIF9pdGVyYXRvcjIucmV0dXJuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3IyLnJldHVybigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3IyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwiY29ubmVjdGVkQ2FsbGJhY2tcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICAgICAgdGhpcy5zdWJzY3JpYmVUb1N0b3JlKCk7XG4gICAgICAgICAgICBfcmVuZGVyLnJlbmRlci5jYWxsKHRoaXMpO1xuXG4gICAgICAgICAgICB0aGlzLmNvbm5lY3RlZCgpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwiY29ubmVjdGVkXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb25uZWN0ZWQoKSB7fVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImRpc2Nvbm5lY3RlZENhbGxiYWNrXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyA9IHRydWU7XG4gICAgICAgICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IzID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgX2l0ZXJhdG9yRXJyb3IzID0gdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjMgPSB0aGlzLnN1YnNjcmlwdGlvbnNbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDM7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjMgPSAoX3N0ZXAzID0gX2l0ZXJhdG9yMy5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyA9IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IF9zdGVwMy52YWx1ZTtcblxuICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvcjMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIF9pdGVyYXRvckVycm9yMyA9IGVycjtcbiAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyAmJiBfaXRlcmF0b3IzLnJldHVybikge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yMy5yZXR1cm4oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcjMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yMztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgKDAsIF91dGlscy5jbGVhclByb3BzU3RvcmFnZSkoKTtcbiAgICAgICAgICAgICgwLCBfdXRpbHMuY2xlYXJFdmVudHNTdG9yYWdlKSgpO1xuXG4gICAgICAgICAgICB0aGlzLmRpc2Nvbm5lY3RlZCgpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwiZGlzY29ubmVjdGVkXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNjb25uZWN0ZWQoKSB7fVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImFkb3B0ZWRDYWxsYmFja1wiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYWRvcHRlZENhbGxiYWNrKCkge1xuICAgICAgICAgICAgdGhpcy5zdWJzY3JpYmVUb1N0b3JlKCk7XG4gICAgICAgICAgICBfcmVuZGVyLnJlbmRlci5jYWxsKHRoaXMpO1xuXG4gICAgICAgICAgICB0aGlzLmFkb3B0ZWQoKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImFkb3B0ZWRcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFkb3B0ZWQoKSB7fVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKGF0dHJpYnV0ZU5hbWUsIG9sZFZhbHVlLCBuZXdWYWx1ZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMubW91bnRlZCAmJiBvbGRWYWx1ZSAhPSBuZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcHNDaGFuZ2VkKF9leHRlbmRzKHt9LCB0aGlzLnByb3BzLCBfZGVmaW5lUHJvcGVydHkoe30sIGF0dHJpYnV0ZU5hbWUsIG5ld1ZhbHVlKSkpO1xuICAgICAgICAgICAgICAgIF9yZW5kZXIucmVuZGVyLmNhbGwodGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJwcm9wc0NoYW5nZWRcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHByb3BzQ2hhbmdlZChuZXdQcm9wcykge31cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJuYW1lXCIsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5nZXRQcm90b3R5cGVPZih0aGlzKS5jb25zdHJ1Y3Rvci5uYW1lO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwiaXNTaGFkb3dcIixcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcInByb3BzXCIsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIF9leHRlbmRzKHt9LCB0aGlzLl9fZGVmYXVsdFByb3BzLCBwYXJzZUF0dHJpYnV0ZXModGhpcy5hdHRyaWJ1dGVzKSwgcHJvcHNTdG9yYWdlLmdldCh0aGlzKSB8fCB7fSk7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gc2V0KHByb3BzKSB7XG4gICAgICAgICAgICB0aGlzLl9fZGVmYXVsdFByb3BzID0gcHJvcHM7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJrZXlzXCIsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwic3R5bGVzXCIsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgIH1cbiAgICB9XSwgW3tcbiAgICAgICAga2V5OiBcIm9ic2VydmVkQXR0cmlidXRlc1wiLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9ic2VydmFibGVQcm9wcy5tYXAoZnVuY3Rpb24gKHByb3ApIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVzID0gXCJcIjtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3AubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BbaV0gPT09IHByb3BbaV0udG9VcHBlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzICs9IFwiLVwiICsgcHJvcFtpXS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzICs9IHByb3BbaV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwib2JzZXJ2YWJsZVByb3BzXCIsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIENvbXBvbmVudDtcbn0oSFRNTEVsZW1lbnQpKTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gQ29tcG9uZW50O1xuXG4vKioqLyB9KSxcbi8qIDkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5yZW5kZXIgPSByZW5kZXI7XG5cbnZhciBfd2ViQ29tcG9uZW50cyA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cbnZhciBfc3RvcmFnZSA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciBfc2hhbGxvd0VxdWFsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cbnZhciBfc2hhbGxvd0VxdWFsMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NoYWxsb3dFcXVhbCk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBwcm9wc1N0b3JhZ2UgPSAoMCwgX3N0b3JhZ2UuZ2V0U3RvcmFnZSkoX3N0b3JhZ2Uuc3RvcmFnZUtleXMuUFJPUFMpO1xuXG5mdW5jdGlvbiBub2RlRXF1YWxzKGVsZW1lbnROb2RlLCBmcmFnbWVudE5vZGUpIHtcbiAgICB2YXIgZWxDbG9uZSA9IGVsZW1lbnROb2RlLmNsb25lTm9kZShmYWxzZSk7XG4gICAgdmFyIGZyQ2xvbmUgPSBmcmFnbWVudE5vZGUuY2xvbmVOb2RlKGZhbHNlKTtcbiAgICBpZiAocHJvcHNTdG9yYWdlLmdldChmcmFnbWVudE5vZGUpKSB7XG4gICAgICAgIHJldHVybiAoMCwgX3NoYWxsb3dFcXVhbDIuZGVmYXVsdCkocHJvcHNTdG9yYWdlLmdldChlbGVtZW50Tm9kZSksIHByb3BzU3RvcmFnZS5nZXQoZnJhZ21lbnROb2RlKSkgJiYgZWxDbG9uZS5pc0VxdWFsTm9kZShmckNsb25lKTtcbiAgICB9XG4gICAgcmV0dXJuIGVsQ2xvbmUuaXNFcXVhbE5vZGUoZnJDbG9uZSk7XG59XG5cbmZ1bmN0aW9uIGNvbnRlbnREaWZmZXIoZWxlbWVudE5vZGUsIGZyYWdtZW50Tm9kZSkge1xuICAgIHJldHVybiBlbGVtZW50Tm9kZS5pc0VxdWFsTm9kZShmcmFnbWVudE5vZGUpID09PSBmYWxzZTtcbn1cblxuZnVuY3Rpb24gZWxlbWVudHNEZWxldGVkKGVsZW1lbnROb2RlcywgZnJhZ21lbnROb2Rlcykge1xuICAgIGlmIChlbGVtZW50Tm9kZXMubGVuZ3RoID4gZnJhZ21lbnROb2Rlcy5sZW5ndGgpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtZW50Tm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChlbGVtZW50Tm9kZXNbaV0gJiYgIWZyYWdtZW50Tm9kZXNbaV0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW2VsZW1lbnROb2Rlc1tpXV0uY29uY2F0KGVsZW1lbnRzRGVsZXRlZChBcnJheS5mcm9tKGVsZW1lbnROb2Rlcykuc2xpY2UoaSArIDEpLCBBcnJheS5mcm9tKGZyYWdtZW50Tm9kZXMpLnNsaWNlKGkpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIW5vZGVFcXVhbHMoZWxlbWVudE5vZGVzW2ldLCBmcmFnbWVudE5vZGVzW2ldKSkge1xuICAgICAgICAgICAgICAgIHZhciBkZWxldGVkID0gZWxlbWVudHNEZWxldGVkKEFycmF5LmZyb20oZWxlbWVudE5vZGVzKS5zbGljZShpICsgMSksIEFycmF5LmZyb20oZnJhZ21lbnROb2Rlcykuc2xpY2UoaSkpO1xuICAgICAgICAgICAgICAgIGlmIChkZWxldGVkLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW2VsZW1lbnROb2Rlc1tpXV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBbXTtcbn1cblxuZnVuY3Rpb24gY2hpbGRyZW5DaGFuZ2VkQ291bnQoZWxlbWVudE5vZGVzLCBmcmFnbWVudE5vZGVzKSB7XG4gICAgaWYgKGVsZW1lbnROb2Rlcy5sZW5ndGggPiBmcmFnbWVudE5vZGVzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gZnJhZ21lbnROb2Rlcy5sZW5ndGg7XG4gICAgfVxuICAgIHZhciBjaGFuZ2VkID0gMDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnROb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgZWxDbG9uZSA9IGVsZW1lbnROb2Rlc1tpXS5jbG9uZU5vZGUoZmFsc2UpO1xuICAgICAgICB2YXIgZnJDbG9uZSA9IGZyYWdtZW50Tm9kZXNbaV0uY2xvbmVOb2RlKGZhbHNlKTtcbiAgICAgICAgaWYgKCFub2RlRXF1YWxzKGVsZW1lbnROb2Rlc1tpXSwgZnJhZ21lbnROb2Rlc1tpXSkpIHtcbiAgICAgICAgICAgIGlmICghaXNFbXB0eU5vZGUoZWxDbG9uZSkgJiYgIWlzRW1wdHlOb2RlKGZyQ2xvbmUpKSB7XG4gICAgICAgICAgICAgICAgY2hhbmdlZCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjaGFuZ2VkO1xufVxuXG5mdW5jdGlvbiBhcHBlbmRDaGlsZHJlbihlbGVtZW50Tm9kZSwgZWxlbWVudENoaWxkcmVuLCBmcmFnbWVudENoaWxkcmVuKSB7XG4gICAgdmFyIGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgIGZvciAodmFyIGkgPSBlbGVtZW50Q2hpbGRyZW4ubGVuZ3RoOyBpIDwgZnJhZ21lbnRDaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChmcmFnbWVudENoaWxkcmVuW2ldKTtcbiAgICB9XG4gICAgZWxlbWVudE5vZGUuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVBdHRyaWJ1dGVzKGVsZW1lbnROb2RlLCBmcmFnbWVudE5vZGUpIHtcbiAgICB2YXIgYXR0cmlidXRlcyA9IGZyYWdtZW50Tm9kZS5hdHRyaWJ1dGVzIHx8IFtdO1xuICAgIHZhciBlbGVtZW50QXR0cmlidXRlcyA9IGVsZW1lbnROb2RlLmF0dHJpYnV0ZXMgfHwgW107XG4gICAgaWYgKGVsZW1lbnRBdHRyaWJ1dGVzLmxlbmd0aCA+IGF0dHJpYnV0ZXMubGVuZ3RoKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudEF0dHJpYnV0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBhdHRyaWJ1dGUgPSBlbGVtZW50QXR0cmlidXRlc1tpXTtcbiAgICAgICAgICAgIGlmICghZnJhZ21lbnROb2RlLmhhc0F0dHJpYnV0ZShhdHRyaWJ1dGUubm9kZU5hbWUpKSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudE5vZGUucmVtb3ZlQXR0cmlidXRlKGF0dHJpYnV0ZS5ub2RlTmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGF0dHJpYnV0ZXMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIHZhciBfYXR0cmlidXRlID0gYXR0cmlidXRlc1tfaV07XG4gICAgICAgIGVsZW1lbnROb2RlLnNldEF0dHJpYnV0ZShfYXR0cmlidXRlLm5vZGVOYW1lLCBfYXR0cmlidXRlLm5vZGVWYWx1ZSk7XG4gICAgfVxuICAgIGlmIChwcm9wc1N0b3JhZ2UuZ2V0KGZyYWdtZW50Tm9kZSkpIHtcbiAgICAgICAgdmFyIGVsUHJvcHMgPSBwcm9wc1N0b3JhZ2UuZ2V0KGVsZW1lbnROb2RlKTtcbiAgICAgICAgdmFyIGZyUHJvcHMgPSBwcm9wc1N0b3JhZ2UuZ2V0KGZyYWdtZW50Tm9kZSk7XG4gICAgICAgIHByb3BzU3RvcmFnZS5zZXQoZWxlbWVudE5vZGUsIGZyUHJvcHMpO1xuICAgICAgICBpZiAoISgwLCBfc2hhbGxvd0VxdWFsMi5kZWZhdWx0KShlbFByb3BzLCBmclByb3BzKSkge1xuICAgICAgICAgICAgaWYgKCgwLCBfd2ViQ29tcG9uZW50cy5pc0N1c3RvbUNvbXBvbmVudCkoZWxlbWVudE5vZGUpKSB7XG4gICAgICAgICAgICAgICAgcmVuZGVyLmNhbGwoZWxlbWVudE5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiB1cGRhdGVFbGVtZW50KGVsZW1lbnROb2RlLCBmcmFnbWVudE5vZGUpIHtcbiAgICBpZiAoKDAsIF93ZWJDb21wb25lbnRzLmlzQ3VzdG9tQ29tcG9uZW50KShlbGVtZW50Tm9kZSkpIHtcbiAgICAgICAgcmV0dXJuIHVwZGF0ZUF0dHJpYnV0ZXMoZWxlbWVudE5vZGUsIGZyYWdtZW50Tm9kZSk7XG4gICAgfVxuICAgIGlmICghbm9kZUVxdWFscyhlbGVtZW50Tm9kZSwgZnJhZ21lbnROb2RlKSkge1xuICAgICAgICB1cGRhdGVBdHRyaWJ1dGVzKGVsZW1lbnROb2RlLCBmcmFnbWVudE5vZGUpO1xuICAgIH1cbiAgICB1cGRhdGVDaGlsZHJlbihlbGVtZW50Tm9kZSwgZnJhZ21lbnROb2RlKTtcbn1cblxuZnVuY3Rpb24gaXNFbXB0eU5vZGUobm9kZSkge1xuICAgIGlmIChub2RlLm5vZGVUeXBlICE9PSBOb2RlLlRFWFRfTk9ERSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChub2RlLmNoaWxkTm9kZXMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKG5vZGUuaW5uZXJUZXh0KSB7XG4gICAgICAgIHJldHVybiBCb29sZWFuKG5vZGUuaW5uZXJUZXh0LnRyaW0oKSkgPT09IGZhbHNlO1xuICAgIH1cbiAgICBpZiAobm9kZS5pbm5lckhUTUwpIHtcbiAgICAgICAgcmV0dXJuIEJvb2xlYW4obm9kZS5pbm5lckhUTUwudHJpbSgpKSA9PT0gZmFsc2U7XG4gICAgfVxuICAgIGlmIChub2RlLnRleHRDb250ZW50KSB7XG4gICAgICAgIHJldHVybiBCb29sZWFuKG5vZGUudGV4dENvbnRlbnQudHJpbSgpKSA9PT0gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBub2RlRmlsdGVyKG5vZGUpIHtcbiAgICBpZiAobm9kZSkge1xuICAgICAgICByZXR1cm4gKG5vZGUubm9kZVR5cGUgPT09IE5vZGUuRUxFTUVOVF9OT0RFIHx8IG5vZGUubm9kZVR5cGUgPT09IE5vZGUuVEVYVF9OT0RFKSAmJiBub2RlLm5vZGVOYW1lICE9PSBcIlNUWUxFXCIgJiYgIWlzRW1wdHlOb2RlKG5vZGUpO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUNoaWxkcmVuQ291bnRDaGFuZ2VkKGVsZW1lbnROb2RlLCBmcmFnbWVudE5vZGUsIGVsZW1lbnROb2RlcywgZnJhZ21lbnROb2Rlcykge1xuICAgIHZhciBkZWxldGVkID0gZWxlbWVudHNEZWxldGVkKGVsZW1lbnROb2RlcywgZnJhZ21lbnROb2Rlcyk7XG4gICAgaWYgKGZyYWdtZW50Tm9kZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBlbGVtZW50Tm9kZS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChmcmFnbWVudE5vZGUsIGVsZW1lbnROb2RlKTtcbiAgICB9XG4gICAgaWYgKGRlbGV0ZWQubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGRlbGV0ZWRbMF0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkZWxldGVkWzBdKTtcbiAgICAgICAgcmV0dXJuIHVwZGF0ZUNoaWxkcmVuKGVsZW1lbnROb2RlLCBmcmFnbWVudE5vZGUpO1xuICAgIH1cbiAgICBpZiAoY2hpbGRyZW5DaGFuZ2VkQ291bnQoZWxlbWVudE5vZGVzLCBmcmFnbWVudE5vZGVzKSA+IDApIHtcbiAgICAgICAgcmV0dXJuIGVsZW1lbnROb2RlLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGZyYWdtZW50Tm9kZSwgZWxlbWVudE5vZGUpO1xuICAgIH1cbiAgICByZXR1cm4gYXBwZW5kQ2hpbGRyZW4oZWxlbWVudE5vZGUsIGVsZW1lbnROb2RlcywgZnJhZ21lbnROb2Rlcyk7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUNoaWxkcmVuKGVsZW1lbnROb2RlLCBmcmFnbWVudE5vZGUpIHtcbiAgICB2YXIgZWxlbWVudE5vZGVzID0gQXJyYXkuZnJvbShlbGVtZW50Tm9kZS5jaGlsZE5vZGVzKS5maWx0ZXIobm9kZUZpbHRlcik7XG4gICAgdmFyIGZyYWdtZW50Tm9kZXMgPSBBcnJheS5mcm9tKGZyYWdtZW50Tm9kZS5jaGlsZE5vZGVzKS5maWx0ZXIobm9kZUZpbHRlcik7XG4gICAgaWYgKGVsZW1lbnROb2Rlcy5sZW5ndGggIT09IGZyYWdtZW50Tm9kZXMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBoYW5kbGVDaGlsZHJlbkNvdW50Q2hhbmdlZChlbGVtZW50Tm9kZSwgZnJhZ21lbnROb2RlLCBlbGVtZW50Tm9kZXMsIGZyYWdtZW50Tm9kZXMpO1xuICAgIH1cbiAgICBpZiAoZWxlbWVudE5vZGVzLmxlbmd0aCA9PT0gMCAmJiBmcmFnbWVudE5vZGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBpZiAoY29udGVudERpZmZlcihlbGVtZW50Tm9kZSwgZnJhZ21lbnROb2RlKSkge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnROb2RlLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGZyYWdtZW50Tm9kZSwgZWxlbWVudE5vZGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudE5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHVwZGF0ZUVsZW1lbnQoZWxlbWVudE5vZGVzW2ldLCBmcmFnbWVudE5vZGVzW2ldKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUZyYWdtZW50RnJvbVN0cih0cGwpIHtcbiAgICB2YXIgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGVtcGxhdGVcIik7XG4gICAgdGVtcGxhdGUuaW5uZXJIVE1MID0gdHBsO1xuICAgIHJldHVybiB0ZW1wbGF0ZTtcbn1cblxuZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgIHBlcmZvcm1hbmNlLm1hcmsoJ211c2tvdCBzdGFydCByZW5kZXJpbmcnKTtcbiAgICB0aGlzLmJlZm9yZVJlbmRlcigpO1xuXG4gICAgaWYgKHRoaXMuaXNTaGFkb3cgJiYgIXRoaXMuc2hhZG93Um9vdCkge1xuICAgICAgICBwZXJmb3JtYW5jZS5tYXJrKCdtdXNrb3QgYXR0YWNoaW5nIHJvb3QnKTtcbiAgICAgICAgdGhpcy5hdHRhY2hTaGFkb3coeyBtb2RlOiAnb3BlbicgfSk7XG4gICAgICAgIHBlcmZvcm1hbmNlLm1hcmsoJ211c2tvdCByb290IGF0dGFjaGVkJyk7XG4gICAgICAgIHBlcmZvcm1hbmNlLm1lYXN1cmUoXCJtdXNrb3QgYXR0YWNoIHJvb3RcIiwgJ211c2tvdCBhdHRhY2hpbmcgcm9vdCcsICdtdXNrb3Qgcm9vdCBhdHRhY2hlZCcpO1xuICAgIH1cbiAgICBwZXJmb3JtYW5jZS5tYXJrKCdtdXNrb3QgY3JlYXRlIHJlbmRlciBET00nKTtcbiAgICB2YXIgcmVuZGVyUmVzID0gdGhpcy5yZW5kZXIoKTtcbiAgICBwZXJmb3JtYW5jZS5tYXJrKCdtdXNrb3QgcmVuZGVyIERPTSBjcmVhdGVkJyk7XG4gICAgcGVyZm9ybWFuY2UubWVhc3VyZShcIm11c2tvdCBjb21wb25lbnQgcmVuZGVyIHJlc3VsdFwiLCAnbXVza290IGNyZWF0ZSByZW5kZXIgRE9NJywgJ211c2tvdCByZW5kZXIgRE9NIGNyZWF0ZWQnKTtcblxuICAgIHZhciByb290ID0gdGhpcy5pc1NoYWRvdyA/IHRoaXMuc2hhZG93Um9vdCA6IHRoaXM7XG4gICAgcGVyZm9ybWFuY2UubWFyaygnbXVza290IGNyZWF0ZSBmcmFnbWVudCcpO1xuICAgIHZhciBmcmFnbWVudCA9IHR5cGVvZiByZW5kZXJSZXMgPT09IFwic3RyaW5nXCIgPyBjcmVhdGVGcmFnbWVudEZyb21TdHIocmVuZGVyUmVzKSA6IHJlbmRlclJlcztcbiAgICBwZXJmb3JtYW5jZS5tYXJrKCdtdXNrb3QgZnJhZ21lbnQgY3JlYXRlZCcpO1xuICAgIHBlcmZvcm1hbmNlLm1lYXN1cmUoXCJtdXNrb3QgZnJhZ21lbnQgY3JlYXRpb25cIiwgJ211c2tvdCBjcmVhdGUgZnJhZ21lbnQnLCAnbXVza290IGZyYWdtZW50IGNyZWF0ZWQnKTtcblxuICAgIGlmICghdGhpcy5tb3VudGVkKSB7XG4gICAgICAgIHBlcmZvcm1hbmNlLm1hcmsoJ211c2tvdCBpbnNlcnQgc3R5bGUgaW50byBjb21wb25lbnQnKTtcbiAgICAgICAgcm9vdC5pbm5lckhUTUwgPSBcIjxzdHlsZT5cIiArIHRoaXMuc3R5bGVzICsgXCI8L3N0eWxlPlwiO1xuICAgICAgICBwZXJmb3JtYW5jZS5tYXJrKCdtdXNrb3Qgc3R5bGUgaW5zZXJ0ZWQnKTtcbiAgICAgICAgcGVyZm9ybWFuY2UubWVhc3VyZShcIm11c2tvdCBzdHlsZSBjcmVhdGlvbiAmIGluc2VydCBieSBpbm5lckhUTUxcIiwgJ211c2tvdCBpbnNlcnQgc3R5bGUgaW50byBjb21wb25lbnQnLCAnbXVza290IHN0eWxlIGluc2VydGVkJyk7XG5cbiAgICAgICAgcGVyZm9ybWFuY2UubWFyaygnbXVza290IGFwcGVuZCBjaGlsZCB3aXRoIGNvbnRlbnQnKTtcbiAgICAgICAgcm9vdC5hcHBlbmRDaGlsZChmcmFnbWVudC5jb250ZW50KTtcbiAgICAgICAgcGVyZm9ybWFuY2UubWFyaygnbXVza290IGNvbnRlbnQgYXBwZW5kZWQnKTtcbiAgICAgICAgcGVyZm9ybWFuY2UubWVhc3VyZShcIm11c2tvdCBhcHBlbmQgY29udGVudCBvbiBpbml0aWFsIHJlbmRlclwiLCAnbXVza290IGFwcGVuZCBjaGlsZCB3aXRoIGNvbnRlbnQnLCAnbXVza290IGNvbnRlbnQgYXBwZW5kZWQnKTtcblxuICAgICAgICB0aGlzLm1vdW50ZWQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHBlcmZvcm1hbmNlLm1hcmsoJ211c2tvdCBpbnNlcnQgc3R5bGVzIGJlZm9yZSBjb250ZW50IG9uIHVwZGF0ZScpO1xuICAgICAgICB2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG4gICAgICAgIHN0eWxlLmlubmVySFRNTCA9IHRoaXMuc3R5bGVzO1xuICAgICAgICBmcmFnbWVudC5jb250ZW50Lmluc2VydEJlZm9yZShzdHlsZSwgZnJhZ21lbnQuY29udGVudC5maXJzdENoaWxkKTtcbiAgICAgICAgcGVyZm9ybWFuY2UubWFyaygnbXVza290IHN0eWxlcyBpbnNlcnRlZCBvbiB1cGRhdGUnKTtcbiAgICAgICAgcGVyZm9ybWFuY2UubWVhc3VyZShcIm11c2tvdCBhZGQgc3R5bGVzIGJ5IGluc2VydEJlZm9yZVwiLCAnbXVza290IGluc2VydCBzdHlsZXMgYmVmb3JlIGNvbnRlbnQgb24gdXBkYXRlJywgJ211c2tvdCBzdHlsZXMgaW5zZXJ0ZWQgb24gdXBkYXRlJyk7XG5cbiAgICAgICAgcGVyZm9ybWFuY2UubWFyaygnbXVza290IHVwZGF0ZSBjaGlsZHJlbicpO1xuICAgICAgICB1cGRhdGVDaGlsZHJlbihyb290LCBmcmFnbWVudC5jb250ZW50KTtcbiAgICAgICAgcGVyZm9ybWFuY2UubWFyaygnbXVza290IGNoaWxkcmVuIHVwZGF0ZWQnKTtcbiAgICAgICAgcGVyZm9ybWFuY2UubWVhc3VyZShcIm11c2tvdCB1cGRhdGUgY29tcG9uZW50J3MgY2hpbGRyZW5cIiwgJ211c2tvdCB1cGRhdGUgY2hpbGRyZW4nLCAnbXVza290IGNoaWxkcmVuIHVwZGF0ZWQnKTtcbiAgICB9XG4gICAgcGVyZm9ybWFuY2UubWFyaygnbXVza290IGZpbmlzaCByZW5kZXJpbmcnKTtcbiAgICBwZXJmb3JtYW5jZS5tZWFzdXJlKFwibXVza290IGZ1bGwgcmVuZGVyXCIsICdtdXNrb3Qgc3RhcnQgcmVuZGVyaW5nJywgJ211c2tvdCBmaW5pc2ggcmVuZGVyaW5nJyk7XG5cbiAgICB0aGlzLmFmdGVyUmVuZGVyKCk7XG59XG5cbi8qKiovIH0pLFxuLyogMTAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cbi8qKlxuICogaW5saW5lZCBPYmplY3QuaXMgcG9seWZpbGwgdG8gYXZvaWQgcmVxdWlyaW5nIGNvbnN1bWVycyBzaGlwIHRoZWlyIG93blxuICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2lzXG4gKi9cbmZ1bmN0aW9uIGlzKHgsIHkpIHtcbiAgICAvLyBTYW1lVmFsdWUgYWxnb3JpdGhtXG4gICAgaWYgKHggPT09IHkpIHtcbiAgICAgICAgLy8gU3RlcHMgMS01LCA3LTEwXG4gICAgICAgIC8vIFN0ZXBzIDYuYi02LmU6ICswICE9IC0wXG4gICAgICAgIC8vIEFkZGVkIHRoZSBub256ZXJvIHkgY2hlY2sgdG8gbWFrZSBGbG93IGhhcHB5LCBidXQgaXQgaXMgcmVkdW5kYW50XG4gICAgICAgIHJldHVybiB4ICE9PSAwIHx8IHkgIT09IDAgfHwgMSAvIHggPT09IDEgLyB5O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFN0ZXAgNi5hOiBOYU4gPT0gTmFOXG4gICAgICAgIHJldHVybiB4ICE9PSB4ICYmIHkgIT09IHk7XG4gICAgfVxufVxuXG4vKipcbiAqIFBlcmZvcm1zIGVxdWFsaXR5IGJ5IGl0ZXJhdGluZyB0aHJvdWdoIGtleXMgb24gYW4gb2JqZWN0IGFuZCByZXR1cm5pbmcgZmFsc2VcbiAqIHdoZW4gYW55IGtleSBoYXMgdmFsdWVzIHdoaWNoIGFyZSBub3Qgc3RyaWN0bHkgZXF1YWwgYmV0d2VlbiB0aGUgYXJndW1lbnRzLlxuICogUmV0dXJucyB0cnVlIHdoZW4gdGhlIHZhbHVlcyBvZiBhbGwga2V5cyBhcmUgc3RyaWN0bHkgZXF1YWwuXG4gKi9cbmZ1bmN0aW9uIHNoYWxsb3dFcXVhbChvYmpBLCBvYmpCKSB7XG4gICAgaWYgKGlzKG9iakEsIG9iakIpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmICgodHlwZW9mIG9iakEgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKG9iakEpKSAhPT0gJ29iamVjdCcgfHwgb2JqQSA9PT0gbnVsbCB8fCAodHlwZW9mIG9iakIgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKG9iakIpKSAhPT0gJ29iamVjdCcgfHwgb2JqQiA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdmFyIGtleXNBID0gT2JqZWN0LmtleXMob2JqQSk7XG4gICAgdmFyIGtleXNCID0gT2JqZWN0LmtleXMob2JqQik7XG5cbiAgICBpZiAoa2V5c0EubGVuZ3RoICE9PSBrZXlzQi5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIFRlc3QgZm9yIEEncyBrZXlzIGRpZmZlcmVudCBmcm9tIEIuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzQS5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoIWhhc093blByb3BlcnR5LmNhbGwob2JqQiwga2V5c0FbaV0pIHx8ICFpcyhvYmpBW2tleXNBW2ldXSwgb2JqQltrZXlzQVtpXV0pKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxuZXhwb3J0cy5kZWZhdWx0ID0gc2hhbGxvd0VxdWFsO1xuXG4vKioqLyB9KVxuLyoqKioqKi8gXSk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIG1haW4uanMiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA1KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCBhOGRhNDVkM2UwOTcwOTkzZGRjMyIsIi8vIEBmbG93XG5cbmltcG9ydCB0eXBlIHtTdG9yYWdlRHJpdmVyfSBmcm9tIFwiLi9pbnRlcmZhY2VzXCI7XG5cbmNvbnN0IHByb3BzTWFwOiBNYXA8YW55LCBhbnk+ID0gbmV3IE1hcDtcblxuY29uc3QgZXZlbnRzTWFwOiBNYXA8YW55LCBhbnk+ID0gbmV3IE1hcDtcblxuZXhwb3J0IGNvbnN0IHN0b3JhZ2VLZXlzID0ge1xuICAgIFBST1BTOiBcInByb3BzXCIsXG4gICAgRVZFTlRTOiBcImV2ZW50c1wiXG59O1xuXG5jb25zdCBkcml2ZXI6IFN0b3JhZ2VEcml2ZXIgPSB7XG4gICAgaXRlbXM6IE9iamVjdC5jcmVhdGUoe1xuICAgICAgICBbc3RvcmFnZUtleXMuUFJPUFNdOiBwcm9wc01hcCxcbiAgICAgICAgW3N0b3JhZ2VLZXlzLkVWRU5UU106IGV2ZW50c01hcCxcbiAgICB9KSxcbiAgICBzZXRJdGVtKGtleTogc3RyaW5nLCB2YWx1ZTogYW55KSB7XG4gICAgICAgIHRoaXMuaXRlbXNba2V5XSA9IHZhbHVlXG4gICAgfSxcbiAgICBnZXRJdGVtKGtleTogc3RyaW5nKSB7XG4gICAgICAgIHJldHVybiB0aGlzLml0ZW1zW2tleV1cbiAgICB9LFxuICAgIHJlbW92ZUl0ZW0oa2V5OiBzdHJpbmcpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuaXRlbXNba2V5XVxuICAgIH0sXG4gICAgbWlncmF0ZShkcml2ZXI6IFN0b3JhZ2VEcml2ZXIpIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5pdGVtcykge1xuICAgICAgICAgICAgZHJpdmVyLnNldEl0ZW0oXG4gICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgIHRoaXMuaXRlbXNba2V5XVxuICAgICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkcml2ZXJcbiAgICB9XG59O1xuXG5leHBvcnQgY29uc3Qgc3RvcmFnZSA9IHtcbiAgICBkcml2ZXJcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRTdG9yYWdlRHJpdmVyKGRyaXZlcjogU3RvcmFnZURyaXZlcik6IHZvaWQge1xuICAgIHN0b3JhZ2UuZHJpdmVyID0gc3RvcmFnZS5kcml2ZXIubWlncmF0ZShkcml2ZXIpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTdG9yYWdlKGtleTogc3RyaW5nKTogYW55IHtcbiAgICByZXR1cm4gc3RvcmFnZS5kcml2ZXIuZ2V0SXRlbShrZXkpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRTdG9yYWdlKGtleTogc3RyaW5nLCB2YWx1ZTogYW55KTogdm9pZCB7XG4gICAgc3RvcmFnZS5kcml2ZXIuc2V0SXRlbShrZXksIHZhbHVlKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlU3RvcmFnZShrZXk6IHN0cmluZyk6IHZvaWQge1xuICAgIHN0b3JhZ2UuZHJpdmVyLnJlbW92ZUl0ZW0oa2V5KVxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9zdG9yYWdlLmpzIiwiLy8gQGZsb3dcblxuaW1wb3J0IHR5cGUge1dlYkNvbXBvbmVudHMgYXMgSW1wbGVtZW50YXRpb259IGZyb20gXCIuL2ludGVyZmFjZXNcIlxuXG5jb25zdCBkZWZhdWx0SW1wbGVtZW50YXRpb246IEltcGxlbWVudGF0aW9uID0ge1xuICAgIHJlZ2lzdGVyQ29tcG9uZW50KG5hbWU6IHN0cmluZywgY29tcG9uZW50OiBDbGFzczxFbGVtZW50Pikge1xuICAgICAgICBpZiAoJ2N1c3RvbUVsZW1lbnRzJyBpbiB3aW5kb3cpIHtcbiAgICAgICAgICAgIGN1c3RvbUVsZW1lbnRzLmRlZmluZShuYW1lLCBjb21wb25lbnQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY3VycmVudFJlYWR5Q2hlY2soKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICByZWdpc3RlckNvbXBvbmVudChuYW1lLCBjb21wb25lbnQpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfSxcbiAgICBpc0N1c3RvbUNvbXBvbmVudChub2RlOiBOb2RlKSB7XG4gICAgICAgIHJldHVybiBub2RlLm5vZGVOYW1lLmluY2x1ZGVzKFwiLVwiKVxuICAgIH1cbn07XG5cbmxldCBjdXJyZW50SW1wbGVtZW50YXRpb24gPSBkZWZhdWx0SW1wbGVtZW50YXRpb247XG5cbmNvbnN0IHJlZ2lzdGVyQ29tcG9uZW50ID0gKG5hbWU6IHN0cmluZywgY29tcG9uZW50OiBDbGFzczxFbGVtZW50PikgPT4ge1xuICAgIHJldHVybiBjdXJyZW50SW1wbGVtZW50YXRpb24ucmVnaXN0ZXJDb21wb25lbnQobmFtZSwgY29tcG9uZW50KTtcbn07XG5cbmV4cG9ydCBjb25zdCBzZXRJbXBsZW1lbnRhdGlvbiA9IChpbXBsZW1lbnRhdGlvbjogSW1wbGVtZW50YXRpb24pID0+IHtcbiAgICBjdXJyZW50SW1wbGVtZW50YXRpb24gPSBpbXBsZW1lbnRhdGlvbjtcbn07XG5cbmxldCBjdXJyZW50UmVhZHlDaGVjayA9ICgpID0+IFByb21pc2UucmVzb2x2ZSgpO1xuXG5leHBvcnQgY29uc3QgY29tcG9uZW50c1JlYWR5ID0gKCkgPT4ge1xuICAgIHJldHVybiBjdXJyZW50UmVhZHlDaGVjaygpXG59O1xuXG5leHBvcnQgY29uc3Qgc2V0UmVhZHlDaGVjayA9IChyZWFkeUNoZWNrOiBGdW5jdGlvbikgPT4ge1xuICAgIGN1cnJlbnRSZWFkeUNoZWNrID0gcmVhZHlDaGVjaztcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHJlZ2lzdGVyQ29tcG9uZW50O1xuXG5leHBvcnQgY29uc3QgaXNDdXN0b21Db21wb25lbnQgPSAobm9kZTogTm9kZSkgPT4ge1xuICAgIHJldHVybiBjdXJyZW50SW1wbGVtZW50YXRpb24uaXNDdXN0b21Db21wb25lbnQobm9kZSlcbn07XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3dlYi1jb21wb25lbnRzLmpzIiwiLy8gQGZsb3dcblxuaW1wb3J0IHR5cGUge1N0b3JlLCBSZWR1Y2VyfSBmcm9tIFwiLi9pbnRlcmZhY2VzXCJcblxuY29uc3Qgc3R1YkltcGxlbWVudGF0aW9uOiBTdG9yZSA9IHtcbiAgICByZWR1Y2Vyczoge30sXG4gICAgc3Vic2NyaXB0aW9uczoge30sXG4gICAgYWRkUmVkdWNlcihrZXk6IHN0cmluZywgcmVkdWNlcjogUmVkdWNlcikge1xuICAgICAgICB0aGlzLnJlZHVjZXJzW2tleV0gPSByZWR1Y2VyO1xuICAgIH0sXG4gICAgcmVtb3ZlUmVkdWNlcihrZXk6IHN0cmluZykge1xuICAgICAgICBkZWxldGUgdGhpcy5yZWR1Y2Vyc1trZXldO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcbiAgICBzdWJzY3JpYmUoa2V5OiBzdHJpbmcsIGNiOiBGdW5jdGlvbikge1xuICAgICAgICBpZiAoIXRoaXMuc3Vic2NyaXB0aW9uc1trZXldKSB7XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnNba2V5XSA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uc1trZXldLnB1c2goY2IpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdW5zdWJzY3JpYmU6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnNba2V5XSA9IHRoaXMuc3Vic2NyaXB0aW9uc1trZXldLmZpbHRlcihlbCA9PiBlbCAhPT0gY2IpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGdldFN0YXRlKGtleTogc3RyaW5nKSB7fSxcbiAgICBtaWdyYXRlKG5ld1N0b3JlOiBTdG9yZSkge1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLnJlZHVjZXJzKSB7XG4gICAgICAgICAgICBjb25zdCByZWR1Y2VyID0gdGhpcy5yZWR1Y2Vyc1trZXldO1xuICAgICAgICAgICAgbmV3U3RvcmUuYWRkUmVkdWNlcihrZXksIHJlZHVjZXIpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMuc3Vic2NyaXB0aW9ucykge1xuICAgICAgICAgICAgZm9yIChjb25zdCBzdWJzY3JpcHRpb24gb2YgdGhpcy5zdWJzY3JpcHRpb25zW2tleV0pIHtcbiAgICAgICAgICAgICAgICBuZXdTdG9yZS5zdWJzY3JpYmUoa2V5LCBzdWJzY3JpcHRpb24pXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ld1N0b3JlO1xuICAgIH1cbn07XG5cbmNvbnN0IHN0b3JlID0ge1xuICAgIGN1cnJlbnRJbXBsZW1lbnRhdGlvbjogc3R1YkltcGxlbWVudGF0aW9uXG59O1xuXG5leHBvcnQgY29uc3Qgc2V0SW1wbGVtZW50YXRpb24gPSAoaW1wbGVtZW50YXRpb246IFN0b3JlKSA9PiB7XG4gICAgc3RvcmUuY3VycmVudEltcGxlbWVudGF0aW9uID0gc3RvcmUuY3VycmVudEltcGxlbWVudGF0aW9uLm1pZ3JhdGUoaW1wbGVtZW50YXRpb24pXG59O1xuXG5leHBvcnQgY29uc3QgcmVnaXN0ZXJSZWR1Y2VyID0gKGtleTogc3RyaW5nLCByZWR1Y2VyOiBSZWR1Y2VyKSA9PiB7XG4gICAgc3RvcmUuY3VycmVudEltcGxlbWVudGF0aW9uLmFkZFJlZHVjZXIoa2V5LCByZWR1Y2VyKVxufTtcbmV4cG9ydCBjb25zdCByZW1vdmVSZWR1Y2VyID0gKGtleTogc3RyaW5nKSA9PiB7XG4gICAgc3RvcmUuY3VycmVudEltcGxlbWVudGF0aW9uLnJlbW92ZVJlZHVjZXIoa2V5KVxufTtcbmV4cG9ydCBjb25zdCBzdWJzY3JpYmUgPSAoa2V5OiBzdHJpbmcsIGNiOiBGdW5jdGlvbikgPT4ge1xuICAgIHJldHVybiBzdG9yZS5jdXJyZW50SW1wbGVtZW50YXRpb24uc3Vic2NyaWJlKGtleSwgY2IpXG59O1xuZXhwb3J0IGNvbnN0IGdldFN0YXRlID0gKGtleTogc3RyaW5nKSA9PiB7XG4gICAgcmV0dXJuIHN0b3JlLmN1cnJlbnRJbXBsZW1lbnRhdGlvbi5nZXRTdGF0ZShrZXkpXG59O1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9zdG9yZS5qcyIsIi8vIEBmbG93XG5cbmltcG9ydCB0eXBlIHtUZW1wbGF0ZUhhbmRsZXJ9IGZyb20gXCIuL2ludGVyZmFjZXNcIlxuaW1wb3J0IHtnZXRTdG9yYWdlLCBzdG9yYWdlS2V5c30gZnJvbSBcIi4vc3RvcmFnZVwiXG5pbXBvcnQge21hdGNoVGFnQXJnLCByZXBsYWNlVGFnQXJnLCB0YWdOYW1lVG9Qcm9wfSBmcm9tIFwiLi91dGlsc1wiO1xuaW1wb3J0IHtpc0N1c3RvbUNvbXBvbmVudH0gZnJvbSBcIi4vd2ViLWNvbXBvbmVudHNcIjtcblxuY29uc3QgcHJvcHNTdG9yYWdlID0gZ2V0U3RvcmFnZShzdG9yYWdlS2V5cy5QUk9QUyk7XG5jb25zdCBldmVudHNTdG9yYWdlID0gZ2V0U3RvcmFnZShzdG9yYWdlS2V5cy5FVkVOVFMpO1xuXG5jb25zdCBFdmVudHNUYWdIYW5kbGVyOiBUZW1wbGF0ZUhhbmRsZXIgPSB7XG4gICAgY2FsbDogKG5vZGU6IGFueSwgYXJnczogYW55W10pID0+IHtcbiAgICAgICAgY29uc3QgYXR0cmlidXRlcyA9IG5vZGUuYXR0cmlidXRlcyB8fCBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhdHRyaWJ1dGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBhdHRyaWJ1dGUgPSBhdHRyaWJ1dGVzW2ldO1xuICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZS5ub2RlTmFtZS5zdGFydHNXaXRoKFwib25cIikpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtYXRjaCA9IG1hdGNoVGFnQXJnKGF0dHJpYnV0ZS5ub2RlVmFsdWUpO1xuICAgICAgICAgICAgICAgIGlmIChtYXRjaCAmJiBtYXRjaFsxXSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IE51bWJlcihtYXRjaFsxXSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpc3RlbmVyID0gYXJnc1tpbmRleF07XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbGlzdGVuZXIgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlLm5vZGVOYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXZlbnROYW1lID0gYXR0cmlidXRlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkuc2xpY2UoMik7XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnROYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RlbmVyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSBldmVudHNTdG9yYWdlLmdldChub2RlKSB8fCB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50c1N0b3JhZ2Uuc2V0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5saXN0ZW5lcnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtldmVudE5hbWVdOiBsaXN0ZW5lclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn07XG5cbmNvbnN0IE1hcEhhbmRsZXI6IFRlbXBsYXRlSGFuZGxlciA9IHtcbiAgICBjYWxsOiAobm9kZTogTm9kZSwgYXJnczogYW55W10pID0+IHtcbiAgICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBIVE1MVGVtcGxhdGVFbGVtZW50KSB7XG4gICAgICAgICAgICBpZiAobm9kZS5oYXNBdHRyaWJ1dGUoXCJtYXBcIikpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtYXRjaCA9IG1hdGNoVGFnQXJnKFN0cmluZyhub2RlLmdldEF0dHJpYnV0ZShcIm1hcFwiKSkpO1xuICAgICAgICAgICAgICAgIGlmIChtYXRjaCAmJiBtYXRjaFsxXSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IE51bWJlcihtYXRjaFsxXSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFyciA9IGFyZ3NbaW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0cGwgPSBub2RlLmlubmVySFRNTDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGVtcGxhdGVcIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vZGVzID0gYXJyLm1hcChlbCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVwbGFjZVRhZ0FyZyh0cGwsIChtYXRjaCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhcmcgPSBhcmdzW2luZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGFyZyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRwbENhbGwgPSBhcmcoZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHBsQ2FsbCBpbnN0YW5jZW9mIEhUTUxUZW1wbGF0ZUVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cGxDYWxsLmlubmVySFRNTFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodHBsQ2FsbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHBsQ2FsbC5qb2luKCcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRwbENhbGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyZ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGZyYWdtZW50LmlubmVySFRNTCA9IG5vZGVzLmpvaW4oJycpO1xuICAgICAgICAgICAgICAgICAgICAvLyAkRmxvd0ZpeE1lXG4gICAgICAgICAgICAgICAgICAgIG5vZGUucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoXG4gICAgICAgICAgICAgICAgICAgICAgICBmcmFnbWVudC5jb250ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufTtcblxuZnVuY3Rpb24gc2hvdWxkU2V0UHJvcFRvU3RvcmFnZSh2YWx1ZTogYW55LCBub2RlOiBOb2RlKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiIHx8IHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiB8fCBpc0N1c3RvbUNvbXBvbmVudChub2RlKVxufVxuXG5mdW5jdGlvbiBwYXJzZUF0dHJpYnV0ZShhdHRyaWJ1dGU6IE5vZGUsIG5vZGU6IE5vZGUsIGFyZ3M6IGFueVtdKSB7XG4gICAgY29uc3QgbWF0Y2ggPSBtYXRjaFRhZ0FyZyhhdHRyaWJ1dGUubm9kZVZhbHVlKTtcbiAgICBpZiAobWF0Y2ggJiYgbWF0Y2hbMV0pIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSBOdW1iZXIobWF0Y2hbMV0pO1xuICAgICAgICBjb25zdCBub2RlTmFtZSA9IGF0dHJpYnV0ZS5ub2RlTmFtZTtcbiAgICAgICAgY29uc3QgcHJvcE5hbWUgPSB0YWdOYW1lVG9Qcm9wKG5vZGVOYW1lKTtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBhcmdzW2luZGV4XTtcbiAgICAgICAgcmV0dXJuIFtwcm9wTmFtZSwgdmFsdWVdXG4gICAgfVxuICAgIHJldHVybiBbYXR0cmlidXRlLm5vZGVOYW1lLCBhdHRyaWJ1dGUubm9kZVZhbHVlXVxufVxuXG5jb25zdCBQcm9wc0hhbmRsZXI6IFRlbXBsYXRlSGFuZGxlciA9IHtcbiAgICBjYWxsOiAobm9kZTogYW55LCBhcmdzOiBhbnlbXSkgPT4ge1xuICAgICAgICBjb25zdCBhdHRyaWJ1dGVzID0gbm9kZS5hdHRyaWJ1dGVzIHx8IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGF0dHJpYnV0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZSA9IGF0dHJpYnV0ZXNbaV07XG4gICAgICAgICAgICBjb25zdCBbcHJvcE5hbWUsIHZhbHVlXSA9IHBhcnNlQXR0cmlidXRlKFxuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZSxcbiAgICAgICAgICAgICAgICBub2RlLFxuICAgICAgICAgICAgICAgIGFyZ3NcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAoc2hvdWxkU2V0UHJvcFRvU3RvcmFnZSh2YWx1ZSwgbm9kZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9wcyA9IHByb3BzU3RvcmFnZS5nZXQobm9kZSkgfHwge307XG4gICAgICAgICAgICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUoXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZS5ub2RlTmFtZSxcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHByb3BzU3RvcmFnZS5zZXQoXG4gICAgICAgICAgICAgICAgICAgIG5vZGUsXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnByb3BzLFxuICAgICAgICAgICAgICAgICAgICAgICAgW3Byb3BOYW1lXTogdmFsdWVcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn07XG5cbmNvbnN0IGNvcmVIYW5kbGVycyA9IHtcbiAgICBldmVudHM6IEV2ZW50c1RhZ0hhbmRsZXIsXG4gICAgbWFwOiBNYXBIYW5kbGVyLFxuICAgIHByb3BzOiBQcm9wc0hhbmRsZXJcbn07XG5cbmNvbnN0IGN1c3RvbUhhbmRsZXJzID0ge307XG5cbmxldCBoYW5kbGVyczogQXJyYXk8RnVuY3Rpb24+ID0gW1xuICAgIGNvcmVIYW5kbGVycy5tYXAuY2FsbCxcbiAgICBjb3JlSGFuZGxlcnMuZXZlbnRzLmNhbGwsXG4gICAgY29yZUhhbmRsZXJzLnByb3BzLmNhbGwsXG5dO1xuXG5leHBvcnQgZnVuY3Rpb24gY2FsbEhhbmRsZXJzKGVsZW1lbnQ6IERvY3VtZW50RnJhZ21lbnQgfCBOb2RlLCBhcmdzOiBhbnlbXSk6IHZvaWQge1xuICAgIGlmICgoKGVsZW1lbnQ6IGFueSkuYXR0cmlidXRlcyB8fCBbXSkubGVuZ3RoKSB7XG4gICAgICAgIGhhbmRsZXJzLmZvckVhY2goaGFuZGxlciA9PiB7XG4gICAgICAgICAgICBoYW5kbGVyKGVsZW1lbnQsIGFyZ3MpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbGVtZW50LmNoaWxkTm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY2FsbEhhbmRsZXJzKFxuICAgICAgICAgICAgZWxlbWVudC5jaGlsZE5vZGVzW2ldLFxuICAgICAgICAgICAgYXJnc1xuICAgICAgICApXG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gYWRkVGVtcGxhdGVIYW5kbGVyKGtleTpzdHJpbmcsIGhhbmRsZXI6IFRlbXBsYXRlSGFuZGxlcik6IHZvaWQge1xuICAgIGN1c3RvbUhhbmRsZXJzW2tleV0gPSBoYW5kbGVyO1xuICAgIC8vICRGbG93Rml4TWVcbiAgICBoYW5kbGVycy51bnNoaWZ0KGhhbmRsZXIuY2FsbClcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFjY2Vzc0hhbmRsZXIoa2V5OiBzdHJpbmcpOiBUZW1wbGF0ZUhhbmRsZXIge1xuICAgIHJldHVybiBjdXN0b21IYW5kbGVyc1trZXldXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1bmxvYWRIYW5kbGVyKGtleTogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc3QgaGFuZGxlciA9IGN1c3RvbUhhbmRsZXJzW2tleV07XG4gICAgaGFuZGxlcnMgPSBoYW5kbGVycy5maWx0ZXIoZWwgPT4gZWwgIT09IGhhbmRsZXIuY2FsbClcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldENvcmVIYW5kbGVyKGtleTogc3RyaW5nLCBoYW5kbGVyOiBUZW1wbGF0ZUhhbmRsZXIpOiB2b2lkIHtcbiAgICBjb3JlSGFuZGxlcnNba2V5XSA9IGhhbmRsZXJcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvaGFuZGxlcnMuanMiLCIvLyBAZmxvd1xuXG5pbXBvcnQge2dldFN0b3JhZ2UsIHN0b3JhZ2VLZXlzfSBmcm9tIFwiLi9zdG9yYWdlXCI7XG5cbmNvbnN0IHByb3BzU3RvcmFnZSA9IGdldFN0b3JhZ2Uoc3RvcmFnZUtleXMuUFJPUFMpO1xuY29uc3QgZXZlbnRzU3RvcmFnZSA9IGdldFN0b3JhZ2Uoc3RvcmFnZUtleXMuRVZFTlRTKTtcblxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyUHJvcHNTdG9yYWdlKCk6IHZvaWQge1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBwcm9wc1N0b3JhZ2Uua2V5cygpKSB7XG4gICAgICAgICAgICBpZiAoIWtleS5pc0Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgICAgIHByb3BzU3RvcmFnZS5kZWxldGUoa2V5KVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyRXZlbnRzU3RvcmFnZSgpOiB2b2lkIHtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgZXZlbnRzU3RvcmFnZS5rZXlzKCkpIHtcbiAgICAgICAgICAgIGlmICgha2V5LmlzQ29ubmVjdGVkKSB7XG4gICAgICAgICAgICAgICAgZXZlbnRzU3RvcmFnZS5kZWxldGUoa2V5KVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRhZ05hbWVUb1Byb3Aobm9kZU5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIG5vZGVOYW1lLnNwbGl0KFwiLVwiKS5yZWR1Y2UoXG4gICAgICAgIChhY2MsIG5leHQpID0+IHtcbiAgICAgICAgICAgIGlmIChuZXh0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjYyArIG5leHRbMF0udG9VcHBlckNhc2UoKSArIG5leHQuc2xpY2UoMSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBhY2NcbiAgICAgICAgfVxuICAgICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVUYWdBcmcoaW5kZXg6IG51bWJlcik6IHN0cmluZyB7XG4gICAgcmV0dXJuIGA8IS0tX19BUkdfXyR7aW5kZXh9LS0+YFxufVxuXG5leHBvcnQgZnVuY3Rpb24gbWF0Y2hUYWdBcmcoc3RyOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gc3RyLm1hdGNoKC9fX0FSR19fKFxcZCspLylcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlcGxhY2VUYWdBcmcoc3RyOiBzdHJpbmcsIGZuOiBGdW5jdGlvbikge1xuICAgIHJldHVybiBzdHIucmVwbGFjZSgvPCEtLV9fQVJHX18oXFxkKyktLT4vLCBmbilcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGF0dHJpYnV0ZVN0YXJ0cyhzdHI6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBzdHIudHJpbSgpLnNsaWNlKC0yKSA9PT0gYD1cImBcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvdXRpbHMuanMiLCIvLyBAZmxvd1xuXG5leHBvcnQge1xuICAgIHNldEltcGxlbWVudGF0aW9uIGFzIGNoYW5nZVdlYkNvbXBvbmVudHNJbXBsZW1lbmF0aW9uLFxuICAgIGNvbXBvbmVudHNSZWFkeSxcbiAgICBzZXRSZWFkeUNoZWNrIGFzIGNoYW5nZVdlYkNvbXBvbmVudHNSZWFkeUNoZWNrLFxuICAgIGRlZmF1bHQgYXMgcmVnaXN0ZXJDb21wb25lbnRcbn0gZnJvbSBcIi4vd2ViLWNvbXBvbmVudHNcIlxuXG5leHBvcnQge1xuICAgIHNldEltcGxlbWVudGF0aW9uIGFzIGNoYW5nZVN0b3JlSW1wbGVtZW50YXRpb24sXG4gICAgcmVnaXN0ZXJSZWR1Y2VyLFxuICAgIHJlbW92ZVJlZHVjZXIsXG4gICAgc3Vic2NyaWJlLFxuICAgIGdldFN0YXRlXG59IGZyb20gXCIuL3N0b3JlXCJcblxuZXhwb3J0IHtcbiAgICBhZGRUZW1wbGF0ZUhhbmRsZXIsXG4gICAgc2V0Q29yZUhhbmRsZXIsXG4gICAgdW5sb2FkSGFuZGxlcixcbiAgICBhY2Nlc3NIYW5kbGVyLFxufSBmcm9tIFwiLi9oYW5kbGVyc1wiXG5cbmV4cG9ydCB7XG4gICAgaHRtbCxcbiAgICBjc3Ncbn0gZnJvbSBcIi4vdGFnXCJcblxuZXhwb3J0IHtcbiAgICBnZXRTdG9yYWdlLFxuICAgIGFkZFN0b3JhZ2UsXG4gICAgcmVtb3ZlU3RvcmFnZSxcbiAgICBzZXRTdG9yYWdlRHJpdmVyXG59IGZyb20gXCIuL3N0b3JhZ2VcIlxuXG5leHBvcnQge2JpbmR9IGZyb20gXCIuL2JpbmRcIlxuXG5leHBvcnQge1xuICAgIG1hdGNoVGFnQXJnLFxuICAgIHJlcGxhY2VUYWdBcmdcbn0gZnJvbSBcIi4vdXRpbHNcIlxuXG5leHBvcnQge2RlZmF1bHQgYXMgQ29tcG9uZW50fSBmcm9tIFwiLi9Db21wb25lbnRcIlxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2luZGV4LmpzIiwiLy8gQGZsb3dcblxuaW1wb3J0IHtjYWxsSGFuZGxlcnN9IGZyb20gXCIuL2hhbmRsZXJzXCI7XG5pbXBvcnQge2F0dHJpYnV0ZVN0YXJ0cywgY3JlYXRlVGFnQXJnfSBmcm9tIFwiLi91dGlsc1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gaHRtbChzdHJpbmdzOiBzdHJpbmdbXSwgLi4uYXJnczogYW55W10pIHtcbiAgICBpZiAoIWFyZ3MubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBzdHJpbmdzWzBdXG4gICAgfVxuXG4gICAgbGV0IHRwbDogc3RyaW5nID0gXCJcIjtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0cmluZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdHBsICs9IHN0cmluZ3NbaV07XG4gICAgICAgIGlmIChpIDwgc3RyaW5ncy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhcmdzW2ldKSAmJiBhdHRyaWJ1dGVTdGFydHModHBsKSA9PT0gZmFsc2UpXG4gICAgICAgICAgICAgICAgdHBsICs9IGFyZ3NbaV0uam9pbignJyk7XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgYXJnc1tpXSA9PT0gXCJmdW5jdGlvblwiIHx8IHR5cGVvZiBhcmdzW2ldID09PSBcIm9iamVjdFwiKVxuICAgICAgICAgICAgICAgIHRwbCArPSBjcmVhdGVUYWdBcmcoaSk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgdHBsICs9IGFyZ3NbaV1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjb25zdCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZW1wbGF0ZVwiKTtcbiAgICB0ZW1wbGF0ZS5pbm5lckhUTUwgPSB0cGw7XG4gICAgY2FsbEhhbmRsZXJzKHRlbXBsYXRlLmNvbnRlbnQsIGFyZ3MpO1xuICAgIHJldHVybiB0ZW1wbGF0ZVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3NzKHN0cmluZ3M6IHN0cmluZ1tdLCAuLi5hcmdzOiBhbnlbXSkge1xuICAgIGxldCByZXN1bHQgPSAnJztcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0cmluZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcmVzdWx0ICs9IHN0cmluZ3NbaV07XG4gICAgICAgIGlmIChpIDwgc3RyaW5ncy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGFyZ3NbaV0gPT09IFwiZnVuY3Rpb25cIilcbiAgICAgICAgICAgICAgICByZXN1bHQgKz0gYXJnc1tpXSgpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHJlc3VsdCArPSBhcmdzW2ldXG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdFxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy90YWcuanMiLCIvLyBAZmxvd1xuXG5pbXBvcnQge2FkZFN0b3JhZ2UsIGdldFN0b3JhZ2V9IGZyb20gXCIuL3N0b3JhZ2VcIlxuXG5jb25zdCBLRVkgPSBcIkJPVU5EU1wiO1xuY29uc3QgTUFYX1NUT1JBR0VfU0laRSA9IDEwMDtcblxuYWRkU3RvcmFnZShcbiAgICBLRVksXG4gICAgbmV3IE1hcCgpXG4pO1xuXG5mdW5jdGlvbiBhcHBlbmRUb1N0b3JhZ2UoZm46IEZ1bmN0aW9uLCB2YWx1ZTogTWFwPGFueSwgRnVuY3Rpb24+KTogdm9pZCB7XG4gICAgY29uc3Qgc3RvcmFnZTogTWFwPEZ1bmN0aW9uLCBNYXA8YW55LCBGdW5jdGlvbj4+ID0gZ2V0U3RvcmFnZShLRVkpO1xuICAgIGlmIChzdG9yYWdlLnNpemUgPT09IE1BWF9TVE9SQUdFX1NJWkUpIHtcbiAgICAgICAgY29uc3Qga2V5cyA9IHN0b3JhZ2Uua2V5cygpO1xuICAgICAgICAvLyAkRmxvd0ZpeE1lXG4gICAgICAgIHN0b3JhZ2UuZGVsZXRlKGtleXMubmV4dCgpLnZhbHVlKTtcbiAgICB9XG4gICAgc3RvcmFnZS5zZXQoZm4sIHZhbHVlKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gYmluZChmbjogRnVuY3Rpb24sIC4uLmFyZ3M6IGFueVtdKTogRnVuY3Rpb24ge1xuICAgIGNvbnN0IHN0b3JhZ2U6IE1hcDxGdW5jdGlvbiwgTWFwPGFueSwgRnVuY3Rpb24+PiA9IGdldFN0b3JhZ2UoS0VZKTtcbiAgICBjb25zdCBib3VuZCA9IHN0b3JhZ2UuZ2V0KGZuKTtcbiAgICBjb25zdCBmaXJzdEFyZyA9IGFyZ3NbMF07XG4gICAgY29uc3QgYm91bmRGbiA9IGZuLmJpbmQobnVsbCwgLi4uYXJncyk7XG4gICAgaWYgKGJvdW5kKSB7XG4gICAgICAgIGlmICghYm91bmQuZ2V0KGZpcnN0QXJnKSkge1xuICAgICAgICAgICAgYm91bmQuc2V0KFxuICAgICAgICAgICAgICAgIGZpcnN0QXJnLFxuICAgICAgICAgICAgICAgIGJvdW5kRm5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICByZXR1cm4gYm91bmRGblxuICAgICAgICB9XG4gICAgICAgIC8vICRGbG93Rml4TWVcbiAgICAgICAgcmV0dXJuIGJvdW5kLmdldChmaXJzdEFyZylcbiAgICB9XG5cbiAgICBjb25zdCBmbk1hcCA9IG5ldyBNYXAoKTtcbiAgICBmbk1hcC5zZXQoXG4gICAgICAgIGZpcnN0QXJnLFxuICAgICAgICBib3VuZEZuXG4gICAgKTtcbiAgICBhcHBlbmRUb1N0b3JhZ2UoXG4gICAgICAgIGZuLFxuICAgICAgICBmbk1hcFxuICAgICk7XG4gICAgcmV0dXJuIGJvdW5kRm5cbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvYmluZC5qcyIsIi8vIEBmbG93XG5cbmltcG9ydCB7c3Vic2NyaWJlLCBnZXRTdGF0ZX0gZnJvbSBcIi4vc3RvcmVcIlxuaW1wb3J0IHtyZW5kZXJ9IGZyb20gXCIuL3JlbmRlclwiXG5pbXBvcnQge2dldFN0b3JhZ2UsIHN0b3JhZ2VLZXlzfSBmcm9tIFwiLi9zdG9yYWdlXCJcbmltcG9ydCB7Y2xlYXJFdmVudHNTdG9yYWdlLCBjbGVhclByb3BzU3RvcmFnZX0gZnJvbSBcIi4vdXRpbHNcIjtcblxuY29uc3QgcHJvcHNTdG9yYWdlID0gZ2V0U3RvcmFnZShzdG9yYWdlS2V5cy5QUk9QUyk7XG5cbmZ1bmN0aW9uIHBhcnNlQXR0cmlidXRlcyhhdHRyaWJ1dGVzOiBOYW1lZE5vZGVNYXApOiBPYmplY3Qge1xuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgIGZvciAoY29uc3QgYXR0cmlidXRlIG9mIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgcmVzdWx0W2F0dHJpYnV0ZS5uYW1lXSA9IGF0dHJpYnV0ZS52YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29tcG9uZW50IGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpLmNvbnN0cnVjdG9yLm5hbWVcbiAgICB9XG5cbiAgICBnZXQgaXNTaGFkb3coKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuXG4gICAgZ2V0IHByb3BzKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4udGhpcy5fX2RlZmF1bHRQcm9wcyxcbiAgICAgICAgICAgIC4uLnBhcnNlQXR0cmlidXRlcyh0aGlzLmF0dHJpYnV0ZXMpLFxuICAgICAgICAgICAgLi4uKHByb3BzU3RvcmFnZS5nZXQodGhpcykgfHwge30pXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXQgcHJvcHMocHJvcHM6IE9iamVjdCkge1xuICAgICAgICB0aGlzLl9fZGVmYXVsdFByb3BzID0gcHJvcHM7XG4gICAgfVxuXG4gICAgZ2V0IGtleXMoKSB7XG4gICAgICAgIHJldHVybiBbXVxuICAgIH1cblxuICAgIGdldCBzdHlsZXMoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIFwiXCJcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0IG9ic2VydmVkQXR0cmlidXRlcygpOiBzdHJpbmdbXSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9ic2VydmFibGVQcm9wcy5tYXAoKHByb3A6IHN0cmluZyk6IHN0cmluZyA9PiB7XG4gICAgICAgICAgICBsZXQgcmVzID0gXCJcIjtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJvcC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChwcm9wW2ldID09PSBwcm9wW2ldLnRvVXBwZXJDYXNlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzICs9IFwiLVwiK3Byb3BbaV0udG9Mb3dlckNhc2UoKVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlcyArPSBwcm9wW2ldXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc1xuICAgICAgICB9KVxuICAgIH1cblxuICAgIHN0YXRpYyBnZXQgb2JzZXJ2YWJsZVByb3BzKCkge1xuICAgICAgICByZXR1cm4gW11cbiAgICB9XG5cbiAgICBfX2RlZmF1bHRQcm9wcyA9IHt9O1xuXG4gICAgc3Vic2NyaXB0aW9ucyA9IFtdO1xuXG4gICAgc3RhdGUgPSB7fTtcblxuICAgIG1vdW50ZWQgPSBmYWxzZTtcblxuICAgIGJlZm9yZVJlbmRlcigpIHt9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiAnJ1xuICAgIH1cblxuICAgIGFmdGVyUmVuZGVyKCkge31cblxuICAgIHN1YnNjcmliZVRvU3RvcmUoKSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHRoaXMua2V5cykge1xuICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLnB1c2goXG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlKGtleSwgc3RhdGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlW2tleV0gPSBzdGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyLmNhbGwodGhpcylcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGVba2V5XSA9IGdldFN0YXRlKGtleSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVUb1N0b3JlKCk7XG4gICAgICAgIHJlbmRlci5jYWxsKHRoaXMpO1xuXG4gICAgICAgIHRoaXMuY29ubmVjdGVkKClcbiAgICB9XG5cbiAgICBjb25uZWN0ZWQoKSB7fVxuXG4gICAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIGZvciAoY29uc3Qgc3Vic2NyaXB0aW9uIG9mIHRoaXMuc3Vic2NyaXB0aW9ucykge1xuICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKClcbiAgICAgICAgfVxuICAgICAgICBjbGVhclByb3BzU3RvcmFnZSgpO1xuICAgICAgICBjbGVhckV2ZW50c1N0b3JhZ2UoKTtcblxuICAgICAgICB0aGlzLmRpc2Nvbm5lY3RlZCgpXG4gICAgfVxuXG4gICAgZGlzY29ubmVjdGVkKCkge31cblxuICAgIGFkb3B0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVUb1N0b3JlKCk7XG4gICAgICAgIHJlbmRlci5jYWxsKHRoaXMpO1xuXG4gICAgICAgIHRoaXMuYWRvcHRlZCgpXG4gICAgfVxuXG4gICAgYWRvcHRlZCgpIHt9XG5cbiAgICBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2soYXR0cmlidXRlTmFtZTogc3RyaW5nLCBvbGRWYWx1ZTogc3RyaW5nLCBuZXdWYWx1ZTogc3RyaW5nKSB7XG4gICAgICAgIGlmICh0aGlzLm1vdW50ZWQgJiYgb2xkVmFsdWUgIT0gbmV3VmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHNDaGFuZ2VkKFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgLi4udGhpcy5wcm9wcyxcbiAgICAgICAgICAgICAgICAgICAgW2F0dHJpYnV0ZU5hbWVdOiBuZXdWYWx1ZSxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcmVuZGVyLmNhbGwodGhpcylcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByb3BzQ2hhbmdlZChuZXdQcm9wczogT2JqZWN0KSB7fVxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9Db21wb25lbnQuanMiLCIvLyBAZmxvd1xuXG5pbXBvcnQge2lzQ3VzdG9tQ29tcG9uZW50fSBmcm9tIFwiLi93ZWItY29tcG9uZW50c1wiXG5pbXBvcnQge2dldFN0b3JhZ2UsIHN0b3JhZ2VLZXlzfSBmcm9tIFwiLi9zdG9yYWdlXCJcbmltcG9ydCBzaGFsbG93RXF1YWwgZnJvbSBcIi4vc2hhbGxvdy1lcXVhbFwiO1xuXG5jb25zdCBwcm9wc1N0b3JhZ2UgPSBnZXRTdG9yYWdlKHN0b3JhZ2VLZXlzLlBST1BTKTtcblxuZnVuY3Rpb24gbm9kZUVxdWFscyhlbGVtZW50Tm9kZTogTm9kZSwgZnJhZ21lbnROb2RlOiBOb2RlKTogYm9vbGVhbiB7XG4gICAgY29uc3QgZWxDbG9uZSA9IGVsZW1lbnROb2RlLmNsb25lTm9kZShmYWxzZSk7XG4gICAgY29uc3QgZnJDbG9uZSA9IGZyYWdtZW50Tm9kZS5jbG9uZU5vZGUoZmFsc2UpO1xuICAgIGlmIChwcm9wc1N0b3JhZ2UuZ2V0KGZyYWdtZW50Tm9kZSkpIHtcbiAgICAgICAgcmV0dXJuIHNoYWxsb3dFcXVhbChcbiAgICAgICAgICAgIHByb3BzU3RvcmFnZS5nZXQoZWxlbWVudE5vZGUpLFxuICAgICAgICAgICAgcHJvcHNTdG9yYWdlLmdldChmcmFnbWVudE5vZGUpXG4gICAgICAgICkgJiYgZWxDbG9uZS5pc0VxdWFsTm9kZShmckNsb25lKVxuICAgIH1cbiAgICByZXR1cm4gZWxDbG9uZS5pc0VxdWFsTm9kZShmckNsb25lKVxufVxuXG5mdW5jdGlvbiBjb250ZW50RGlmZmVyKGVsZW1lbnROb2RlOiBOb2RlLCBmcmFnbWVudE5vZGU6IE5vZGUpOiBib29sZWFuIHtcbiAgICByZXR1cm4gZWxlbWVudE5vZGUuaXNFcXVhbE5vZGUoZnJhZ21lbnROb2RlKSA9PT0gZmFsc2Vcbn1cblxuZnVuY3Rpb24gZWxlbWVudHNEZWxldGVkKGVsZW1lbnROb2RlczogTm9kZVtdLCBmcmFnbWVudE5vZGVzOiBOb2RlW10pOiBBcnJheTxOb2RlPiB7XG4gICAgaWYgKGVsZW1lbnROb2Rlcy5sZW5ndGggPiBmcmFnbWVudE5vZGVzLmxlbmd0aCkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVsZW1lbnROb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGVsZW1lbnROb2Rlc1tpXSAmJiAhZnJhZ21lbnROb2Rlc1tpXSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbZWxlbWVudE5vZGVzW2ldXS5jb25jYXQoXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzRGVsZXRlZChcbiAgICAgICAgICAgICAgICAgICAgICAgIEFycmF5LmZyb20oZWxlbWVudE5vZGVzKS5zbGljZShpICsgMSksXG4gICAgICAgICAgICAgICAgICAgICAgICBBcnJheS5mcm9tKGZyYWdtZW50Tm9kZXMpLnNsaWNlKGkpXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIW5vZGVFcXVhbHMoZWxlbWVudE5vZGVzW2ldLCBmcmFnbWVudE5vZGVzW2ldKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlbGV0ZWQgPSBlbGVtZW50c0RlbGV0ZWQoXG4gICAgICAgICAgICAgICAgICAgIEFycmF5LmZyb20oZWxlbWVudE5vZGVzKS5zbGljZShpICsgMSksXG4gICAgICAgICAgICAgICAgICAgIEFycmF5LmZyb20oZnJhZ21lbnROb2Rlcykuc2xpY2UoaSlcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGlmIChkZWxldGVkLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW2VsZW1lbnROb2Rlc1tpXV1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFtdXG59XG5cbmZ1bmN0aW9uIGNoaWxkcmVuQ2hhbmdlZENvdW50KGVsZW1lbnROb2RlczogTm9kZVtdLCBmcmFnbWVudE5vZGVzOiBOb2RlW10pOiBudW1iZXIge1xuICAgIGlmIChlbGVtZW50Tm9kZXMubGVuZ3RoID4gZnJhZ21lbnROb2Rlcy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGZyYWdtZW50Tm9kZXMubGVuZ3RoXG4gICAgfVxuICAgIGxldCBjaGFuZ2VkID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVsZW1lbnROb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBlbENsb25lID0gZWxlbWVudE5vZGVzW2ldLmNsb25lTm9kZShmYWxzZSk7XG4gICAgICAgIGNvbnN0IGZyQ2xvbmUgPSBmcmFnbWVudE5vZGVzW2ldLmNsb25lTm9kZShmYWxzZSk7XG4gICAgICAgIGlmICghbm9kZUVxdWFscyhlbGVtZW50Tm9kZXNbaV0sIGZyYWdtZW50Tm9kZXNbaV0pKSB7XG4gICAgICAgICAgICBpZiAoIWlzRW1wdHlOb2RlKGVsQ2xvbmUpICYmICFpc0VtcHR5Tm9kZShmckNsb25lKSkge1xuICAgICAgICAgICAgICAgIGNoYW5nZWQrK1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjaGFuZ2VkXG59XG5cbmZ1bmN0aW9uIGFwcGVuZENoaWxkcmVuKGVsZW1lbnROb2RlOiBOb2RlLCBlbGVtZW50Q2hpbGRyZW46IE5vZGVbXSwgZnJhZ21lbnRDaGlsZHJlbjogTm9kZVtdKTogdm9pZCB7XG4gICAgY29uc3QgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgZm9yIChsZXQgaSA9IGVsZW1lbnRDaGlsZHJlbi5sZW5ndGg7IGkgPCBmcmFnbWVudENoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKFxuICAgICAgICAgICAgZnJhZ21lbnRDaGlsZHJlbltpXVxuICAgICAgICApXG4gICAgfVxuICAgIGVsZW1lbnROb2RlLmFwcGVuZENoaWxkKFxuICAgICAgICBmcmFnbWVudFxuICAgIClcbn1cblxuZnVuY3Rpb24gdXBkYXRlQXR0cmlidXRlcyhlbGVtZW50Tm9kZTogTm9kZSwgZnJhZ21lbnROb2RlOiBOb2RlKTogdm9pZCB7XG4gICAgY29uc3QgYXR0cmlidXRlcyA9IChmcmFnbWVudE5vZGU6IGFueSkuYXR0cmlidXRlcyB8fCBbXTtcbiAgICBjb25zdCBlbGVtZW50QXR0cmlidXRlcyA9IChlbGVtZW50Tm9kZTogYW55KS5hdHRyaWJ1dGVzIHx8IFtdO1xuICAgIGlmIChlbGVtZW50QXR0cmlidXRlcy5sZW5ndGggPiBhdHRyaWJ1dGVzLmxlbmd0aCkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVsZW1lbnRBdHRyaWJ1dGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBhdHRyaWJ1dGUgPSBlbGVtZW50QXR0cmlidXRlc1tpXTtcbiAgICAgICAgICAgIGlmICghKGZyYWdtZW50Tm9kZTogYW55KS5oYXNBdHRyaWJ1dGUoYXR0cmlidXRlLm5vZGVOYW1lKSkge1xuICAgICAgICAgICAgICAgIChlbGVtZW50Tm9kZTogYW55KS5yZW1vdmVBdHRyaWJ1dGUoXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZS5ub2RlTmFtZVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGF0dHJpYnV0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgYXR0cmlidXRlID0gYXR0cmlidXRlc1tpXTtcbiAgICAgICAgKGVsZW1lbnROb2RlOiBhbnkpLnNldEF0dHJpYnV0ZShcbiAgICAgICAgICAgIGF0dHJpYnV0ZS5ub2RlTmFtZSxcbiAgICAgICAgICAgIGF0dHJpYnV0ZS5ub2RlVmFsdWVcbiAgICAgICAgKTtcbiAgICB9XG4gICAgaWYgKHByb3BzU3RvcmFnZS5nZXQoZnJhZ21lbnROb2RlKSkge1xuICAgICAgICBjb25zdCBlbFByb3BzID0gcHJvcHNTdG9yYWdlLmdldChlbGVtZW50Tm9kZSk7XG4gICAgICAgIGNvbnN0IGZyUHJvcHMgPSBwcm9wc1N0b3JhZ2UuZ2V0KGZyYWdtZW50Tm9kZSk7XG4gICAgICAgIHByb3BzU3RvcmFnZS5zZXQoXG4gICAgICAgICAgICBlbGVtZW50Tm9kZSxcbiAgICAgICAgICAgIGZyUHJvcHNcbiAgICAgICAgKTtcbiAgICAgICAgaWYgKCFzaGFsbG93RXF1YWwoZWxQcm9wcywgZnJQcm9wcykpIHtcbiAgICAgICAgICAgIGlmIChpc0N1c3RvbUNvbXBvbmVudChlbGVtZW50Tm9kZSkpIHtcbiAgICAgICAgICAgICAgICByZW5kZXIuY2FsbCgoZWxlbWVudE5vZGU6IGFueSkpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUVsZW1lbnQoZWxlbWVudE5vZGU6IE5vZGUsIGZyYWdtZW50Tm9kZTogTm9kZSk6IHZvaWQge1xuICAgIGlmIChpc0N1c3RvbUNvbXBvbmVudChlbGVtZW50Tm9kZSkpIHtcbiAgICAgICAgcmV0dXJuIHVwZGF0ZUF0dHJpYnV0ZXMoXG4gICAgICAgICAgICBlbGVtZW50Tm9kZSxcbiAgICAgICAgICAgIGZyYWdtZW50Tm9kZVxuICAgICAgICApXG4gICAgfVxuICAgIGlmICghbm9kZUVxdWFscyhlbGVtZW50Tm9kZSwgZnJhZ21lbnROb2RlKSkge1xuICAgICAgICB1cGRhdGVBdHRyaWJ1dGVzKFxuICAgICAgICAgICAgZWxlbWVudE5vZGUsXG4gICAgICAgICAgICBmcmFnbWVudE5vZGVcbiAgICAgICAgKVxuICAgIH1cbiAgICB1cGRhdGVDaGlsZHJlbihcbiAgICAgICAgZWxlbWVudE5vZGUsXG4gICAgICAgIGZyYWdtZW50Tm9kZVxuICAgIClcbn1cblxuZnVuY3Rpb24gaXNFbXB0eU5vZGUobm9kZTogTm9kZSk6IGJvb2xlYW4ge1xuICAgIGlmIChub2RlLm5vZGVUeXBlICE9PSBOb2RlLlRFWFRfTk9ERSkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgaWYgKG5vZGUuY2hpbGROb2Rlcy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIGlmIChub2RlLmlubmVyVGV4dCkge1xuICAgICAgICByZXR1cm4gQm9vbGVhbihub2RlLmlubmVyVGV4dC50cmltKCkpID09PSBmYWxzZVxuICAgIH1cbiAgICBpZiAoKG5vZGU6IGFueSkuaW5uZXJIVE1MKSB7XG4gICAgICAgIHJldHVybiBCb29sZWFuKChub2RlOiBhbnkpLmlubmVySFRNTC50cmltKCkpID09PSBmYWxzZVxuICAgIH1cbiAgICBpZiAoKG5vZGU6IGFueSkudGV4dENvbnRlbnQpIHtcbiAgICAgICAgcmV0dXJuIEJvb2xlYW4oKG5vZGU6IGFueSkudGV4dENvbnRlbnQudHJpbSgpKSA9PT0gZmFsc2VcbiAgICB9XG4gICAgcmV0dXJuIHRydWVcbn1cblxuZnVuY3Rpb24gbm9kZUZpbHRlcihub2RlOiBOb2RlKTogYm9vbGVhbiB7XG4gICAgaWYgKG5vZGUpIHtcbiAgICAgICAgcmV0dXJuIChub2RlLm5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERSB8fFxuICAgICAgICAgICAgbm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5URVhUX05PREUpICYmXG4gICAgICAgICAgICBub2RlLm5vZGVOYW1lICE9PSBcIlNUWUxFXCIgJiZcbiAgICAgICAgICAgICFpc0VtcHR5Tm9kZShub2RlKVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2Vcbn1cblxuZnVuY3Rpb24gaGFuZGxlQ2hpbGRyZW5Db3VudENoYW5nZWQoZWxlbWVudE5vZGU6IE5vZGUsIGZyYWdtZW50Tm9kZTogTm9kZSwgZWxlbWVudE5vZGVzOiBOb2RlW10sIGZyYWdtZW50Tm9kZXM6IE5vZGVbXSk6IHZvaWQge1xuICAgIGNvbnN0IGRlbGV0ZWQgPSBlbGVtZW50c0RlbGV0ZWQoXG4gICAgICAgIGVsZW1lbnROb2RlcyxcbiAgICAgICAgZnJhZ21lbnROb2RlcyxcbiAgICApO1xuICAgIGlmIChmcmFnbWVudE5vZGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gKGVsZW1lbnROb2RlLnBhcmVudE5vZGU6IGFueSkucmVwbGFjZUNoaWxkKFxuICAgICAgICAgICAgZnJhZ21lbnROb2RlLFxuICAgICAgICAgICAgZWxlbWVudE5vZGUsXG4gICAgICAgICk7XG4gICAgfVxuICAgIGlmIChkZWxldGVkLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAoZGVsZXRlZFswXS5wYXJlbnROb2RlOiBhbnkpLnJlbW92ZUNoaWxkKGRlbGV0ZWRbMF0pO1xuICAgICAgICByZXR1cm4gdXBkYXRlQ2hpbGRyZW4oXG4gICAgICAgICAgICBlbGVtZW50Tm9kZSxcbiAgICAgICAgICAgIGZyYWdtZW50Tm9kZVxuICAgICAgICApXG4gICAgfVxuICAgIGlmIChjaGlsZHJlbkNoYW5nZWRDb3VudChlbGVtZW50Tm9kZXMsIGZyYWdtZW50Tm9kZXMpID4gMCkge1xuICAgICAgICByZXR1cm4gKGVsZW1lbnROb2RlLnBhcmVudE5vZGU6IGFueSkucmVwbGFjZUNoaWxkKFxuICAgICAgICAgICAgZnJhZ21lbnROb2RlLFxuICAgICAgICAgICAgZWxlbWVudE5vZGUsXG4gICAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiBhcHBlbmRDaGlsZHJlbihcbiAgICAgICAgZWxlbWVudE5vZGUsXG4gICAgICAgIGVsZW1lbnROb2RlcyxcbiAgICAgICAgZnJhZ21lbnROb2RlcyxcbiAgICApXG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUNoaWxkcmVuKGVsZW1lbnROb2RlOiBOb2RlLCBmcmFnbWVudE5vZGU6IE5vZGUpOiB2b2lkIHtcbiAgICBjb25zdCBlbGVtZW50Tm9kZXMgPSBBcnJheS5mcm9tKGVsZW1lbnROb2RlLmNoaWxkTm9kZXMpLmZpbHRlcihub2RlRmlsdGVyKTtcbiAgICBjb25zdCBmcmFnbWVudE5vZGVzID0gQXJyYXkuZnJvbShmcmFnbWVudE5vZGUuY2hpbGROb2RlcykuZmlsdGVyKG5vZGVGaWx0ZXIpO1xuICAgIGlmIChlbGVtZW50Tm9kZXMubGVuZ3RoICE9PSBmcmFnbWVudE5vZGVzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gaGFuZGxlQ2hpbGRyZW5Db3VudENoYW5nZWQoXG4gICAgICAgICAgICBlbGVtZW50Tm9kZSxcbiAgICAgICAgICAgIGZyYWdtZW50Tm9kZSxcbiAgICAgICAgICAgIGVsZW1lbnROb2RlcyxcbiAgICAgICAgICAgIGZyYWdtZW50Tm9kZXNcbiAgICAgICAgKVxuICAgIH1cbiAgICBpZiAoZWxlbWVudE5vZGVzLmxlbmd0aCA9PT0gMCAmJiBmcmFnbWVudE5vZGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBpZiAoY29udGVudERpZmZlcihlbGVtZW50Tm9kZSwgZnJhZ21lbnROb2RlKSkge1xuICAgICAgICAgICAgcmV0dXJuIChlbGVtZW50Tm9kZS5wYXJlbnROb2RlOiBhbnkpLnJlcGxhY2VDaGlsZChcbiAgICAgICAgICAgICAgICBmcmFnbWVudE5vZGUsXG4gICAgICAgICAgICAgICAgZWxlbWVudE5vZGUsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZWxlbWVudE5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHVwZGF0ZUVsZW1lbnQoXG4gICAgICAgICAgICBlbGVtZW50Tm9kZXNbaV0sXG4gICAgICAgICAgICBmcmFnbWVudE5vZGVzW2ldXG4gICAgICAgIClcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUZyYWdtZW50RnJvbVN0cih0cGw6IHN0cmluZyk6IEhUTUxUZW1wbGF0ZUVsZW1lbnQge1xuICAgIGNvbnN0IHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRlbXBsYXRlXCIpO1xuICAgIHRlbXBsYXRlLmlubmVySFRNTCA9IHRwbDtcbiAgICByZXR1cm4gdGVtcGxhdGVcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICBwZXJmb3JtYW5jZS5tYXJrKCdtdXNrb3Qgc3RhcnQgcmVuZGVyaW5nJyk7XG4gICAgdGhpcy5iZWZvcmVSZW5kZXIoKTtcblxuICAgIGlmICh0aGlzLmlzU2hhZG93ICYmICF0aGlzLnNoYWRvd1Jvb3QpIHtcbiAgICAgICAgcGVyZm9ybWFuY2UubWFyaygnbXVza290IGF0dGFjaGluZyByb290Jyk7XG4gICAgICAgIHRoaXMuYXR0YWNoU2hhZG93KHttb2RlOiAnb3Blbid9KTtcbiAgICAgICAgcGVyZm9ybWFuY2UubWFyaygnbXVza290IHJvb3QgYXR0YWNoZWQnKTtcbiAgICAgICAgcGVyZm9ybWFuY2UubWVhc3VyZShcbiAgICAgICAgICAgIFwibXVza290IGF0dGFjaCByb290XCIsXG4gICAgICAgICAgICAnbXVza290IGF0dGFjaGluZyByb290JyxcbiAgICAgICAgICAgICdtdXNrb3Qgcm9vdCBhdHRhY2hlZCdcbiAgICAgICAgKTtcbiAgICB9XG4gICAgcGVyZm9ybWFuY2UubWFyaygnbXVza290IGNyZWF0ZSByZW5kZXIgRE9NJyk7XG4gICAgY29uc3QgcmVuZGVyUmVzID0gdGhpcy5yZW5kZXIoKTtcbiAgICBwZXJmb3JtYW5jZS5tYXJrKCdtdXNrb3QgcmVuZGVyIERPTSBjcmVhdGVkJyk7XG4gICAgcGVyZm9ybWFuY2UubWVhc3VyZShcbiAgICAgICAgXCJtdXNrb3QgY29tcG9uZW50IHJlbmRlciByZXN1bHRcIixcbiAgICAgICAgJ211c2tvdCBjcmVhdGUgcmVuZGVyIERPTScsXG4gICAgICAgICdtdXNrb3QgcmVuZGVyIERPTSBjcmVhdGVkJ1xuICAgICk7XG5cbiAgICBjb25zdCByb290ID0gdGhpcy5pc1NoYWRvdyA/ICh0aGlzLnNoYWRvd1Jvb3Q6IGFueSkgOiB0aGlzO1xuICAgIHBlcmZvcm1hbmNlLm1hcmsoJ211c2tvdCBjcmVhdGUgZnJhZ21lbnQnKTtcbiAgICBjb25zdCBmcmFnbWVudCA9IHR5cGVvZiByZW5kZXJSZXMgPT09IFwic3RyaW5nXCIgPyBjcmVhdGVGcmFnbWVudEZyb21TdHIocmVuZGVyUmVzKSA6IHJlbmRlclJlcztcbiAgICBwZXJmb3JtYW5jZS5tYXJrKCdtdXNrb3QgZnJhZ21lbnQgY3JlYXRlZCcpO1xuICAgIHBlcmZvcm1hbmNlLm1lYXN1cmUoXG4gICAgICAgIFwibXVza290IGZyYWdtZW50IGNyZWF0aW9uXCIsXG4gICAgICAgICdtdXNrb3QgY3JlYXRlIGZyYWdtZW50JyxcbiAgICAgICAgJ211c2tvdCBmcmFnbWVudCBjcmVhdGVkJ1xuICAgICk7XG5cbiAgICBpZiAoIXRoaXMubW91bnRlZCkge1xuICAgICAgICBwZXJmb3JtYW5jZS5tYXJrKCdtdXNrb3QgaW5zZXJ0IHN0eWxlIGludG8gY29tcG9uZW50Jyk7XG4gICAgICAgIHJvb3QuaW5uZXJIVE1MID0gYDxzdHlsZT4ke3RoaXMuc3R5bGVzfTwvc3R5bGU+YDtcbiAgICAgICAgcGVyZm9ybWFuY2UubWFyaygnbXVza290IHN0eWxlIGluc2VydGVkJyk7XG4gICAgICAgIHBlcmZvcm1hbmNlLm1lYXN1cmUoXG4gICAgICAgICAgICBcIm11c2tvdCBzdHlsZSBjcmVhdGlvbiAmIGluc2VydCBieSBpbm5lckhUTUxcIixcbiAgICAgICAgICAgICdtdXNrb3QgaW5zZXJ0IHN0eWxlIGludG8gY29tcG9uZW50JyxcbiAgICAgICAgICAgICdtdXNrb3Qgc3R5bGUgaW5zZXJ0ZWQnXG4gICAgICAgICk7XG5cbiAgICAgICAgcGVyZm9ybWFuY2UubWFyaygnbXVza290IGFwcGVuZCBjaGlsZCB3aXRoIGNvbnRlbnQnKTtcbiAgICAgICAgcm9vdC5hcHBlbmRDaGlsZChmcmFnbWVudC5jb250ZW50KTtcbiAgICAgICAgcGVyZm9ybWFuY2UubWFyaygnbXVza290IGNvbnRlbnQgYXBwZW5kZWQnKTtcbiAgICAgICAgcGVyZm9ybWFuY2UubWVhc3VyZShcbiAgICAgICAgICAgIFwibXVza290IGFwcGVuZCBjb250ZW50IG9uIGluaXRpYWwgcmVuZGVyXCIsXG4gICAgICAgICAgICAnbXVza290IGFwcGVuZCBjaGlsZCB3aXRoIGNvbnRlbnQnLFxuICAgICAgICAgICAgJ211c2tvdCBjb250ZW50IGFwcGVuZGVkJ1xuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMubW91bnRlZCA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcGVyZm9ybWFuY2UubWFyaygnbXVza290IGluc2VydCBzdHlsZXMgYmVmb3JlIGNvbnRlbnQgb24gdXBkYXRlJyk7XG4gICAgICAgIGNvbnN0IHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuICAgICAgICBzdHlsZS5pbm5lckhUTUwgPSB0aGlzLnN0eWxlcztcbiAgICAgICAgZnJhZ21lbnQuY29udGVudC5pbnNlcnRCZWZvcmUoXG4gICAgICAgICAgICBzdHlsZSxcbiAgICAgICAgICAgIGZyYWdtZW50LmNvbnRlbnQuZmlyc3RDaGlsZFxuICAgICAgICApO1xuICAgICAgICBwZXJmb3JtYW5jZS5tYXJrKCdtdXNrb3Qgc3R5bGVzIGluc2VydGVkIG9uIHVwZGF0ZScpO1xuICAgICAgICBwZXJmb3JtYW5jZS5tZWFzdXJlKFxuICAgICAgICAgICAgXCJtdXNrb3QgYWRkIHN0eWxlcyBieSBpbnNlcnRCZWZvcmVcIixcbiAgICAgICAgICAgICdtdXNrb3QgaW5zZXJ0IHN0eWxlcyBiZWZvcmUgY29udGVudCBvbiB1cGRhdGUnLFxuICAgICAgICAgICAgJ211c2tvdCBzdHlsZXMgaW5zZXJ0ZWQgb24gdXBkYXRlJ1xuICAgICAgICApO1xuXG4gICAgICAgIHBlcmZvcm1hbmNlLm1hcmsoJ211c2tvdCB1cGRhdGUgY2hpbGRyZW4nKTtcbiAgICAgICAgdXBkYXRlQ2hpbGRyZW4oXG4gICAgICAgICAgICByb290LFxuICAgICAgICAgICAgZnJhZ21lbnQuY29udGVudFxuICAgICAgICApO1xuICAgICAgICBwZXJmb3JtYW5jZS5tYXJrKCdtdXNrb3QgY2hpbGRyZW4gdXBkYXRlZCcpO1xuICAgICAgICBwZXJmb3JtYW5jZS5tZWFzdXJlKFxuICAgICAgICAgICAgXCJtdXNrb3QgdXBkYXRlIGNvbXBvbmVudCdzIGNoaWxkcmVuXCIsXG4gICAgICAgICAgICAnbXVza290IHVwZGF0ZSBjaGlsZHJlbicsXG4gICAgICAgICAgICAnbXVza290IGNoaWxkcmVuIHVwZGF0ZWQnXG4gICAgICAgICk7XG4gICAgfVxuICAgIHBlcmZvcm1hbmNlLm1hcmsoJ211c2tvdCBmaW5pc2ggcmVuZGVyaW5nJyk7XG4gICAgcGVyZm9ybWFuY2UubWVhc3VyZShcbiAgICAgICAgXCJtdXNrb3QgZnVsbCByZW5kZXJcIixcbiAgICAgICAgJ211c2tvdCBzdGFydCByZW5kZXJpbmcnLFxuICAgICAgICAnbXVza290IGZpbmlzaCByZW5kZXJpbmcnXG4gICAgKTtcblxuICAgIHRoaXMuYWZ0ZXJSZW5kZXIoKTtcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvcmVuZGVyLmpzIiwiY29uc3QgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG4vKipcbiAqIGlubGluZWQgT2JqZWN0LmlzIHBvbHlmaWxsIHRvIGF2b2lkIHJlcXVpcmluZyBjb25zdW1lcnMgc2hpcCB0aGVpciBvd25cbiAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC9pc1xuICovXG5mdW5jdGlvbiBpcyh4LCB5KSB7XG4gICAgLy8gU2FtZVZhbHVlIGFsZ29yaXRobVxuICAgIGlmICh4ID09PSB5KSB7XG4gICAgICAgIC8vIFN0ZXBzIDEtNSwgNy0xMFxuICAgICAgICAvLyBTdGVwcyA2LmItNi5lOiArMCAhPSAtMFxuICAgICAgICAvLyBBZGRlZCB0aGUgbm9uemVybyB5IGNoZWNrIHRvIG1ha2UgRmxvdyBoYXBweSwgYnV0IGl0IGlzIHJlZHVuZGFudFxuICAgICAgICByZXR1cm4geCAhPT0gMCB8fCB5ICE9PSAwIHx8IDEgLyB4ID09PSAxIC8geTtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBTdGVwIDYuYTogTmFOID09IE5hTlxuICAgICAgICByZXR1cm4geCAhPT0geCAmJiB5ICE9PSB5O1xuICAgIH1cbn1cblxuLyoqXG4gKiBQZXJmb3JtcyBlcXVhbGl0eSBieSBpdGVyYXRpbmcgdGhyb3VnaCBrZXlzIG9uIGFuIG9iamVjdCBhbmQgcmV0dXJuaW5nIGZhbHNlXG4gKiB3aGVuIGFueSBrZXkgaGFzIHZhbHVlcyB3aGljaCBhcmUgbm90IHN0cmljdGx5IGVxdWFsIGJldHdlZW4gdGhlIGFyZ3VtZW50cy5cbiAqIFJldHVybnMgdHJ1ZSB3aGVuIHRoZSB2YWx1ZXMgb2YgYWxsIGtleXMgYXJlIHN0cmljdGx5IGVxdWFsLlxuICovXG5mdW5jdGlvbiBzaGFsbG93RXF1YWwob2JqQTogbWl4ZWQsIG9iakI6IG1peGVkKTogYm9vbGVhbiB7XG4gICAgaWYgKGlzKG9iakEsIG9iakIpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmIChcbiAgICAgICAgdHlwZW9mIG9iakEgIT09ICdvYmplY3QnIHx8XG4gICAgICAgIG9iakEgPT09IG51bGwgfHxcbiAgICAgICAgdHlwZW9mIG9iakIgIT09ICdvYmplY3QnIHx8XG4gICAgICAgIG9iakIgPT09IG51bGxcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IGtleXNBID0gT2JqZWN0LmtleXMob2JqQSk7XG4gICAgY29uc3Qga2V5c0IgPSBPYmplY3Qua2V5cyhvYmpCKTtcblxuICAgIGlmIChrZXlzQS5sZW5ndGggIT09IGtleXNCLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gVGVzdCBmb3IgQSdzIGtleXMgZGlmZmVyZW50IGZyb20gQi5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXNBLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICAgICFoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iakIsIGtleXNBW2ldKSB8fFxuICAgICAgICAgICAgIWlzKG9iakFba2V5c0FbaV1dLCBvYmpCW2tleXNBW2ldXSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgc2hhbGxvd0VxdWFsO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9zaGFsbG93LWVxdWFsLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==