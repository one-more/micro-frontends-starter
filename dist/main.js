module.exports=function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e){m.driver=m.driver.migrate(e)}function a(e){return m.driver.getItem(e)}function u(e,t){m.driver.setItem(e,t)}function i(e){m.driver.removeItem(e)}Object.defineProperty(t,"__esModule",{value:!0});var c;t.setStorageDriver=o,t.getStorage=a,t.addStorage=u,t.removeStorage=i;var s=new Map,f=new Map,l=t.storageKeys={PROPS:"props",EVENTS:"events"},d={items:Object.create((c={},n(c,l.PROPS,s),n(c,l.EVENTS,f),c)),setItem:function(e,t){this.items[e]=t},getItem:function(e){return this.items[e]},removeItem:function(e){delete this.items[e]},migrate:function(e){for(var t in this.items)e.setItem(t,this.items[t]);return e}},m=t.storage={driver:d}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={registerComponent:function(e,t){"customElements"in window?customElements.define(e,t):u().then(function(){a(e,t)})},isCustomComponent:function(e){return e.nodeName.includes("-")}},o=n,a=function(e,t){return o.registerComponent(e,t)},u=(t.setImplementation=function(e){o=e},function(){return Promise.resolve()});t.componentsReady=function(){return u()},t.setReadyCheck=function(e){u=e};t.default=a;t.isCustomComponent=function(e){return o.isCustomComponent(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={reducers:{},subscriptions:{},addReducer:function(e,t){this.reducers[e]=t},removeReducer:function(e){return delete this.reducers[e],!1},subscribe:function(e,t){var r=this;return this.subscriptions[e]||(this.subscriptions[e]=[]),this.subscriptions[e].push(t),{unsubscribe:function(){r.subscriptions[e]=r.subscriptions[e].filter(function(e){return e!==t})}}},getState:function(e){},migrate:function(e){for(var t in this.reducers){var r=this.reducers[t];e.addReducer(t,r)}for(var n in this.subscriptions){var o=!0,a=!1,u=void 0;try{for(var i,c=this.subscriptions[n][Symbol.iterator]();!(o=(i=c.next()).done);o=!0){var s=i.value;e.subscribe(n,s)}}catch(e){a=!0,u=e}finally{try{!o&&c.return&&c.return()}finally{if(a)throw u}}}return e}},o={currentImplementation:n};t.setImplementation=function(e){o.currentImplementation=o.currentImplementation.migrate(e)},t.registerReducer=function(e,t){o.currentImplementation.addReducer(e,t)},t.removeReducer=function(e){o.currentImplementation.removeReducer(e)},t.subscribe=function(e,t){return o.currentImplementation.subscribe(e,t)},t.getState=function(e){return o.currentImplementation.getState(e)}},function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){return"function"==typeof e||"object"===(void 0===e?"undefined":d(e))||(0,b.isCustomComponent)(t)}function a(e,t,r){var n=e.nodeValue.match(/__ARG__(\d+)/);if(n&&n[1]){var o=Number(n[1]),a=e.nodeName;return[(0,y.tagNameToProp)(a),r[o]]}return[e.nodeName,e.nodeValue]}function u(e,t){(e.attributes||[]).length&&P.forEach(function(r){r(e,t)});for(var r=0;r<e.childNodes.length;r++)u(e.childNodes[r],t)}function i(e,t){_[e]=t,P.unshift(t.call)}function c(e){return _[e]}function s(e){var t=_[e];P=P.filter(function(e){return e!==t.call})}function f(e,t){O[e]=t}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(n=(u=i.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&i.return&&i.return()}finally{if(o)throw a}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.callHandlers=u,t.addTemplateHandler=i,t.accessHandler=c,t.unloadHandler=s,t.setCoreHandler=f;var p=r(0),y=r(4),b=r(1),v=(0,p.getStorage)(p.storageKeys.PROPS),h=(0,p.getStorage)(p.storageKeys.EVENTS),g={call:function(e,t){for(var r=e.attributes||[],o=0;o<r.length;o++){var a=r[o];if(a.nodeName.startsWith("on")){var u=a.nodeValue.match(/__ARG__(\d+)/);if(u&&u[1]){var i=Number(u[1]),c=t[i];if("function"==typeof c){e.removeAttribute(a.nodeName);var s=a.nodeName.toLowerCase().slice(2);e.addEventListener(s,c);var f=h.get(e)||{};h.set(e,m({},f,n({},s,c)))}}}}}},k={call:function(e,t){if(e instanceof HTMLTemplateElement&&e.hasAttribute("map")){var r=String(e.getAttribute("map")).match(/__ARG__(\d+)/);if(r&&r[1]){var n=Number(r[1]),o=t[n],a=e.innerHTML,u=document.createDocumentFragment();o.forEach(function(e){return a.replace(/__ARG__(\d+)/g,function(r,n){var o=t[n];if("function"==typeof o){var a=o(e);if(a instanceof HTMLTemplateElement)u.appendChild(a.content);else{var i=document.createElement("template");i.innerHTML=a,u.appendChild(i.content)}}return o})}),e.parentNode.replaceChild(u,e)}}}},S={call:function(e,t){for(var r=e.attributes||[],u=0;u<r.length;u++){var i=r[u],c=a(i,e,t),s=l(c,2),f=s[0],d=s[1];if(o(d,e)){var p=v.get(e)||{};e.removeAttribute(i.nodeName),v.set(e,m({},p,n({},f,d)))}}}},O={events:g,map:k,props:S},_={},P=[O.map.call,O.events.call,O.props.call]},function(e,t,r){"use strict";function n(){setTimeout(function(){var e=!0,t=!1,r=void 0;try{for(var n,o=i.keys()[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var a=n.value;a.isConnected||i.delete(a)}}catch(e){t=!0,r=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw r}}})}function o(){setTimeout(function(){var e=!0,t=!1,r=void 0;try{for(var n,o=c.keys()[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var a=n.value;a.isConnected||c.delete(a)}}catch(e){t=!0,r=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw r}}})}function a(e){return e.split("-").reduce(function(e,t){return t?e+t[0].toUpperCase()+t.slice(1):e})}Object.defineProperty(t,"__esModule",{value:!0}),t.clearPropsStorage=n,t.clearEventsStorage=o,t.tagNameToProp=a;var u=r(0),i=(0,u.getStorage)(u.storageKeys.PROPS),c=(0,u.getStorage)(u.storageKeys.EVENTS)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(1);Object.defineProperty(t,"changeWebComponentsImplemenation",{enumerable:!0,get:function(){return o.setImplementation}}),Object.defineProperty(t,"componentsReady",{enumerable:!0,get:function(){return o.componentsReady}}),Object.defineProperty(t,"changeWebComponentsReadyCheck",{enumerable:!0,get:function(){return o.setReadyCheck}}),Object.defineProperty(t,"registerComponent",{enumerable:!0,get:function(){return n(o).default}});var a=r(2);Object.defineProperty(t,"changeStoreImplementation",{enumerable:!0,get:function(){return a.setImplementation}}),Object.defineProperty(t,"registerReducer",{enumerable:!0,get:function(){return a.registerReducer}}),Object.defineProperty(t,"removeReducer",{enumerable:!0,get:function(){return a.removeReducer}}),Object.defineProperty(t,"subscribe",{enumerable:!0,get:function(){return a.subscribe}}),Object.defineProperty(t,"getState",{enumerable:!0,get:function(){return a.getState}});var u=r(3);Object.defineProperty(t,"addTemplateHandler",{enumerable:!0,get:function(){return u.addTemplateHandler}}),Object.defineProperty(t,"setCoreHandler",{enumerable:!0,get:function(){return u.setCoreHandler}}),Object.defineProperty(t,"unloadHandler",{enumerable:!0,get:function(){return u.unloadHandler}}),Object.defineProperty(t,"accessHandler",{enumerable:!0,get:function(){return u.accessHandler}});var i=r(6);Object.defineProperty(t,"html",{enumerable:!0,get:function(){return i.html}}),Object.defineProperty(t,"css",{enumerable:!0,get:function(){return i.css}});var c=r(0);Object.defineProperty(t,"getStorage",{enumerable:!0,get:function(){return c.getStorage}}),Object.defineProperty(t,"addStorage",{enumerable:!0,get:function(){return c.addStorage}}),Object.defineProperty(t,"removeStorage",{enumerable:!0,get:function(){return c.removeStorage}}),Object.defineProperty(t,"setStorageDriver",{enumerable:!0,get:function(){return c.setStorageDriver}});var s=r(7);Object.defineProperty(t,"bind",{enumerable:!0,get:function(){return s.bind}});var f=r(8);Object.defineProperty(t,"Component",{enumerable:!0,get:function(){return n(f).default}})},function(e,t,r){"use strict";function n(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(!r.length)return e[0];for(var o="",i=0;i<e.length;i++)o+=e[i],i<e.length-1&&("function"==typeof r[i]||"object"===a(r[i])?o+="__ARG__"+i:o+=r[i]);var c=document.createElement("template");return c.innerHTML=o,(0,u.callHandlers)(c.content,r),c}function o(e){for(var t="",r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];for(var a=0;a<e.length;a++)t+=e[a],a<e.length-1&&("function"==typeof n[a]?t+=n[a]():t+=n[a]);return t}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.html=n,t.css=o;var u=r(3)},function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e,t){var r=(0,u.getStorage)(i);if(r.size===c){var n=r.keys();r.delete(n.next().value)}r.set(e,t)}function a(e){for(var t=(0,u.getStorage)(i),r=t.get(e),a=arguments.length,c=Array(a>1?a-1:0),s=1;s<a;s++)c[s-1]=arguments[s];var f=c[0],l=e.bind.apply(e,[null].concat(n(c)));if(r)return r.get(f)?r.get(f):(r.set(f,l),l);var d=new Map;return d.set(f,l),o(e,d),l}Object.defineProperty(t,"__esModule",{value:!0}),t.bind=a;var u=r(0),i="BOUNDS",c=100;(0,u.addStorage)(i,new Map)},function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t={},r=!0,n=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var i=a.value;t[i.name]=i.value}}catch(e){n=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(n)throw o}}return t}Object.defineProperty(t,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(2),d=r(9),m=r(0),p=r(4),y=function(e){var t=e.getPrototypeOf||function(e){return e.__proto__},r=e.setPrototypeOf||function(e,t){return e.__proto__=t,e},n="object"===("undefined"==typeof Reflect?"undefined":c(Reflect))?Reflect.construct:function(e,t,n){var o,a=[null];return a.push.apply(a,t),o=e.bind.apply(e,a),r(new o,n.prototype)};return function(e){var o=t(e);return r(e,r(function(){return n(o,arguments,t(this).constructor)},o))}}(Object),b=(0,m.getStorage)(m.storageKeys.PROPS),v=y(function(e){function t(){var e,r,n,u;o(this,t);for(var i=arguments.length,c=Array(i),s=0;s<i;s++)c[s]=arguments[s];return r=n=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),n.__defaultProps={},n.subscriptions=[],n.state={},n.mounted=!1,u=r,a(n,u)}return u(t,e),f(t,[{key:"beforeRender",value:function(){}},{key:"render",value:function(){return""}},{key:"afterRender",value:function(){}},{key:"subscribeToStore",value:function(){var e=this,t=!0,r=!1,n=void 0;try{for(var o,a=this.keys[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var u=o.value;!function(t){e.subscriptions.push((0,l.subscribe)(t,function(r){e.state[t]=r,d.render.call(e)})),e.state[t]=(0,l.getState)(t)}(u)}}catch(e){r=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(r)throw n}}}},{key:"connectedCallback",value:function(){this.subscribeToStore(),d.render.call(this),this.connected()}},{key:"connected",value:function(){}},{key:"disconnectedCallback",value:function(){var e=!0,t=!1,r=void 0;try{for(var n,o=this.subscriptions[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){n.value.unsubscribe()}}catch(e){t=!0,r=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw r}}(0,p.clearPropsStorage)(),(0,p.clearEventsStorage)(),this.disconnected()}},{key:"disconnected",value:function(){}},{key:"adoptedCallback",value:function(){this.subscribeToStore(),d.render.call(this),this.adopted()}},{key:"adopted",value:function(){}},{key:"attributeChangedCallback",value:function(e,t,r){this.mounted&&t!=r&&(this.propsChanged(s({},this.props,n({},e,r))),d.render.call(this))}},{key:"propsChanged",value:function(e){}},{key:"name",get:function(){return Object.getPrototypeOf(this).constructor.name}},{key:"isShadow",get:function(){return!0}},{key:"props",get:function(){return s({},this.__defaultProps,i(this.attributes),b.get(this)||{})},set:function(e){this.__defaultProps=e}},{key:"keys",get:function(){return[]}},{key:"styles",get:function(){return""}}],[{key:"observedAttributes",get:function(){return this.observableProps.map(function(e){for(var t="",r=0;r<e.length;r++)e[r]===e[r].toUpperCase()?t+="-"+e[r].toLowerCase():t+=e[r];return t})}},{key:"observableProps",get:function(){return[]}}]),t}(HTMLElement));t.default=v},function(e,t,r){"use strict";function n(e,t){var r=e.cloneNode(!1),n=t.cloneNode(!1);return k.get(t)?(0,g.default)(k.get(e),k.get(t))&&r.isEqualNode(n):r.isEqualNode(n)}function o(e,t){return!1===e.isEqualNode(t)}function a(e,t){if(e.length>t.length)for(var r=0;r<e.length;r++){if(e[r]&&!t[r])return[e[r]].concat(a(Array.from(e).slice(r+1),Array.from(t).slice(r)));if(!n(e[r],t[r])){var o=a(Array.from(e).slice(r+1),Array.from(t).slice(r));if(0===o.length)return[e[r]]}}return[]}function u(e,t){if(e.length>t.length)return t.length;for(var r=0,o=0;o<e.length;o++){var a=e[o].cloneNode(!1),u=t[o].cloneNode(!1);n(e[o],t[o])||f(a)||f(u)||r++}return r}function i(e,t,r){for(var n=document.createDocumentFragment(),o=t.length;o<r.length;o++)n.appendChild(r[o]);e.appendChild(n)}function c(e,t){var r=t.attributes||[],n=e.attributes||[];if(n.length>r.length)for(var o=0;o<n.length;o++){var a=n[o];t.hasAttribute(a.nodeName)||e.removeAttribute(a.nodeName)}for(var u=0;u<r.length;u++){var i=r[u];e.setAttribute(i.nodeName,i.nodeValue)}if(k.get(t)){var c=k.get(e),s=k.get(t);k.set(e,s),(0,g.default)(c,s)||(0,b.isCustomComponent)(e)&&y.call(e)}}function s(e,t){if((0,b.isCustomComponent)(e))return c(e,t);n(e,t)||c(e,t),m(e,t)}function f(e){return e.nodeType===Node.TEXT_NODE&&(!e.childNodes.length&&(e.innerText?!1===Boolean(e.innerText.trim()):e.innerHTML?!1===Boolean(e.innerHTML.trim()):!e.textContent||!1===Boolean(e.textContent.trim())))}function l(e){return!!e&&((e.nodeType===Node.ELEMENT_NODE||e.nodeType===Node.TEXT_NODE)&&"STYLE"!==e.nodeName&&!f(e))}function d(e,t,r,n){var o=a(r,n);return 0===n.length?e.parentNode.replaceChild(t,e):1===o.length?(o[0].parentNode.removeChild(o[0]),m(e,t)):u(r,n)>0?e.parentNode.replaceChild(t,e):i(e,r,n)}function m(e,t){var r=Array.from(e.childNodes).filter(l),n=Array.from(t.childNodes).filter(l);if(r.length!==n.length)return d(e,t,r,n);if(0===r.length&&0===n.length&&o(e,t))return e.parentNode.replaceChild(t,e);for(var a=0;a<r.length;a++)s(r[a],n[a])}function p(e){var t=document.createElement("template");return t.innerHTML=e,t}function y(){performance.mark("muskot start rendering"),this.beforeRender(),this.isShadow&&!this.shadowRoot&&(performance.mark("muskot attaching root"),this.attachShadow({mode:"open"}),performance.mark("muskot root attached"),performance.measure("muskot attach root","muskot attaching root","muskot root attached")),performance.mark("muskot create render DOM");var e=this.render();performance.mark("muskot render DOM created"),performance.measure("muskot component render result","muskot create render DOM","muskot render DOM created");var t=this.isShadow?this.shadowRoot:this;performance.mark("muskot create fragment");var r="string"==typeof e?p(e):e;if(performance.mark("muskot fragment created"),performance.measure("muskot fragment creation","muskot create fragment","muskot fragment created"),this.mounted){performance.mark("muskot insert styles before content on update");var n=document.createElement("style");n.innerHTML=this.styles,r.content.insertBefore(n,r.content.firstChild),performance.mark("muskot styles inserted on update"),performance.measure("muskot add styles by insertBefore","muskot insert styles before content on update","muskot styles inserted on update"),performance.mark("muskot update children"),m(t,r.content),performance.mark("muskot children updated"),performance.measure("muskot update component's children","muskot update children","muskot children updated")}else performance.mark("muskot insert style into component"),t.innerHTML="<style>"+this.styles+"</style>",performance.mark("muskot style inserted"),performance.measure("muskot style creation & insert by innerHTML","muskot insert style into component","muskot style inserted"),performance.mark("muskot append child with content"),t.appendChild(r.content),performance.mark("muskot content appended"),performance.measure("muskot append content on initial render","muskot append child with content","muskot content appended"),this.mounted=!0;performance.mark("muskot finish rendering"),performance.measure("muskot full render","muskot start rendering","muskot finish rendering"),this.afterRender()}Object.defineProperty(t,"__esModule",{value:!0}),t.render=y;var b=r(1),v=r(0),h=r(10),g=function(e){return e&&e.__esModule?e:{default:e}}(h),k=(0,v.getStorage)(v.storageKeys.PROPS)},function(e,t,r){"use strict";function n(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!==e&&t!==t}function o(e,t){if(n(e,t))return!0;if("object"!==(void 0===e?"undefined":a(e))||null===e||"object"!==(void 0===t?"undefined":a(t))||null===t)return!1;var r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(var i=0;i<r.length;i++)if(!u.call(t,r[i])||!n(e[r[i]],t[r[i]]))return!1;return!0}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=Object.prototype.hasOwnProperty;t.default=o}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vbWFpbi5qcyIsIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgYTQxNzhjNGFkOWMwNDk3NzZmNGEiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0b3JhZ2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3dlYi1jb21wb25lbnRzLmpzIiwid2VicGFjazovLy8uL3NyYy9zdG9yZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvaGFuZGxlcnMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxzLmpzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvdGFnLmpzIiwid2VicGFjazovLy8uL3NyYy9iaW5kLmpzIiwid2VicGFjazovLy8uL3NyYy9Db21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3JlbmRlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc2hhbGxvdy1lcXVhbC5qcyJdLCJuYW1lcyI6WyJtb2R1bGUiLCJleHBvcnRzIiwibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJpIiwibCIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsIm4iLCJfX2VzTW9kdWxlIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiX2RlZmluZVByb3BlcnR5Iiwib2JqIiwia2V5IiwidmFsdWUiLCJ3cml0YWJsZSIsInNldFN0b3JhZ2VEcml2ZXIiLCJkcml2ZXIiLCJzdG9yYWdlIiwibWlncmF0ZSIsImdldFN0b3JhZ2UiLCJnZXRJdGVtIiwiYWRkU3RvcmFnZSIsInNldEl0ZW0iLCJyZW1vdmVTdG9yYWdlIiwicmVtb3ZlSXRlbSIsIl9PYmplY3QkY3JlYXRlIiwicHJvcHNNYXAiLCJNYXAiLCJldmVudHNNYXAiLCJzdG9yYWdlS2V5cyIsIlBST1BTIiwiRVZFTlRTIiwiaXRlbXMiLCJjcmVhdGUiLCJ0aGlzIiwiZGVmYXVsdEltcGxlbWVudGF0aW9uIiwicmVnaXN0ZXJDb21wb25lbnQiLCJjb21wb25lbnQiLCJ3aW5kb3ciLCJjdXN0b21FbGVtZW50cyIsImRlZmluZSIsImN1cnJlbnRSZWFkeUNoZWNrIiwidGhlbiIsImlzQ3VzdG9tQ29tcG9uZW50Iiwibm9kZSIsIm5vZGVOYW1lIiwiaW5jbHVkZXMiLCJjdXJyZW50SW1wbGVtZW50YXRpb24iLCJzZXRJbXBsZW1lbnRhdGlvbiIsImltcGxlbWVudGF0aW9uIiwiUHJvbWlzZSIsInJlc29sdmUiLCJjb21wb25lbnRzUmVhZHkiLCJzZXRSZWFkeUNoZWNrIiwicmVhZHlDaGVjayIsImRlZmF1bHQiLCJzdHViSW1wbGVtZW50YXRpb24iLCJyZWR1Y2VycyIsInN1YnNjcmlwdGlvbnMiLCJhZGRSZWR1Y2VyIiwicmVkdWNlciIsInJlbW92ZVJlZHVjZXIiLCJzdWJzY3JpYmUiLCJjYiIsIl90aGlzIiwicHVzaCIsInVuc3Vic2NyaWJlIiwiZmlsdGVyIiwiZWwiLCJnZXRTdGF0ZSIsIm5ld1N0b3JlIiwiX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiIsIl9kaWRJdGVyYXRvckVycm9yIiwiX2l0ZXJhdG9yRXJyb3IiLCJ1bmRlZmluZWQiLCJfc3RlcCIsIl9pdGVyYXRvciIsIlN5bWJvbCIsIml0ZXJhdG9yIiwibmV4dCIsImRvbmUiLCJzdWJzY3JpcHRpb24iLCJlcnIiLCJyZXR1cm4iLCJzdG9yZSIsInJlZ2lzdGVyUmVkdWNlciIsInNob3VsZFNldFByb3BUb1N0b3JhZ2UiLCJfdHlwZW9mIiwiX3dlYkNvbXBvbmVudHMiLCJwYXJzZUF0dHJpYnV0ZSIsImF0dHJpYnV0ZSIsImFyZ3MiLCJtYXRjaCIsIm5vZGVWYWx1ZSIsImluZGV4IiwiTnVtYmVyIiwiX3V0aWxzIiwidGFnTmFtZVRvUHJvcCIsImNhbGxIYW5kbGVycyIsImVsZW1lbnQiLCJhdHRyaWJ1dGVzIiwibGVuZ3RoIiwiaGFuZGxlcnMiLCJmb3JFYWNoIiwiaGFuZGxlciIsImNoaWxkTm9kZXMiLCJhZGRUZW1wbGF0ZUhhbmRsZXIiLCJjdXN0b21IYW5kbGVycyIsInVuc2hpZnQiLCJhY2Nlc3NIYW5kbGVyIiwidW5sb2FkSGFuZGxlciIsInNldENvcmVIYW5kbGVyIiwiY29yZUhhbmRsZXJzIiwiX3NsaWNlZFRvQXJyYXkiLCJzbGljZUl0ZXJhdG9yIiwiYXJyIiwiX2FyciIsIl9uIiwiX2QiLCJfZSIsIl9zIiwiX2kiLCJBcnJheSIsImlzQXJyYXkiLCJUeXBlRXJyb3IiLCJjb25zdHJ1Y3RvciIsIl9leHRlbmRzIiwiYXNzaWduIiwidGFyZ2V0IiwiYXJndW1lbnRzIiwic291cmNlIiwiX3N0b3JhZ2UiLCJwcm9wc1N0b3JhZ2UiLCJldmVudHNTdG9yYWdlIiwiRXZlbnRzVGFnSGFuZGxlciIsInN0YXJ0c1dpdGgiLCJsaXN0ZW5lciIsInJlbW92ZUF0dHJpYnV0ZSIsImV2ZW50TmFtZSIsInRvTG93ZXJDYXNlIiwic2xpY2UiLCJhZGRFdmVudExpc3RlbmVyIiwibGlzdGVuZXJzIiwic2V0IiwiTWFwSGFuZGxlciIsIkhUTUxUZW1wbGF0ZUVsZW1lbnQiLCJoYXNBdHRyaWJ1dGUiLCJTdHJpbmciLCJnZXRBdHRyaWJ1dGUiLCJ0cGwiLCJpbm5lckhUTUwiLCJmcmFnbWVudCIsImRvY3VtZW50IiwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudCIsInJlcGxhY2UiLCJhcmciLCJ0cGxDYWxsIiwiYXBwZW5kQ2hpbGQiLCJjb250ZW50IiwidG1wVHBsIiwiY3JlYXRlRWxlbWVudCIsInBhcmVudE5vZGUiLCJyZXBsYWNlQ2hpbGQiLCJQcm9wc0hhbmRsZXIiLCJfcGFyc2VBdHRyaWJ1dGUiLCJfcGFyc2VBdHRyaWJ1dGUyIiwicHJvcE5hbWUiLCJwcm9wcyIsImV2ZW50cyIsIm1hcCIsImNsZWFyUHJvcHNTdG9yYWdlIiwic2V0VGltZW91dCIsImtleXMiLCJpc0Nvbm5lY3RlZCIsImRlbGV0ZSIsImNsZWFyRXZlbnRzU3RvcmFnZSIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yIiwiX2RpZEl0ZXJhdG9yRXJyb3IyIiwiX2l0ZXJhdG9yRXJyb3IyIiwiX3N0ZXAyIiwiX2l0ZXJhdG9yMiIsInNwbGl0IiwicmVkdWNlIiwiYWNjIiwidG9VcHBlckNhc2UiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiX3N0b3JlIiwiX2hhbmRsZXJzIiwiX3RhZyIsImh0bWwiLCJjc3MiLCJfYmluZCIsImJpbmQiLCJfQ29tcG9uZW50Iiwic3RyaW5ncyIsIl9sZW4iLCJfa2V5IiwidGVtcGxhdGUiLCJyZXN1bHQiLCJfbGVuMiIsIl9rZXkyIiwiX3RvQ29uc3VtYWJsZUFycmF5IiwiYXJyMiIsImZyb20iLCJhcHBlbmRUb1N0b3JhZ2UiLCJmbiIsIktFWSIsInNpemUiLCJNQVhfU1RPUkFHRV9TSVpFIiwiYm91bmQiLCJmaXJzdEFyZyIsImJvdW5kRm4iLCJhcHBseSIsImNvbmNhdCIsImZuTWFwIiwiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIiwic2VsZiIsIlJlZmVyZW5jZUVycm9yIiwiX2luaGVyaXRzIiwic3ViQ2xhc3MiLCJzdXBlckNsYXNzIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJwYXJzZUF0dHJpYnV0ZXMiLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwiZGVzY3JpcHRvciIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsIl9yZW5kZXIiLCJfZml4QmFiZWxFeHRlbmQiLCJPIiwiZ1BPIiwiZ2V0UHJvdG90eXBlT2YiLCJzUE8iLCJjb25zdHJ1Y3QiLCJSZWZsZWN0IiwiUGFyZW50IiwiQ2xhc3MiLCJhIiwiQ29tcG9uZW50IiwiX0hUTUxFbGVtZW50IiwiX3JlZiIsIl90ZW1wIiwiX3JldCIsIl9fZGVmYXVsdFByb3BzIiwic3RhdGUiLCJtb3VudGVkIiwiX3RoaXMyIiwicmVuZGVyIiwic3Vic2NyaWJlVG9TdG9yZSIsImNvbm5lY3RlZCIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24zIiwiX2RpZEl0ZXJhdG9yRXJyb3IzIiwiX2l0ZXJhdG9yRXJyb3IzIiwiX3N0ZXAzIiwiX2l0ZXJhdG9yMyIsImRpc2Nvbm5lY3RlZCIsImFkb3B0ZWQiLCJhdHRyaWJ1dGVOYW1lIiwib2xkVmFsdWUiLCJuZXdWYWx1ZSIsInByb3BzQ2hhbmdlZCIsIm5ld1Byb3BzIiwib2JzZXJ2YWJsZVByb3BzIiwicHJvcCIsInJlcyIsIkhUTUxFbGVtZW50Iiwibm9kZUVxdWFscyIsImVsZW1lbnROb2RlIiwiZnJhZ21lbnROb2RlIiwiZWxDbG9uZSIsImNsb25lTm9kZSIsImZyQ2xvbmUiLCJfc2hhbGxvd0VxdWFsMiIsImlzRXF1YWxOb2RlIiwiY29udGVudERpZmZlciIsImVsZW1lbnRzRGVsZXRlZCIsImVsZW1lbnROb2RlcyIsImZyYWdtZW50Tm9kZXMiLCJkZWxldGVkIiwiY2hpbGRyZW5DaGFuZ2VkQ291bnQiLCJjaGFuZ2VkIiwiaXNFbXB0eU5vZGUiLCJhcHBlbmRDaGlsZHJlbiIsImVsZW1lbnRDaGlsZHJlbiIsImZyYWdtZW50Q2hpbGRyZW4iLCJ1cGRhdGVBdHRyaWJ1dGVzIiwiZWxlbWVudEF0dHJpYnV0ZXMiLCJzZXRBdHRyaWJ1dGUiLCJlbFByb3BzIiwiZnJQcm9wcyIsInVwZGF0ZUVsZW1lbnQiLCJ1cGRhdGVDaGlsZHJlbiIsIm5vZGVUeXBlIiwiTm9kZSIsIlRFWFRfTk9ERSIsImlubmVyVGV4dCIsIkJvb2xlYW4iLCJ0cmltIiwidGV4dENvbnRlbnQiLCJub2RlRmlsdGVyIiwiRUxFTUVOVF9OT0RFIiwiaGFuZGxlQ2hpbGRyZW5Db3VudENoYW5nZWQiLCJyZW1vdmVDaGlsZCIsImNyZWF0ZUZyYWdtZW50RnJvbVN0ciIsInBlcmZvcm1hbmNlIiwibWFyayIsImJlZm9yZVJlbmRlciIsImlzU2hhZG93Iiwic2hhZG93Um9vdCIsImF0dGFjaFNoYWRvdyIsIm1vZGUiLCJtZWFzdXJlIiwicmVuZGVyUmVzIiwicm9vdCIsInN0eWxlIiwic3R5bGVzIiwiaW5zZXJ0QmVmb3JlIiwiZmlyc3RDaGlsZCIsImFmdGVyUmVuZGVyIiwiX3NoYWxsb3dFcXVhbCIsImlzIiwieCIsInkiLCJzaGFsbG93RXF1YWwiLCJvYmpBIiwib2JqQiIsImtleXNBIiwia2V5c0IiXSwibWFwcGluZ3MiOiJBQUFBQSxPQUFPQyxRQUNFLFNBQVVDLEdDR25CLFFBQUFDLEdBQUFDLEdBR0EsR0FBQUMsRUFBQUQsR0FDQSxNQUFBQyxHQUFBRCxHQUFBSCxPQUdBLElBQUFELEdBQUFLLEVBQUFELElBQ0FFLEVBQUFGLEVBQ0FHLEdBQUEsRUFDQU4sV0FVQSxPQU5BQyxHQUFBRSxHQUFBSSxLQUFBUixFQUFBQyxRQUFBRCxJQUFBQyxRQUFBRSxHQUdBSCxFQUFBTyxHQUFBLEVBR0FQLEVBQUFDLFFBdkJBLEdBQUFJLEtBNERBLE9BaENBRixHQUFBTSxFQUFBUCxFQUdBQyxFQUFBTyxFQUFBTCxFQUdBRixFQUFBUSxFQUFBLFNBQUFWLEVBQUFXLEVBQUFDLEdBQ0FWLEVBQUFXLEVBQUFiLEVBQUFXLElBQ0FHLE9BQUFDLGVBQUFmLEVBQUFXLEdBQ0FLLGNBQUEsRUFDQUMsWUFBQSxFQUNBQyxJQUFBTixLQU1BVixFQUFBaUIsRUFBQSxTQUFBcEIsR0FDQSxHQUFBYSxHQUFBYixLQUFBcUIsV0FDQSxXQUEyQixNQUFBckIsR0FBQSxTQUMzQixXQUFpQyxNQUFBQSxHQUVqQyxPQURBRyxHQUFBUSxFQUFBRSxFQUFBLElBQUFBLEdBQ0FBLEdBSUFWLEVBQUFXLEVBQUEsU0FBQVEsRUFBQUMsR0FBc0QsTUFBQVIsUUFBQVMsVUFBQUMsZUFBQWpCLEtBQUFjLEVBQUFDLElBR3REcEIsRUFBQXVCLEVBQUEsR0FHQXZCLElBQUF3QixFQUFBLEtET00sU0FBVTNCLEVBQVFDLEVBQVNFLEdBRWpDLFlBY0EsU0FBU3lCLEdBQWdCQyxFQUFLQyxFQUFLQyxHQUFpSyxNQUFwSkQsS0FBT0Qs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QixLQUFLb1YsRUFBTUMsRUFBTXZWLE1BQ2hDaVYsRUFBR0ksRUFBS0UsRUFBTXZWLElBQUtzVixFQUFLQyxFQUFNdlYsS0FFL0IsT0FBTyxDQUlmLFFBQU8sRVo4dkNYUyxPQUFPQyxlQUFlZixFQUFTLGNBQzNCOEIsT0FBTyxHQUdYLElBQUkwRSxHQUE0QixrQkFBWFYsU0FBb0QsZ0JBQXBCQSxRQUFPQyxTQUF3QixTQUFVbkUsR0FBTyxhQUFjQSxJQUFTLFNBQVVBLEdBQU8sTUFBT0EsSUFBeUIsa0JBQVhrRSxTQUF5QmxFLEVBQUlrSCxjQUFnQmhELFFBQVVsRSxJQUFRa0UsT0FBT3ZFLFVBQVksZUFBa0JLLElZenpDaFFKLEVBQWlCVixPQUFPUyxVQUFVQyxjWjYyQ3hDeEIsR0FBUXdFLFFZbnpDT2lSIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9XG4vKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGk6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bDogZmFsc2UsXG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuLyoqKioqKi8gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbi8qKioqKiovIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4vKioqKioqLyBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4vKioqKioqLyBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4vKioqKioqLyBcdFx0XHRcdGdldDogZ2V0dGVyXG4vKioqKioqLyBcdFx0XHR9KTtcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbi8qKioqKiovIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4vKioqKioqLyBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuLyoqKioqKi8gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbi8qKioqKiovIFx0XHRyZXR1cm4gZ2V0dGVyO1xuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNSk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9PYmplY3QkY3JlYXRlO1xuXG5leHBvcnRzLnNldFN0b3JhZ2VEcml2ZXIgPSBzZXRTdG9yYWdlRHJpdmVyO1xuZXhwb3J0cy5nZXRTdG9yYWdlID0gZ2V0U3RvcmFnZTtcbmV4cG9ydHMuYWRkU3RvcmFnZSA9IGFkZFN0b3JhZ2U7XG5leHBvcnRzLnJlbW92ZVN0b3JhZ2UgPSByZW1vdmVTdG9yYWdlO1xuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfVxuXG52YXIgcHJvcHNNYXAgPSBuZXcgTWFwKCk7XG5cbnZhciBldmVudHNNYXAgPSBuZXcgTWFwKCk7XG5cbnZhciBzdG9yYWdlS2V5cyA9IGV4cG9ydHMuc3RvcmFnZUtleXMgPSB7XG4gICAgUFJPUFM6IFwicHJvcHNcIixcbiAgICBFVkVOVFM6IFwiZXZlbnRzXCJcbn07XG5cbnZhciBkcml2ZXIgPSB7XG4gICAgaXRlbXM6IE9iamVjdC5jcmVhdGUoKF9PYmplY3QkY3JlYXRlID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfT2JqZWN0JGNyZWF0ZSwgc3RvcmFnZUtleXMuUFJPUFMsIHByb3BzTWFwKSwgX2RlZmluZVByb3BlcnR5KF9PYmplY3QkY3JlYXRlLCBzdG9yYWdlS2V5cy5FVkVOVFMsIGV2ZW50c01hcCksIF9PYmplY3QkY3JlYXRlKSksXG4gICAgc2V0SXRlbTogZnVuY3Rpb24gc2V0SXRlbShrZXksIHZhbHVlKSB7XG4gICAgICAgIHRoaXMuaXRlbXNba2V5XSA9IHZhbHVlO1xuICAgIH0sXG4gICAgZ2V0SXRlbTogZnVuY3Rpb24gZ2V0SXRlbShrZXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlbXNba2V5XTtcbiAgICB9LFxuICAgIHJlbW92ZUl0ZW06IGZ1bmN0aW9uIHJlbW92ZUl0ZW0oa2V5KSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLml0ZW1zW2tleV07XG4gICAgfSxcbiAgICBtaWdyYXRlOiBmdW5jdGlvbiBtaWdyYXRlKGRyaXZlcikge1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5pdGVtcykge1xuICAgICAgICAgICAgZHJpdmVyLnNldEl0ZW0oa2V5LCB0aGlzLml0ZW1zW2tleV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkcml2ZXI7XG4gICAgfVxufTtcblxudmFyIHN0b3JhZ2UgPSBleHBvcnRzLnN0b3JhZ2UgPSB7XG4gICAgZHJpdmVyOiBkcml2ZXJcbn07XG5cbmZ1bmN0aW9uIHNldFN0b3JhZ2VEcml2ZXIoZHJpdmVyKSB7XG4gICAgc3RvcmFnZS5kcml2ZXIgPSBzdG9yYWdlLmRyaXZlci5taWdyYXRlKGRyaXZlcik7XG59XG5cbmZ1bmN0aW9uIGdldFN0b3JhZ2Uoa2V5KSB7XG4gICAgcmV0dXJuIHN0b3JhZ2UuZHJpdmVyLmdldEl0ZW0oa2V5KTtcbn1cblxuZnVuY3Rpb24gYWRkU3RvcmFnZShrZXksIHZhbHVlKSB7XG4gICAgc3RvcmFnZS5kcml2ZXIuc2V0SXRlbShrZXksIHZhbHVlKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlU3RvcmFnZShrZXkpIHtcbiAgICBzdG9yYWdlLmRyaXZlci5yZW1vdmVJdGVtKGtleSk7XG59XG5cbi8qKiovIH0pLFxuLyogMSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cblxudmFyIGRlZmF1bHRJbXBsZW1lbnRhdGlvbiA9IHtcbiAgICByZWdpc3RlckNvbXBvbmVudDogZnVuY3Rpb24gcmVnaXN0ZXJDb21wb25lbnQobmFtZSwgY29tcG9uZW50KSB7XG4gICAgICAgIGlmICgnY3VzdG9tRWxlbWVudHMnIGluIHdpbmRvdykge1xuICAgICAgICAgICAgY3VzdG9tRWxlbWVudHMuZGVmaW5lKG5hbWUsIGNvbXBvbmVudCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjdXJyZW50UmVhZHlDaGVjaygpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIF9yZWdpc3RlckNvbXBvbmVudChuYW1lLCBjb21wb25lbnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGlzQ3VzdG9tQ29tcG9uZW50OiBmdW5jdGlvbiBpc0N1c3RvbUNvbXBvbmVudChub2RlKSB7XG4gICAgICAgIHJldHVybiBub2RlLm5vZGVOYW1lLmluY2x1ZGVzKFwiLVwiKTtcbiAgICB9XG59O1xuXG52YXIgY3VycmVudEltcGxlbWVudGF0aW9uID0gZGVmYXVsdEltcGxlbWVudGF0aW9uO1xuXG52YXIgX3JlZ2lzdGVyQ29tcG9uZW50ID0gZnVuY3Rpb24gX3JlZ2lzdGVyQ29tcG9uZW50KG5hbWUsIGNvbXBvbmVudCkge1xuICAgIHJldHVybiBjdXJyZW50SW1wbGVtZW50YXRpb24ucmVnaXN0ZXJDb21wb25lbnQobmFtZSwgY29tcG9uZW50KTtcbn07XG5cbnZhciBzZXRJbXBsZW1lbnRhdGlvbiA9IGV4cG9ydHMuc2V0SW1wbGVtZW50YXRpb24gPSBmdW5jdGlvbiBzZXRJbXBsZW1lbnRhdGlvbihpbXBsZW1lbnRhdGlvbikge1xuICAgIGN1cnJlbnRJbXBsZW1lbnRhdGlvbiA9IGltcGxlbWVudGF0aW9uO1xufTtcblxudmFyIGN1cnJlbnRSZWFkeUNoZWNrID0gZnVuY3Rpb24gY3VycmVudFJlYWR5Q2hlY2soKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xufTtcblxudmFyIGNvbXBvbmVudHNSZWFkeSA9IGV4cG9ydHMuY29tcG9uZW50c1JlYWR5ID0gZnVuY3Rpb24gY29tcG9uZW50c1JlYWR5KCkge1xuICAgIHJldHVybiBjdXJyZW50UmVhZHlDaGVjaygpO1xufTtcblxudmFyIHNldFJlYWR5Q2hlY2sgPSBleHBvcnRzLnNldFJlYWR5Q2hlY2sgPSBmdW5jdGlvbiBzZXRSZWFkeUNoZWNrKHJlYWR5Q2hlY2spIHtcbiAgICBjdXJyZW50UmVhZHlDaGVjayA9IHJlYWR5Q2hlY2s7XG59O1xuXG5leHBvcnRzLmRlZmF1bHQgPSBfcmVnaXN0ZXJDb21wb25lbnQ7XG52YXIgaXNDdXN0b21Db21wb25lbnQgPSBleHBvcnRzLmlzQ3VzdG9tQ29tcG9uZW50ID0gZnVuY3Rpb24gaXNDdXN0b21Db21wb25lbnQobm9kZSkge1xuICAgIHJldHVybiBjdXJyZW50SW1wbGVtZW50YXRpb24uaXNDdXN0b21Db21wb25lbnQobm9kZSk7XG59O1xuXG4vKioqLyB9KSxcbi8qIDIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG5cbnZhciBzdHViSW1wbGVtZW50YXRpb24gPSB7XG4gICAgcmVkdWNlcnM6IHt9LFxuICAgIHN1YnNjcmlwdGlvbnM6IHt9LFxuICAgIGFkZFJlZHVjZXI6IGZ1bmN0aW9uIGFkZFJlZHVjZXIoa2V5LCByZWR1Y2VyKSB7XG4gICAgICAgIHRoaXMucmVkdWNlcnNba2V5XSA9IHJlZHVjZXI7XG4gICAgfSxcbiAgICByZW1vdmVSZWR1Y2VyOiBmdW5jdGlvbiByZW1vdmVSZWR1Y2VyKGtleSkge1xuICAgICAgICBkZWxldGUgdGhpcy5yZWR1Y2Vyc1trZXldO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcbiAgICBzdWJzY3JpYmU6IGZ1bmN0aW9uIHN1YnNjcmliZShrZXksIGNiKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgICAgaWYgKCF0aGlzLnN1YnNjcmlwdGlvbnNba2V5XSkge1xuICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zW2tleV0gPSBbXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnNba2V5XS5wdXNoKGNiKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlOiBmdW5jdGlvbiB1bnN1YnNjcmliZSgpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5zdWJzY3JpcHRpb25zW2tleV0gPSBfdGhpcy5zdWJzY3JpcHRpb25zW2tleV0uZmlsdGVyKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWwgIT09IGNiO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0sXG4gICAgZ2V0U3RhdGU6IGZ1bmN0aW9uIGdldFN0YXRlKGtleSkge30sXG4gICAgbWlncmF0ZTogZnVuY3Rpb24gbWlncmF0ZShuZXdTdG9yZSkge1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5yZWR1Y2Vycykge1xuICAgICAgICAgICAgdmFyIHJlZHVjZXIgPSB0aGlzLnJlZHVjZXJzW2tleV07XG4gICAgICAgICAgICBuZXdTdG9yZS5hZGRSZWR1Y2VyKGtleSwgcmVkdWNlcik7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgX2tleSBpbiB0aGlzLnN1YnNjcmlwdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBfZGlkSXRlcmF0b3JFcnJvciA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIF9pdGVyYXRvckVycm9yID0gdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pdGVyYXRvciA9IHRoaXMuc3Vic2NyaXB0aW9uc1tfa2V5XVtTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSAoX3N0ZXAgPSBfaXRlcmF0b3IubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IF9zdGVwLnZhbHVlO1xuXG4gICAgICAgICAgICAgICAgICAgIG5ld1N0b3JlLnN1YnNjcmliZShfa2V5LCBzdWJzY3JpcHRpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBfaXRlcmF0b3JFcnJvciA9IGVycjtcbiAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uICYmIF9pdGVyYXRvci5yZXR1cm4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pdGVyYXRvci5yZXR1cm4oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ld1N0b3JlO1xuICAgIH1cbn07XG5cbnZhciBzdG9yZSA9IHtcbiAgICBjdXJyZW50SW1wbGVtZW50YXRpb246IHN0dWJJbXBsZW1lbnRhdGlvblxufTtcblxudmFyIHNldEltcGxlbWVudGF0aW9uID0gZXhwb3J0cy5zZXRJbXBsZW1lbnRhdGlvbiA9IGZ1bmN0aW9uIHNldEltcGxlbWVudGF0aW9uKGltcGxlbWVudGF0aW9uKSB7XG4gICAgc3RvcmUuY3VycmVudEltcGxlbWVudGF0aW9uID0gc3RvcmUuY3VycmVudEltcGxlbWVudGF0aW9uLm1pZ3JhdGUoaW1wbGVtZW50YXRpb24pO1xufTtcblxudmFyIHJlZ2lzdGVyUmVkdWNlciA9IGV4cG9ydHMucmVnaXN0ZXJSZWR1Y2VyID0gZnVuY3Rpb24gcmVnaXN0ZXJSZWR1Y2VyKGtleSwgcmVkdWNlcikge1xuICAgIHN0b3JlLmN1cnJlbnRJbXBsZW1lbnRhdGlvbi5hZGRSZWR1Y2VyKGtleSwgcmVkdWNlcik7XG59O1xudmFyIHJlbW92ZVJlZHVjZXIgPSBleHBvcnRzLnJlbW92ZVJlZHVjZXIgPSBmdW5jdGlvbiByZW1vdmVSZWR1Y2VyKGtleSkge1xuICAgIHN0b3JlLmN1cnJlbnRJbXBsZW1lbnRhdGlvbi5yZW1vdmVSZWR1Y2VyKGtleSk7XG59O1xudmFyIHN1YnNjcmliZSA9IGV4cG9ydHMuc3Vic2NyaWJlID0gZnVuY3Rpb24gc3Vic2NyaWJlKGtleSwgY2IpIHtcbiAgICByZXR1cm4gc3RvcmUuY3VycmVudEltcGxlbWVudGF0aW9uLnN1YnNjcmliZShrZXksIGNiKTtcbn07XG52YXIgZ2V0U3RhdGUgPSBleHBvcnRzLmdldFN0YXRlID0gZnVuY3Rpb24gZ2V0U3RhdGUoa2V5KSB7XG4gICAgcmV0dXJuIHN0b3JlLmN1cnJlbnRJbXBsZW1lbnRhdGlvbi5nZXRTdGF0ZShrZXkpO1xufTtcblxuLyoqKi8gfSksXG4vKiAzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9zbGljZWRUb0FycmF5ID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBzbGljZUl0ZXJhdG9yKGFyciwgaSkgeyB2YXIgX2FyciA9IFtdOyB2YXIgX24gPSB0cnVlOyB2YXIgX2QgPSBmYWxzZTsgdmFyIF9lID0gdW5kZWZpbmVkOyB0cnkgeyBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7IF9hcnIucHVzaChfcy52YWx1ZSk7IGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhazsgfSB9IGNhdGNoIChlcnIpIHsgX2QgPSB0cnVlOyBfZSA9IGVycjsgfSBmaW5hbGx5IHsgdHJ5IHsgaWYgKCFfbiAmJiBfaVtcInJldHVyblwiXSkgX2lbXCJyZXR1cm5cIl0oKTsgfSBmaW5hbGx5IHsgaWYgKF9kKSB0aHJvdyBfZTsgfSB9IHJldHVybiBfYXJyOyB9IHJldHVybiBmdW5jdGlvbiAoYXJyLCBpKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgcmV0dXJuIGFycjsgfSBlbHNlIGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGFycikpIHsgcmV0dXJuIHNsaWNlSXRlcmF0b3IoYXJyLCBpKTsgfSBlbHNlIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2VcIik7IH0gfTsgfSgpO1xuXG52YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbmV4cG9ydHMuY2FsbEhhbmRsZXJzID0gY2FsbEhhbmRsZXJzO1xuZXhwb3J0cy5hZGRUZW1wbGF0ZUhhbmRsZXIgPSBhZGRUZW1wbGF0ZUhhbmRsZXI7XG5leHBvcnRzLmFjY2Vzc0hhbmRsZXIgPSBhY2Nlc3NIYW5kbGVyO1xuZXhwb3J0cy51bmxvYWRIYW5kbGVyID0gdW5sb2FkSGFuZGxlcjtcbmV4cG9ydHMuc2V0Q29yZUhhbmRsZXIgPSBzZXRDb3JlSGFuZGxlcjtcblxudmFyIF9zdG9yYWdlID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIF91dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oNCk7XG5cbnZhciBfd2ViQ29tcG9uZW50cyA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9XG5cbnZhciBwcm9wc1N0b3JhZ2UgPSAoMCwgX3N0b3JhZ2UuZ2V0U3RvcmFnZSkoX3N0b3JhZ2Uuc3RvcmFnZUtleXMuUFJPUFMpO1xudmFyIGV2ZW50c1N0b3JhZ2UgPSAoMCwgX3N0b3JhZ2UuZ2V0U3RvcmFnZSkoX3N0b3JhZ2Uuc3RvcmFnZUtleXMuRVZFTlRTKTtcblxudmFyIEV2ZW50c1RhZ0hhbmRsZXIgPSB7XG4gICAgY2FsbDogZnVuY3Rpb24gY2FsbChub2RlLCBhcmdzKSB7XG4gICAgICAgIHZhciBhdHRyaWJ1dGVzID0gbm9kZS5hdHRyaWJ1dGVzIHx8IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGF0dHJpYnV0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBhdHRyaWJ1dGUgPSBhdHRyaWJ1dGVzW2ldO1xuICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZS5ub2RlTmFtZS5zdGFydHNXaXRoKFwib25cIikpIHtcbiAgICAgICAgICAgICAgICB2YXIgbWF0Y2ggPSBhdHRyaWJ1dGUubm9kZVZhbHVlLm1hdGNoKC9fX0FSR19fKFxcZCspLyk7XG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoICYmIG1hdGNoWzFdKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IE51bWJlcihtYXRjaFsxXSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsaXN0ZW5lciA9IGFyZ3NbaW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGxpc3RlbmVyID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUucmVtb3ZlQXR0cmlidXRlKGF0dHJpYnV0ZS5ub2RlTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXZlbnROYW1lID0gYXR0cmlidXRlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkuc2xpY2UoMik7XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBsaXN0ZW5lcik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsaXN0ZW5lcnMgPSBldmVudHNTdG9yYWdlLmdldChub2RlKSB8fCB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50c1N0b3JhZ2Uuc2V0KG5vZGUsIF9leHRlbmRzKHt9LCBsaXN0ZW5lcnMsIF9kZWZpbmVQcm9wZXJ0eSh7fSwgZXZlbnROYW1lLCBsaXN0ZW5lcikpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn07XG5cbnZhciBNYXBIYW5kbGVyID0ge1xuICAgIGNhbGw6IGZ1bmN0aW9uIGNhbGwobm9kZSwgYXJncykge1xuICAgICAgICBpZiAobm9kZSBpbnN0YW5jZW9mIEhUTUxUZW1wbGF0ZUVsZW1lbnQpIHtcbiAgICAgICAgICAgIGlmIChub2RlLmhhc0F0dHJpYnV0ZShcIm1hcFwiKSkge1xuICAgICAgICAgICAgICAgIHZhciBtYXRjaCA9IFN0cmluZyhub2RlLmdldEF0dHJpYnV0ZShcIm1hcFwiKSkubWF0Y2goL19fQVJHX18oXFxkKykvKTtcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2ggJiYgbWF0Y2hbMV0pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gTnVtYmVyKG1hdGNoWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFyciA9IGFyZ3NbaW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdHBsID0gbm9kZS5pbm5lckhUTUw7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgYXJyLmZvckVhY2goZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHBsLnJlcGxhY2UoL19fQVJHX18oXFxkKykvZywgZnVuY3Rpb24gKG1hdGNoLCBpbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhcmcgPSBhcmdzW2luZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGFyZyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cGxDYWxsID0gYXJnKGVsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRwbENhbGwgaW5zdGFuY2VvZiBIVE1MVGVtcGxhdGVFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZCh0cGxDYWxsLmNvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRtcFRwbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZW1wbGF0ZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcFRwbC5pbm5lckhUTUwgPSB0cGxDYWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQodG1wVHBsLmNvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhcmc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIC8vICRGbG93Rml4TWVcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChmcmFnbWVudCwgbm9kZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufTtcblxuZnVuY3Rpb24gc2hvdWxkU2V0UHJvcFRvU3RvcmFnZSh2YWx1ZSwgbm9kZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIiB8fCAodHlwZW9mIHZhbHVlID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YodmFsdWUpKSA9PT0gXCJvYmplY3RcIiB8fCAoMCwgX3dlYkNvbXBvbmVudHMuaXNDdXN0b21Db21wb25lbnQpKG5vZGUpO1xufVxuXG5mdW5jdGlvbiBwYXJzZUF0dHJpYnV0ZShhdHRyaWJ1dGUsIG5vZGUsIGFyZ3MpIHtcbiAgICB2YXIgbWF0Y2ggPSBhdHRyaWJ1dGUubm9kZVZhbHVlLm1hdGNoKC9fX0FSR19fKFxcZCspLyk7XG4gICAgaWYgKG1hdGNoICYmIG1hdGNoWzFdKSB7XG4gICAgICAgIHZhciBpbmRleCA9IE51bWJlcihtYXRjaFsxXSk7XG4gICAgICAgIHZhciBub2RlTmFtZSA9IGF0dHJpYnV0ZS5ub2RlTmFtZTtcbiAgICAgICAgdmFyIHByb3BOYW1lID0gKDAsIF91dGlscy50YWdOYW1lVG9Qcm9wKShub2RlTmFtZSk7XG4gICAgICAgIHZhciB2YWx1ZSA9IGFyZ3NbaW5kZXhdO1xuICAgICAgICByZXR1cm4gW3Byb3BOYW1lLCB2YWx1ZV07XG4gICAgfVxuICAgIHJldHVybiBbYXR0cmlidXRlLm5vZGVOYW1lLCBhdHRyaWJ1dGUubm9kZVZhbHVlXTtcbn1cblxudmFyIFByb3BzSGFuZGxlciA9IHtcbiAgICBjYWxsOiBmdW5jdGlvbiBjYWxsKG5vZGUsIGFyZ3MpIHtcbiAgICAgICAgdmFyIGF0dHJpYnV0ZXMgPSBub2RlLmF0dHJpYnV0ZXMgfHwgW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXR0cmlidXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGF0dHJpYnV0ZSA9IGF0dHJpYnV0ZXNbaV07XG5cbiAgICAgICAgICAgIHZhciBfcGFyc2VBdHRyaWJ1dGUgPSBwYXJzZUF0dHJpYnV0ZShhdHRyaWJ1dGUsIG5vZGUsIGFyZ3MpLFxuICAgICAgICAgICAgICAgIF9wYXJzZUF0dHJpYnV0ZTIgPSBfc2xpY2VkVG9BcnJheShfcGFyc2VBdHRyaWJ1dGUsIDIpLFxuICAgICAgICAgICAgICAgIHByb3BOYW1lID0gX3BhcnNlQXR0cmlidXRlMlswXSxcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IF9wYXJzZUF0dHJpYnV0ZTJbMV07XG5cbiAgICAgICAgICAgIGlmIChzaG91bGRTZXRQcm9wVG9TdG9yYWdlKHZhbHVlLCBub2RlKSkge1xuICAgICAgICAgICAgICAgIHZhciBwcm9wcyA9IHByb3BzU3RvcmFnZS5nZXQobm9kZSkgfHwge307XG4gICAgICAgICAgICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUoYXR0cmlidXRlLm5vZGVOYW1lKTtcbiAgICAgICAgICAgICAgICBwcm9wc1N0b3JhZ2Uuc2V0KG5vZGUsIF9leHRlbmRzKHt9LCBwcm9wcywgX2RlZmluZVByb3BlcnR5KHt9LCBwcm9wTmFtZSwgdmFsdWUpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG52YXIgY29yZUhhbmRsZXJzID0ge1xuICAgIGV2ZW50czogRXZlbnRzVGFnSGFuZGxlcixcbiAgICBtYXA6IE1hcEhhbmRsZXIsXG4gICAgcHJvcHM6IFByb3BzSGFuZGxlclxufTtcblxudmFyIGN1c3RvbUhhbmRsZXJzID0ge307XG5cbnZhciBoYW5kbGVycyA9IFtjb3JlSGFuZGxlcnMubWFwLmNhbGwsIGNvcmVIYW5kbGVycy5ldmVudHMuY2FsbCwgY29yZUhhbmRsZXJzLnByb3BzLmNhbGxdO1xuXG5mdW5jdGlvbiBjYWxsSGFuZGxlcnMoZWxlbWVudCwgYXJncykge1xuICAgIGlmICgoZWxlbWVudC5hdHRyaWJ1dGVzIHx8IFtdKS5sZW5ndGgpIHtcbiAgICAgICAgaGFuZGxlcnMuZm9yRWFjaChmdW5jdGlvbiAoaGFuZGxlcikge1xuICAgICAgICAgICAgaGFuZGxlcihlbGVtZW50LCBhcmdzKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudC5jaGlsZE5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNhbGxIYW5kbGVycyhlbGVtZW50LmNoaWxkTm9kZXNbaV0sIGFyZ3MpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gYWRkVGVtcGxhdGVIYW5kbGVyKGtleSwgaGFuZGxlcikge1xuICAgIGN1c3RvbUhhbmRsZXJzW2tleV0gPSBoYW5kbGVyO1xuICAgIC8vICRGbG93Rml4TWVcbiAgICBoYW5kbGVycy51bnNoaWZ0KGhhbmRsZXIuY2FsbCk7XG59XG5cbmZ1bmN0aW9uIGFjY2Vzc0hhbmRsZXIoa2V5KSB7XG4gICAgcmV0dXJuIGN1c3RvbUhhbmRsZXJzW2tleV07XG59XG5cbmZ1bmN0aW9uIHVubG9hZEhhbmRsZXIoa2V5KSB7XG4gICAgdmFyIGhhbmRsZXIgPSBjdXN0b21IYW5kbGVyc1trZXldO1xuICAgIGhhbmRsZXJzID0gaGFuZGxlcnMuZmlsdGVyKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICByZXR1cm4gZWwgIT09IGhhbmRsZXIuY2FsbDtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gc2V0Q29yZUhhbmRsZXIoa2V5LCBoYW5kbGVyKSB7XG4gICAgY29yZUhhbmRsZXJzW2tleV0gPSBoYW5kbGVyO1xufVxuXG4vKioqLyB9KSxcbi8qIDQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5jbGVhclByb3BzU3RvcmFnZSA9IGNsZWFyUHJvcHNTdG9yYWdlO1xuZXhwb3J0cy5jbGVhckV2ZW50c1N0b3JhZ2UgPSBjbGVhckV2ZW50c1N0b3JhZ2U7XG5leHBvcnRzLnRhZ05hbWVUb1Byb3AgPSB0YWdOYW1lVG9Qcm9wO1xuXG52YXIgX3N0b3JhZ2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgcHJvcHNTdG9yYWdlID0gKDAsIF9zdG9yYWdlLmdldFN0b3JhZ2UpKF9zdG9yYWdlLnN0b3JhZ2VLZXlzLlBST1BTKTtcblxudmFyIGV2ZW50c1N0b3JhZ2UgPSAoMCwgX3N0b3JhZ2UuZ2V0U3RvcmFnZSkoX3N0b3JhZ2Uuc3RvcmFnZUtleXMuRVZFTlRTKTtcblxuZnVuY3Rpb24gY2xlYXJQcm9wc1N0b3JhZ2UoKSB7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZTtcbiAgICAgICAgdmFyIF9kaWRJdGVyYXRvckVycm9yID0gZmFsc2U7XG4gICAgICAgIHZhciBfaXRlcmF0b3JFcnJvciA9IHVuZGVmaW5lZDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gcHJvcHNTdG9yYWdlLmtleXMoKVtTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSAoX3N0ZXAgPSBfaXRlcmF0b3IubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWUpIHtcbiAgICAgICAgICAgICAgICB2YXIga2V5ID0gX3N0ZXAudmFsdWU7XG5cbiAgICAgICAgICAgICAgICBpZiAoIWtleS5pc0Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICBwcm9wc1N0b3JhZ2UuZGVsZXRlKGtleSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgIF9pdGVyYXRvckVycm9yID0gZXJyO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gJiYgX2l0ZXJhdG9yLnJldHVybikge1xuICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3IucmV0dXJuKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGNsZWFyRXZlbnRzU3RvcmFnZSgpIHtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gdHJ1ZTtcbiAgICAgICAgdmFyIF9kaWRJdGVyYXRvckVycm9yMiA9IGZhbHNlO1xuICAgICAgICB2YXIgX2l0ZXJhdG9yRXJyb3IyID0gdW5kZWZpbmVkO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IyID0gZXZlbnRzU3RvcmFnZS5rZXlzKClbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDI7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSAoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiA9IHRydWUpIHtcbiAgICAgICAgICAgICAgICB2YXIga2V5ID0gX3N0ZXAyLnZhbHVlO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFrZXkuaXNDb25uZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRzU3RvcmFnZS5kZWxldGUoa2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgX2RpZEl0ZXJhdG9yRXJyb3IyID0gdHJ1ZTtcbiAgICAgICAgICAgIF9pdGVyYXRvckVycm9yMiA9IGVycjtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiAmJiBfaXRlcmF0b3IyLnJldHVybikge1xuICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3IyLnJldHVybigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yMikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIHRhZ05hbWVUb1Byb3Aobm9kZU5hbWUpIHtcbiAgICByZXR1cm4gbm9kZU5hbWUuc3BsaXQoXCItXCIpLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBuZXh0KSB7XG4gICAgICAgIGlmIChuZXh0KSB7XG4gICAgICAgICAgICByZXR1cm4gYWNjICsgbmV4dFswXS50b1VwcGVyQ2FzZSgpICsgbmV4dC5zbGljZSgxKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYWNjO1xuICAgIH0pO1xufVxuXG4vKioqLyB9KSxcbi8qIDUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX3dlYkNvbXBvbmVudHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJjaGFuZ2VXZWJDb21wb25lbnRzSW1wbGVtZW5hdGlvblwiLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIF93ZWJDb21wb25lbnRzLnNldEltcGxlbWVudGF0aW9uO1xuICAgIH1cbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiY29tcG9uZW50c1JlYWR5XCIsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gX3dlYkNvbXBvbmVudHMuY29tcG9uZW50c1JlYWR5O1xuICAgIH1cbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiY2hhbmdlV2ViQ29tcG9uZW50c1JlYWR5Q2hlY2tcIiwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBfd2ViQ29tcG9uZW50cy5zZXRSZWFkeUNoZWNrO1xuICAgIH1cbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwicmVnaXN0ZXJDb21wb25lbnRcIiwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF93ZWJDb21wb25lbnRzKS5kZWZhdWx0O1xuICAgIH1cbn0pO1xuXG52YXIgX3N0b3JlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiY2hhbmdlU3RvcmVJbXBsZW1lbnRhdGlvblwiLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIF9zdG9yZS5zZXRJbXBsZW1lbnRhdGlvbjtcbiAgICB9XG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcInJlZ2lzdGVyUmVkdWNlclwiLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIF9zdG9yZS5yZWdpc3RlclJlZHVjZXI7XG4gICAgfVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJyZW1vdmVSZWR1Y2VyXCIsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gX3N0b3JlLnJlbW92ZVJlZHVjZXI7XG4gICAgfVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJzdWJzY3JpYmVcIiwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBfc3RvcmUuc3Vic2NyaWJlO1xuICAgIH1cbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiZ2V0U3RhdGVcIiwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBfc3RvcmUuZ2V0U3RhdGU7XG4gICAgfVxufSk7XG5cbnZhciBfaGFuZGxlcnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJhZGRUZW1wbGF0ZUhhbmRsZXJcIiwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBfaGFuZGxlcnMuYWRkVGVtcGxhdGVIYW5kbGVyO1xuICAgIH1cbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwic2V0Q29yZUhhbmRsZXJcIiwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBfaGFuZGxlcnMuc2V0Q29yZUhhbmRsZXI7XG4gICAgfVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJ1bmxvYWRIYW5kbGVyXCIsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gX2hhbmRsZXJzLnVubG9hZEhhbmRsZXI7XG4gICAgfVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJhY2Nlc3NIYW5kbGVyXCIsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gX2hhbmRsZXJzLmFjY2Vzc0hhbmRsZXI7XG4gICAgfVxufSk7XG5cbnZhciBfdGFnID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiaHRtbFwiLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIF90YWcuaHRtbDtcbiAgICB9XG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcImNzc1wiLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIF90YWcuY3NzO1xuICAgIH1cbn0pO1xuXG52YXIgX3N0b3JhZ2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJnZXRTdG9yYWdlXCIsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gX3N0b3JhZ2UuZ2V0U3RvcmFnZTtcbiAgICB9XG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcImFkZFN0b3JhZ2VcIiwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBfc3RvcmFnZS5hZGRTdG9yYWdlO1xuICAgIH1cbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwicmVtb3ZlU3RvcmFnZVwiLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIF9zdG9yYWdlLnJlbW92ZVN0b3JhZ2U7XG4gICAgfVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJzZXRTdG9yYWdlRHJpdmVyXCIsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gX3N0b3JhZ2Uuc2V0U3RvcmFnZURyaXZlcjtcbiAgICB9XG59KTtcblxudmFyIF9iaW5kID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiYmluZFwiLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIF9iaW5kLmJpbmQ7XG4gICAgfVxufSk7XG5cbnZhciBfQ29tcG9uZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiQ29tcG9uZW50XCIsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQ29tcG9uZW50KS5kZWZhdWx0O1xuICAgIH1cbn0pO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG4vKioqLyB9KSxcbi8qIDYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cbmV4cG9ydHMuaHRtbCA9IGh0bWw7XG5leHBvcnRzLmNzcyA9IGNzcztcblxudmFyIF9oYW5kbGVycyA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cbmZ1bmN0aW9uIGh0bWwoc3RyaW5ncykge1xuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgICBhcmdzW19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICBpZiAoIWFyZ3MubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBzdHJpbmdzWzBdO1xuICAgIH1cblxuICAgIHZhciBBUkcgPSBcIl9fQVJHX19cIjtcbiAgICB2YXIgdHBsID0gXCJcIjtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0cmluZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdHBsICs9IHN0cmluZ3NbaV07XG4gICAgICAgIGlmIChpIDwgc3RyaW5ncy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGFyZ3NbaV0gPT09IFwiZnVuY3Rpb25cIiB8fCBfdHlwZW9mKGFyZ3NbaV0pID09PSBcIm9iamVjdFwiKSB0cGwgKz0gQVJHICsgaTtlbHNlIHRwbCArPSBhcmdzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHZhciB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZW1wbGF0ZVwiKTtcbiAgICB0ZW1wbGF0ZS5pbm5lckhUTUwgPSB0cGw7XG4gICAgKDAsIF9oYW5kbGVycy5jYWxsSGFuZGxlcnMpKHRlbXBsYXRlLmNvbnRlbnQsIGFyZ3MpO1xuICAgIHJldHVybiB0ZW1wbGF0ZTtcbn1cblxuZnVuY3Rpb24gY3NzKHN0cmluZ3MpIHtcbiAgICB2YXIgcmVzdWx0ID0gJyc7XG5cbiAgICBmb3IgKHZhciBfbGVuMiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuMiA+IDEgPyBfbGVuMiAtIDEgOiAwKSwgX2tleTIgPSAxOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7XG4gICAgICAgIGFyZ3NbX2tleTIgLSAxXSA9IGFyZ3VtZW50c1tfa2V5Ml07XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHJpbmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHJlc3VsdCArPSBzdHJpbmdzW2ldO1xuICAgICAgICBpZiAoaSA8IHN0cmluZ3MubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBhcmdzW2ldID09PSBcImZ1bmN0aW9uXCIpIHJlc3VsdCArPSBhcmdzW2ldKCk7ZWxzZSByZXN1bHQgKz0gYXJnc1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKioqLyB9KSxcbi8qIDcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5iaW5kID0gYmluZDtcblxudmFyIF9zdG9yYWdlID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gQXJyYXkoYXJyLmxlbmd0aCk7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfSBlbHNlIHsgcmV0dXJuIEFycmF5LmZyb20oYXJyKTsgfSB9XG5cbnZhciBLRVkgPSBcIkJPVU5EU1wiO1xudmFyIE1BWF9TVE9SQUdFX1NJWkUgPSAxMDA7XG5cbigwLCBfc3RvcmFnZS5hZGRTdG9yYWdlKShLRVksIG5ldyBNYXAoKSk7XG5cbmZ1bmN0aW9uIGFwcGVuZFRvU3RvcmFnZShmbiwgdmFsdWUpIHtcbiAgICB2YXIgc3RvcmFnZSA9ICgwLCBfc3RvcmFnZS5nZXRTdG9yYWdlKShLRVkpO1xuICAgIGlmIChzdG9yYWdlLnNpemUgPT09IE1BWF9TVE9SQUdFX1NJWkUpIHtcbiAgICAgICAgdmFyIGtleXMgPSBzdG9yYWdlLmtleXMoKTtcbiAgICAgICAgLy8gJEZsb3dGaXhNZVxuICAgICAgICBzdG9yYWdlLmRlbGV0ZShrZXlzLm5leHQoKS52YWx1ZSk7XG4gICAgfVxuICAgIHN0b3JhZ2Uuc2V0KGZuLCB2YWx1ZSk7XG59XG5cbmZ1bmN0aW9uIGJpbmQoZm4pIHtcbiAgICB2YXIgc3RvcmFnZSA9ICgwLCBfc3RvcmFnZS5nZXRTdG9yYWdlKShLRVkpO1xuICAgIHZhciBib3VuZCA9IHN0b3JhZ2UuZ2V0KGZuKTtcblxuICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgICBhcmdzW19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICB2YXIgZmlyc3RBcmcgPSBhcmdzWzBdO1xuICAgIHZhciBib3VuZEZuID0gZm4uYmluZC5hcHBseShmbiwgW251bGxdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoYXJncykpKTtcbiAgICBpZiAoYm91bmQpIHtcbiAgICAgICAgaWYgKCFib3VuZC5nZXQoZmlyc3RBcmcpKSB7XG4gICAgICAgICAgICBib3VuZC5zZXQoZmlyc3RBcmcsIGJvdW5kRm4pO1xuICAgICAgICAgICAgcmV0dXJuIGJvdW5kRm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gJEZsb3dGaXhNZVxuICAgICAgICByZXR1cm4gYm91bmQuZ2V0KGZpcnN0QXJnKTtcbiAgICB9XG5cbiAgICB2YXIgZm5NYXAgPSBuZXcgTWFwKCk7XG4gICAgZm5NYXAuc2V0KGZpcnN0QXJnLCBib3VuZEZuKTtcbiAgICBhcHBlbmRUb1N0b3JhZ2UoZm4sIGZuTWFwKTtcbiAgICByZXR1cm4gYm91bmRGbjtcbn1cblxuLyoqKi8gfSksXG4vKiA4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX3N0b3JlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblxudmFyIF9yZW5kZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXG52YXIgX3N0b3JhZ2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3V0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgX2ZpeEJhYmVsRXh0ZW5kID0gZnVuY3Rpb24gKE8pIHtcbiAgICB2YXIgZ1BPID0gTy5nZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiAobykge1xuICAgICAgICByZXR1cm4gby5fX3Byb3RvX187XG4gICAgfSxcbiAgICAgICAgc1BPID0gTy5zZXRQcm90b3R5cGVPZiB8fCBmdW5jdGlvbiAobywgcCkge1xuICAgICAgICBvLl9fcHJvdG9fXyA9IHA7XG4gICAgICAgIHJldHVybiBvO1xuICAgIH0sXG4gICAgICAgIGNvbnN0cnVjdCA9ICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJ1bmRlZmluZWRcIiA/IFwidW5kZWZpbmVkXCIgOiBfdHlwZW9mKFJlZmxlY3QpKSA9PT0gJ29iamVjdCcgPyBSZWZsZWN0LmNvbnN0cnVjdCA6IGZ1bmN0aW9uIChQYXJlbnQsIGFyZ3MsIENsYXNzKSB7XG4gICAgICAgIHZhciBDb25zdHJ1Y3RvcixcbiAgICAgICAgICAgIGEgPSBbbnVsbF07XG4gICAgICAgIGEucHVzaC5hcHBseShhLCBhcmdzKTtcbiAgICAgICAgQ29uc3RydWN0b3IgPSBQYXJlbnQuYmluZC5hcHBseShQYXJlbnQsIGEpO1xuICAgICAgICByZXR1cm4gc1BPKG5ldyBDb25zdHJ1Y3RvcigpLCBDbGFzcy5wcm90b3R5cGUpO1xuICAgIH07XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gZml4QmFiZWxFeHRlbmQoQ2xhc3MpIHtcbiAgICAgICAgdmFyIFBhcmVudCA9IGdQTyhDbGFzcyk7XG4gICAgICAgIHJldHVybiBzUE8oQ2xhc3MsIHNQTyhmdW5jdGlvbiBTdXBlcigpIHtcbiAgICAgICAgICAgIHJldHVybiBjb25zdHJ1Y3QoUGFyZW50LCBhcmd1bWVudHMsIGdQTyh0aGlzKS5jb25zdHJ1Y3Rvcik7XG4gICAgICAgIH0sIFBhcmVudCkpO1xuICAgIH07XG59KE9iamVjdCk7XG5cbnZhciBwcm9wc1N0b3JhZ2UgPSAoMCwgX3N0b3JhZ2UuZ2V0U3RvcmFnZSkoX3N0b3JhZ2Uuc3RvcmFnZUtleXMuUFJPUFMpO1xuXG5mdW5jdGlvbiBwYXJzZUF0dHJpYnV0ZXMoYXR0cmlidXRlcykge1xuICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWU7XG4gICAgdmFyIF9kaWRJdGVyYXRvckVycm9yID0gZmFsc2U7XG4gICAgdmFyIF9pdGVyYXRvckVycm9yID0gdW5kZWZpbmVkO1xuXG4gICAgdHJ5IHtcbiAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gYXR0cmlidXRlc1tTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSAoX3N0ZXAgPSBfaXRlcmF0b3IubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWUpIHtcbiAgICAgICAgICAgIHZhciBhdHRyaWJ1dGUgPSBfc3RlcC52YWx1ZTtcblxuICAgICAgICAgICAgcmVzdWx0W2F0dHJpYnV0ZS5uYW1lXSA9IGF0dHJpYnV0ZS52YWx1ZTtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBfZGlkSXRlcmF0b3JFcnJvciA9IHRydWU7XG4gICAgICAgIF9pdGVyYXRvckVycm9yID0gZXJyO1xuICAgIH0gZmluYWxseSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gJiYgX2l0ZXJhdG9yLnJldHVybikge1xuICAgICAgICAgICAgICAgIF9pdGVyYXRvci5yZXR1cm4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcikge1xuICAgICAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cblxudmFyIENvbXBvbmVudCA9IF9maXhCYWJlbEV4dGVuZChmdW5jdGlvbiAoX0hUTUxFbGVtZW50KSB7XG4gICAgX2luaGVyaXRzKENvbXBvbmVudCwgX0hUTUxFbGVtZW50KTtcblxuICAgIGZ1bmN0aW9uIENvbXBvbmVudCgpIHtcbiAgICAgICAgdmFyIF9yZWY7XG5cbiAgICAgICAgdmFyIF90ZW1wLCBfdGhpcywgX3JldDtcblxuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ29tcG9uZW50KTtcblxuICAgICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBfcmV0ID0gKF90ZW1wID0gKF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKF9yZWYgPSBDb21wb25lbnQuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihDb21wb25lbnQpKS5jYWxsLmFwcGx5KF9yZWYsIFt0aGlzXS5jb25jYXQoYXJncykpKSwgX3RoaXMpLCBfdGhpcy5fX2RlZmF1bHRQcm9wcyA9IHt9LCBfdGhpcy5zdWJzY3JpcHRpb25zID0gW10sIF90aGlzLnN0YXRlID0ge30sIF90aGlzLm1vdW50ZWQgPSBmYWxzZSwgX3RlbXApLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihfdGhpcywgX3JldCk7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKENvbXBvbmVudCwgW3tcbiAgICAgICAga2V5OiBcImJlZm9yZVJlbmRlclwiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYmVmb3JlUmVuZGVyKCkge31cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJyZW5kZXJcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImFmdGVyUmVuZGVyXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBhZnRlclJlbmRlcigpIHt9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwic3Vic2NyaWJlVG9TdG9yZVwiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc3Vic2NyaWJlVG9TdG9yZSgpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICAgICAgICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcChrZXkpIHtcbiAgICAgICAgICAgICAgICBfdGhpczIuc3Vic2NyaXB0aW9ucy5wdXNoKCgwLCBfc3RvcmUuc3Vic2NyaWJlKShrZXksIGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpczIuc3RhdGVba2V5XSA9IHN0YXRlO1xuICAgICAgICAgICAgICAgICAgICBfcmVuZGVyLnJlbmRlci5jYWxsKF90aGlzMik7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIF90aGlzMi5zdGF0ZVtrZXldID0gKDAsIF9zdG9yZS5nZXRTdGF0ZSkoa2V5KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiA9IHRydWU7XG4gICAgICAgICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IyID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgX2l0ZXJhdG9yRXJyb3IyID0gdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjIgPSB0aGlzLmtleXNbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDI7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSAoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiA9IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IF9zdGVwMi52YWx1ZTtcblxuICAgICAgICAgICAgICAgICAgICBfbG9vcChrZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yMiA9IHRydWU7XG4gICAgICAgICAgICAgICAgX2l0ZXJhdG9yRXJyb3IyID0gZXJyO1xuICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yICYmIF9pdGVyYXRvcjIucmV0dXJuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3IyLnJldHVybigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3IyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwiY29ubmVjdGVkQ2FsbGJhY2tcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICAgICAgdGhpcy5zdWJzY3JpYmVUb1N0b3JlKCk7XG4gICAgICAgICAgICBfcmVuZGVyLnJlbmRlci5jYWxsKHRoaXMpO1xuXG4gICAgICAgICAgICB0aGlzLmNvbm5lY3RlZCgpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwiY29ubmVjdGVkXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb25uZWN0ZWQoKSB7fVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImRpc2Nvbm5lY3RlZENhbGxiYWNrXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyA9IHRydWU7XG4gICAgICAgICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IzID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgX2l0ZXJhdG9yRXJyb3IzID0gdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjMgPSB0aGlzLnN1YnNjcmlwdGlvbnNbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDM7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjMgPSAoX3N0ZXAzID0gX2l0ZXJhdG9yMy5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyA9IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IF9zdGVwMy52YWx1ZTtcblxuICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvcjMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIF9pdGVyYXRvckVycm9yMyA9IGVycjtcbiAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyAmJiBfaXRlcmF0b3IzLnJldHVybikge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yMy5yZXR1cm4oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcjMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yMztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgKDAsIF91dGlscy5jbGVhclByb3BzU3RvcmFnZSkoKTtcbiAgICAgICAgICAgICgwLCBfdXRpbHMuY2xlYXJFdmVudHNTdG9yYWdlKSgpO1xuXG4gICAgICAgICAgICB0aGlzLmRpc2Nvbm5lY3RlZCgpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwiZGlzY29ubmVjdGVkXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNjb25uZWN0ZWQoKSB7fVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImFkb3B0ZWRDYWxsYmFja1wiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYWRvcHRlZENhbGxiYWNrKCkge1xuICAgICAgICAgICAgdGhpcy5zdWJzY3JpYmVUb1N0b3JlKCk7XG4gICAgICAgICAgICBfcmVuZGVyLnJlbmRlci5jYWxsKHRoaXMpO1xuXG4gICAgICAgICAgICB0aGlzLmFkb3B0ZWQoKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImFkb3B0ZWRcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFkb3B0ZWQoKSB7fVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKGF0dHJpYnV0ZU5hbWUsIG9sZFZhbHVlLCBuZXdWYWx1ZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMubW91bnRlZCAmJiBvbGRWYWx1ZSAhPSBuZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcHNDaGFuZ2VkKF9leHRlbmRzKHt9LCB0aGlzLnByb3BzLCBfZGVmaW5lUHJvcGVydHkoe30sIGF0dHJpYnV0ZU5hbWUsIG5ld1ZhbHVlKSkpO1xuICAgICAgICAgICAgICAgIF9yZW5kZXIucmVuZGVyLmNhbGwodGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJwcm9wc0NoYW5nZWRcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHByb3BzQ2hhbmdlZChuZXdQcm9wcykge31cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJuYW1lXCIsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5nZXRQcm90b3R5cGVPZih0aGlzKS5jb25zdHJ1Y3Rvci5uYW1lO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwiaXNTaGFkb3dcIixcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcInByb3BzXCIsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIF9leHRlbmRzKHt9LCB0aGlzLl9fZGVmYXVsdFByb3BzLCBwYXJzZUF0dHJpYnV0ZXModGhpcy5hdHRyaWJ1dGVzKSwgcHJvcHNTdG9yYWdlLmdldCh0aGlzKSB8fCB7fSk7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gc2V0KHByb3BzKSB7XG4gICAgICAgICAgICB0aGlzLl9fZGVmYXVsdFByb3BzID0gcHJvcHM7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJrZXlzXCIsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwic3R5bGVzXCIsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgIH1cbiAgICB9XSwgW3tcbiAgICAgICAga2V5OiBcIm9ic2VydmVkQXR0cmlidXRlc1wiLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9ic2VydmFibGVQcm9wcy5tYXAoZnVuY3Rpb24gKHByb3ApIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVzID0gXCJcIjtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3AubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb3BbaV0gPT09IHByb3BbaV0udG9VcHBlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzICs9IFwiLVwiICsgcHJvcFtpXS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzICs9IHByb3BbaV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwib2JzZXJ2YWJsZVByb3BzXCIsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIENvbXBvbmVudDtcbn0oSFRNTEVsZW1lbnQpKTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gQ29tcG9uZW50O1xuXG4vKioqLyB9KSxcbi8qIDkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5yZW5kZXIgPSByZW5kZXI7XG5cbnZhciBfd2ViQ29tcG9uZW50cyA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cbnZhciBfc3RvcmFnZSA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciBfc2hhbGxvd0VxdWFsID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cbnZhciBfc2hhbGxvd0VxdWFsMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NoYWxsb3dFcXVhbCk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBwcm9wc1N0b3JhZ2UgPSAoMCwgX3N0b3JhZ2UuZ2V0U3RvcmFnZSkoX3N0b3JhZ2Uuc3RvcmFnZUtleXMuUFJPUFMpO1xuXG5mdW5jdGlvbiBub2RlRXF1YWxzKGVsZW1lbnROb2RlLCBmcmFnbWVudE5vZGUpIHtcbiAgICB2YXIgZWxDbG9uZSA9IGVsZW1lbnROb2RlLmNsb25lTm9kZShmYWxzZSk7XG4gICAgdmFyIGZyQ2xvbmUgPSBmcmFnbWVudE5vZGUuY2xvbmVOb2RlKGZhbHNlKTtcbiAgICBpZiAocHJvcHNTdG9yYWdlLmdldChmcmFnbWVudE5vZGUpKSB7XG4gICAgICAgIHJldHVybiAoMCwgX3NoYWxsb3dFcXVhbDIuZGVmYXVsdCkocHJvcHNTdG9yYWdlLmdldChlbGVtZW50Tm9kZSksIHByb3BzU3RvcmFnZS5nZXQoZnJhZ21lbnROb2RlKSkgJiYgZWxDbG9uZS5pc0VxdWFsTm9kZShmckNsb25lKTtcbiAgICB9XG4gICAgcmV0dXJuIGVsQ2xvbmUuaXNFcXVhbE5vZGUoZnJDbG9uZSk7XG59XG5cbmZ1bmN0aW9uIGNvbnRlbnREaWZmZXIoZWxlbWVudE5vZGUsIGZyYWdtZW50Tm9kZSkge1xuICAgIHJldHVybiBlbGVtZW50Tm9kZS5pc0VxdWFsTm9kZShmcmFnbWVudE5vZGUpID09PSBmYWxzZTtcbn1cblxuZnVuY3Rpb24gZWxlbWVudHNEZWxldGVkKGVsZW1lbnROb2RlcywgZnJhZ21lbnROb2Rlcykge1xuICAgIGlmIChlbGVtZW50Tm9kZXMubGVuZ3RoID4gZnJhZ21lbnROb2Rlcy5sZW5ndGgpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtZW50Tm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChlbGVtZW50Tm9kZXNbaV0gJiYgIWZyYWdtZW50Tm9kZXNbaV0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW2VsZW1lbnROb2Rlc1tpXV0uY29uY2F0KGVsZW1lbnRzRGVsZXRlZChBcnJheS5mcm9tKGVsZW1lbnROb2Rlcykuc2xpY2UoaSArIDEpLCBBcnJheS5mcm9tKGZyYWdtZW50Tm9kZXMpLnNsaWNlKGkpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIW5vZGVFcXVhbHMoZWxlbWVudE5vZGVzW2ldLCBmcmFnbWVudE5vZGVzW2ldKSkge1xuICAgICAgICAgICAgICAgIHZhciBkZWxldGVkID0gZWxlbWVudHNEZWxldGVkKEFycmF5LmZyb20oZWxlbWVudE5vZGVzKS5zbGljZShpICsgMSksIEFycmF5LmZyb20oZnJhZ21lbnROb2Rlcykuc2xpY2UoaSkpO1xuICAgICAgICAgICAgICAgIGlmIChkZWxldGVkLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW2VsZW1lbnROb2Rlc1tpXV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBbXTtcbn1cblxuZnVuY3Rpb24gY2hpbGRyZW5DaGFuZ2VkQ291bnQoZWxlbWVudE5vZGVzLCBmcmFnbWVudE5vZGVzKSB7XG4gICAgaWYgKGVsZW1lbnROb2Rlcy5sZW5ndGggPiBmcmFnbWVudE5vZGVzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gZnJhZ21lbnROb2Rlcy5sZW5ndGg7XG4gICAgfVxuICAgIHZhciBjaGFuZ2VkID0gMDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnROb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgZWxDbG9uZSA9IGVsZW1lbnROb2Rlc1tpXS5jbG9uZU5vZGUoZmFsc2UpO1xuICAgICAgICB2YXIgZnJDbG9uZSA9IGZyYWdtZW50Tm9kZXNbaV0uY2xvbmVOb2RlKGZhbHNlKTtcbiAgICAgICAgaWYgKCFub2RlRXF1YWxzKGVsZW1lbnROb2Rlc1tpXSwgZnJhZ21lbnROb2Rlc1tpXSkpIHtcbiAgICAgICAgICAgIGlmICghaXNFbXB0eU5vZGUoZWxDbG9uZSkgJiYgIWlzRW1wdHlOb2RlKGZyQ2xvbmUpKSB7XG4gICAgICAgICAgICAgICAgY2hhbmdlZCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjaGFuZ2VkO1xufVxuXG5mdW5jdGlvbiBhcHBlbmRDaGlsZHJlbihlbGVtZW50Tm9kZSwgZWxlbWVudENoaWxkcmVuLCBmcmFnbWVudENoaWxkcmVuKSB7XG4gICAgdmFyIGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgIGZvciAodmFyIGkgPSBlbGVtZW50Q2hpbGRyZW4ubGVuZ3RoOyBpIDwgZnJhZ21lbnRDaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChmcmFnbWVudENoaWxkcmVuW2ldKTtcbiAgICB9XG4gICAgZWxlbWVudE5vZGUuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpO1xufVxuXG5mdW5jdGlvbiB1cGRhdGVBdHRyaWJ1dGVzKGVsZW1lbnROb2RlLCBmcmFnbWVudE5vZGUpIHtcbiAgICB2YXIgYXR0cmlidXRlcyA9IGZyYWdtZW50Tm9kZS5hdHRyaWJ1dGVzIHx8IFtdO1xuICAgIHZhciBlbGVtZW50QXR0cmlidXRlcyA9IGVsZW1lbnROb2RlLmF0dHJpYnV0ZXMgfHwgW107XG4gICAgaWYgKGVsZW1lbnRBdHRyaWJ1dGVzLmxlbmd0aCA+IGF0dHJpYnV0ZXMubGVuZ3RoKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudEF0dHJpYnV0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBhdHRyaWJ1dGUgPSBlbGVtZW50QXR0cmlidXRlc1tpXTtcbiAgICAgICAgICAgIGlmICghZnJhZ21lbnROb2RlLmhhc0F0dHJpYnV0ZShhdHRyaWJ1dGUubm9kZU5hbWUpKSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudE5vZGUucmVtb3ZlQXR0cmlidXRlKGF0dHJpYnV0ZS5ub2RlTmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGF0dHJpYnV0ZXMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIHZhciBfYXR0cmlidXRlID0gYXR0cmlidXRlc1tfaV07XG4gICAgICAgIGVsZW1lbnROb2RlLnNldEF0dHJpYnV0ZShfYXR0cmlidXRlLm5vZGVOYW1lLCBfYXR0cmlidXRlLm5vZGVWYWx1ZSk7XG4gICAgfVxuICAgIGlmIChwcm9wc1N0b3JhZ2UuZ2V0KGZyYWdtZW50Tm9kZSkpIHtcbiAgICAgICAgdmFyIGVsUHJvcHMgPSBwcm9wc1N0b3JhZ2UuZ2V0KGVsZW1lbnROb2RlKTtcbiAgICAgICAgdmFyIGZyUHJvcHMgPSBwcm9wc1N0b3JhZ2UuZ2V0KGZyYWdtZW50Tm9kZSk7XG4gICAgICAgIHByb3BzU3RvcmFnZS5zZXQoZWxlbWVudE5vZGUsIGZyUHJvcHMpO1xuICAgICAgICBpZiAoISgwLCBfc2hhbGxvd0VxdWFsMi5kZWZhdWx0KShlbFByb3BzLCBmclByb3BzKSkge1xuICAgICAgICAgICAgaWYgKCgwLCBfd2ViQ29tcG9uZW50cy5pc0N1c3RvbUNvbXBvbmVudCkoZWxlbWVudE5vZGUpKSB7XG4gICAgICAgICAgICAgICAgcmVuZGVyLmNhbGwoZWxlbWVudE5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiB1cGRhdGVFbGVtZW50KGVsZW1lbnROb2RlLCBmcmFnbWVudE5vZGUpIHtcbiAgICBpZiAoKDAsIF93ZWJDb21wb25lbnRzLmlzQ3VzdG9tQ29tcG9uZW50KShlbGVtZW50Tm9kZSkpIHtcbiAgICAgICAgcmV0dXJuIHVwZGF0ZUF0dHJpYnV0ZXMoZWxlbWVudE5vZGUsIGZyYWdtZW50Tm9kZSk7XG4gICAgfVxuICAgIGlmICghbm9kZUVxdWFscyhlbGVtZW50Tm9kZSwgZnJhZ21lbnROb2RlKSkge1xuICAgICAgICB1cGRhdGVBdHRyaWJ1dGVzKGVsZW1lbnROb2RlLCBmcmFnbWVudE5vZGUpO1xuICAgIH1cbiAgICB1cGRhdGVDaGlsZHJlbihlbGVtZW50Tm9kZSwgZnJhZ21lbnROb2RlKTtcbn1cblxuZnVuY3Rpb24gaXNFbXB0eU5vZGUobm9kZSkge1xuICAgIGlmIChub2RlLm5vZGVUeXBlICE9PSBOb2RlLlRFWFRfTk9ERSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChub2RlLmNoaWxkTm9kZXMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKG5vZGUuaW5uZXJUZXh0KSB7XG4gICAgICAgIHJldHVybiBCb29sZWFuKG5vZGUuaW5uZXJUZXh0LnRyaW0oKSkgPT09IGZhbHNlO1xuICAgIH1cbiAgICBpZiAobm9kZS5pbm5lckhUTUwpIHtcbiAgICAgICAgcmV0dXJuIEJvb2xlYW4obm9kZS5pbm5lckhUTUwudHJpbSgpKSA9PT0gZmFsc2U7XG4gICAgfVxuICAgIGlmIChub2RlLnRleHRDb250ZW50KSB7XG4gICAgICAgIHJldHVybiBCb29sZWFuKG5vZGUudGV4dENvbnRlbnQudHJpbSgpKSA9PT0gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBub2RlRmlsdGVyKG5vZGUpIHtcbiAgICBpZiAobm9kZSkge1xuICAgICAgICByZXR1cm4gKG5vZGUubm9kZVR5cGUgPT09IE5vZGUuRUxFTUVOVF9OT0RFIHx8IG5vZGUubm9kZVR5cGUgPT09IE5vZGUuVEVYVF9OT0RFKSAmJiBub2RlLm5vZGVOYW1lICE9PSBcIlNUWUxFXCIgJiYgIWlzRW1wdHlOb2RlKG5vZGUpO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUNoaWxkcmVuQ291bnRDaGFuZ2VkKGVsZW1lbnROb2RlLCBmcmFnbWVudE5vZGUsIGVsZW1lbnROb2RlcywgZnJhZ21lbnROb2Rlcykge1xuICAgIHZhciBkZWxldGVkID0gZWxlbWVudHNEZWxldGVkKGVsZW1lbnROb2RlcywgZnJhZ21lbnROb2Rlcyk7XG4gICAgaWYgKGZyYWdtZW50Tm9kZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBlbGVtZW50Tm9kZS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChmcmFnbWVudE5vZGUsIGVsZW1lbnROb2RlKTtcbiAgICB9XG4gICAgaWYgKGRlbGV0ZWQubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGRlbGV0ZWRbMF0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkZWxldGVkWzBdKTtcbiAgICAgICAgcmV0dXJuIHVwZGF0ZUNoaWxkcmVuKGVsZW1lbnROb2RlLCBmcmFnbWVudE5vZGUpO1xuICAgIH1cbiAgICBpZiAoY2hpbGRyZW5DaGFuZ2VkQ291bnQoZWxlbWVudE5vZGVzLCBmcmFnbWVudE5vZGVzKSA+IDApIHtcbiAgICAgICAgcmV0dXJuIGVsZW1lbnROb2RlLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGZyYWdtZW50Tm9kZSwgZWxlbWVudE5vZGUpO1xuICAgIH1cbiAgICByZXR1cm4gYXBwZW5kQ2hpbGRyZW4oZWxlbWVudE5vZGUsIGVsZW1lbnROb2RlcywgZnJhZ21lbnROb2Rlcyk7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUNoaWxkcmVuKGVsZW1lbnROb2RlLCBmcmFnbWVudE5vZGUpIHtcbiAgICB2YXIgZWxlbWVudE5vZGVzID0gQXJyYXkuZnJvbShlbGVtZW50Tm9kZS5jaGlsZE5vZGVzKS5maWx0ZXIobm9kZUZpbHRlcik7XG4gICAgdmFyIGZyYWdtZW50Tm9kZXMgPSBBcnJheS5mcm9tKGZyYWdtZW50Tm9kZS5jaGlsZE5vZGVzKS5maWx0ZXIobm9kZUZpbHRlcik7XG4gICAgaWYgKGVsZW1lbnROb2Rlcy5sZW5ndGggIT09IGZyYWdtZW50Tm9kZXMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBoYW5kbGVDaGlsZHJlbkNvdW50Q2hhbmdlZChlbGVtZW50Tm9kZSwgZnJhZ21lbnROb2RlLCBlbGVtZW50Tm9kZXMsIGZyYWdtZW50Tm9kZXMpO1xuICAgIH1cbiAgICBpZiAoZWxlbWVudE5vZGVzLmxlbmd0aCA9PT0gMCAmJiBmcmFnbWVudE5vZGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBpZiAoY29udGVudERpZmZlcihlbGVtZW50Tm9kZSwgZnJhZ21lbnROb2RlKSkge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnROb2RlLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGZyYWdtZW50Tm9kZSwgZWxlbWVudE5vZGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudE5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHVwZGF0ZUVsZW1lbnQoZWxlbWVudE5vZGVzW2ldLCBmcmFnbWVudE5vZGVzW2ldKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUZyYWdtZW50RnJvbVN0cih0cGwpIHtcbiAgICB2YXIgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGVtcGxhdGVcIik7XG4gICAgdGVtcGxhdGUuaW5uZXJIVE1MID0gdHBsO1xuICAgIHJldHVybiB0ZW1wbGF0ZTtcbn1cblxuZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgIHBlcmZvcm1hbmNlLm1hcmsoJ211c2tvdCBzdGFydCByZW5kZXJpbmcnKTtcbiAgICB0aGlzLmJlZm9yZVJlbmRlcigpO1xuXG4gICAgaWYgKHRoaXMuaXNTaGFkb3cgJiYgIXRoaXMuc2hhZG93Um9vdCkge1xuICAgICAgICBwZXJmb3JtYW5jZS5tYXJrKCdtdXNrb3QgYXR0YWNoaW5nIHJvb3QnKTtcbiAgICAgICAgdGhpcy5hdHRhY2hTaGFkb3coeyBtb2RlOiAnb3BlbicgfSk7XG4gICAgICAgIHBlcmZvcm1hbmNlLm1hcmsoJ211c2tvdCByb290IGF0dGFjaGVkJyk7XG4gICAgICAgIHBlcmZvcm1hbmNlLm1lYXN1cmUoXCJtdXNrb3QgYXR0YWNoIHJvb3RcIiwgJ211c2tvdCBhdHRhY2hpbmcgcm9vdCcsICdtdXNrb3Qgcm9vdCBhdHRhY2hlZCcpO1xuICAgIH1cbiAgICBwZXJmb3JtYW5jZS5tYXJrKCdtdXNrb3QgY3JlYXRlIHJlbmRlciBET00nKTtcbiAgICB2YXIgcmVuZGVyUmVzID0gdGhpcy5yZW5kZXIoKTtcbiAgICBwZXJmb3JtYW5jZS5tYXJrKCdtdXNrb3QgcmVuZGVyIERPTSBjcmVhdGVkJyk7XG4gICAgcGVyZm9ybWFuY2UubWVhc3VyZShcIm11c2tvdCBjb21wb25lbnQgcmVuZGVyIHJlc3VsdFwiLCAnbXVza290IGNyZWF0ZSByZW5kZXIgRE9NJywgJ211c2tvdCByZW5kZXIgRE9NIGNyZWF0ZWQnKTtcblxuICAgIHZhciByb290ID0gdGhpcy5pc1NoYWRvdyA/IHRoaXMuc2hhZG93Um9vdCA6IHRoaXM7XG4gICAgcGVyZm9ybWFuY2UubWFyaygnbXVza290IGNyZWF0ZSBmcmFnbWVudCcpO1xuICAgIHZhciBmcmFnbWVudCA9IHR5cGVvZiByZW5kZXJSZXMgPT09IFwic3RyaW5nXCIgPyBjcmVhdGVGcmFnbWVudEZyb21TdHIocmVuZGVyUmVzKSA6IHJlbmRlclJlcztcbiAgICBwZXJmb3JtYW5jZS5tYXJrKCdtdXNrb3QgZnJhZ21lbnQgY3JlYXRlZCcpO1xuICAgIHBlcmZvcm1hbmNlLm1lYXN1cmUoXCJtdXNrb3QgZnJhZ21lbnQgY3JlYXRpb25cIiwgJ211c2tvdCBjcmVhdGUgZnJhZ21lbnQnLCAnbXVza290IGZyYWdtZW50IGNyZWF0ZWQnKTtcblxuICAgIGlmICghdGhpcy5tb3VudGVkKSB7XG4gICAgICAgIHBlcmZvcm1hbmNlLm1hcmsoJ211c2tvdCBpbnNlcnQgc3R5bGUgaW50byBjb21wb25lbnQnKTtcbiAgICAgICAgcm9vdC5pbm5lckhUTUwgPSBcIjxzdHlsZT5cIiArIHRoaXMuc3R5bGVzICsgXCI8L3N0eWxlPlwiO1xuICAgICAgICBwZXJmb3JtYW5jZS5tYXJrKCdtdXNrb3Qgc3R5bGUgaW5zZXJ0ZWQnKTtcbiAgICAgICAgcGVyZm9ybWFuY2UubWVhc3VyZShcIm11c2tvdCBzdHlsZSBjcmVhdGlvbiAmIGluc2VydCBieSBpbm5lckhUTUxcIiwgJ211c2tvdCBpbnNlcnQgc3R5bGUgaW50byBjb21wb25lbnQnLCAnbXVza290IHN0eWxlIGluc2VydGVkJyk7XG5cbiAgICAgICAgcGVyZm9ybWFuY2UubWFyaygnbXVza290IGFwcGVuZCBjaGlsZCB3aXRoIGNvbnRlbnQnKTtcbiAgICAgICAgcm9vdC5hcHBlbmRDaGlsZChmcmFnbWVudC5jb250ZW50KTtcbiAgICAgICAgcGVyZm9ybWFuY2UubWFyaygnbXVza290IGNvbnRlbnQgYXBwZW5kZWQnKTtcbiAgICAgICAgcGVyZm9ybWFuY2UubWVhc3VyZShcIm11c2tvdCBhcHBlbmQgY29udGVudCBvbiBpbml0aWFsIHJlbmRlclwiLCAnbXVza290IGFwcGVuZCBjaGlsZCB3aXRoIGNvbnRlbnQnLCAnbXVza290IGNvbnRlbnQgYXBwZW5kZWQnKTtcblxuICAgICAgICB0aGlzLm1vdW50ZWQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHBlcmZvcm1hbmNlLm1hcmsoJ211c2tvdCBpbnNlcnQgc3R5bGVzIGJlZm9yZSBjb250ZW50IG9uIHVwZGF0ZScpO1xuICAgICAgICB2YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG4gICAgICAgIHN0eWxlLmlubmVySFRNTCA9IHRoaXMuc3R5bGVzO1xuICAgICAgICBmcmFnbWVudC5jb250ZW50Lmluc2VydEJlZm9yZShzdHlsZSwgZnJhZ21lbnQuY29udGVudC5maXJzdENoaWxkKTtcbiAgICAgICAgcGVyZm9ybWFuY2UubWFyaygnbXVza290IHN0eWxlcyBpbnNlcnRlZCBvbiB1cGRhdGUnKTtcbiAgICAgICAgcGVyZm9ybWFuY2UubWVhc3VyZShcIm11c2tvdCBhZGQgc3R5bGVzIGJ5IGluc2VydEJlZm9yZVwiLCAnbXVza290IGluc2VydCBzdHlsZXMgYmVmb3JlIGNvbnRlbnQgb24gdXBkYXRlJywgJ211c2tvdCBzdHlsZXMgaW5zZXJ0ZWQgb24gdXBkYXRlJyk7XG5cbiAgICAgICAgcGVyZm9ybWFuY2UubWFyaygnbXVza290IHVwZGF0ZSBjaGlsZHJlbicpO1xuICAgICAgICB1cGRhdGVDaGlsZHJlbihyb290LCBmcmFnbWVudC5jb250ZW50KTtcbiAgICAgICAgcGVyZm9ybWFuY2UubWFyaygnbXVza290IGNoaWxkcmVuIHVwZGF0ZWQnKTtcbiAgICAgICAgcGVyZm9ybWFuY2UubWVhc3VyZShcIm11c2tvdCB1cGRhdGUgY29tcG9uZW50J3MgY2hpbGRyZW5cIiwgJ211c2tvdCB1cGRhdGUgY2hpbGRyZW4nLCAnbXVza290IGNoaWxkcmVuIHVwZGF0ZWQnKTtcbiAgICB9XG4gICAgcGVyZm9ybWFuY2UubWFyaygnbXVza290IGZpbmlzaCByZW5kZXJpbmcnKTtcbiAgICBwZXJmb3JtYW5jZS5tZWFzdXJlKFwibXVza290IGZ1bGwgcmVuZGVyXCIsICdtdXNrb3Qgc3RhcnQgcmVuZGVyaW5nJywgJ211c2tvdCBmaW5pc2ggcmVuZGVyaW5nJyk7XG5cbiAgICB0aGlzLmFmdGVyUmVuZGVyKCk7XG59XG5cbi8qKiovIH0pLFxuLyogMTAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cbi8qKlxuICogaW5saW5lZCBPYmplY3QuaXMgcG9seWZpbGwgdG8gYXZvaWQgcmVxdWlyaW5nIGNvbnN1bWVycyBzaGlwIHRoZWlyIG93blxuICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2lzXG4gKi9cbmZ1bmN0aW9uIGlzKHgsIHkpIHtcbiAgICAvLyBTYW1lVmFsdWUgYWxnb3JpdGhtXG4gICAgaWYgKHggPT09IHkpIHtcbiAgICAgICAgLy8gU3RlcHMgMS01LCA3LTEwXG4gICAgICAgIC8vIFN0ZXBzIDYuYi02LmU6ICswICE9IC0wXG4gICAgICAgIC8vIEFkZGVkIHRoZSBub256ZXJvIHkgY2hlY2sgdG8gbWFrZSBGbG93IGhhcHB5LCBidXQgaXQgaXMgcmVkdW5kYW50XG4gICAgICAgIHJldHVybiB4ICE9PSAwIHx8IHkgIT09IDAgfHwgMSAvIHggPT09IDEgLyB5O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFN0ZXAgNi5hOiBOYU4gPT0gTmFOXG4gICAgICAgIHJldHVybiB4ICE9PSB4ICYmIHkgIT09IHk7XG4gICAgfVxufVxuXG4vKipcbiAqIFBlcmZvcm1zIGVxdWFsaXR5IGJ5IGl0ZXJhdGluZyB0aHJvdWdoIGtleXMgb24gYW4gb2JqZWN0IGFuZCByZXR1cm5pbmcgZmFsc2VcbiAqIHdoZW4gYW55IGtleSBoYXMgdmFsdWVzIHdoaWNoIGFyZSBub3Qgc3RyaWN0bHkgZXF1YWwgYmV0d2VlbiB0aGUgYXJndW1lbnRzLlxuICogUmV0dXJucyB0cnVlIHdoZW4gdGhlIHZhbHVlcyBvZiBhbGwga2V5cyBhcmUgc3RyaWN0bHkgZXF1YWwuXG4gKi9cbmZ1bmN0aW9uIHNoYWxsb3dFcXVhbChvYmpBLCBvYmpCKSB7XG4gICAgaWYgKGlzKG9iakEsIG9iakIpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmICgodHlwZW9mIG9iakEgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKG9iakEpKSAhPT0gJ29iamVjdCcgfHwgb2JqQSA9PT0gbnVsbCB8fCAodHlwZW9mIG9iakIgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKG9iakIpKSAhPT0gJ29iamVjdCcgfHwgb2JqQiA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdmFyIGtleXNBID0gT2JqZWN0LmtleXMob2JqQSk7XG4gICAgdmFyIGtleXNCID0gT2JqZWN0LmtleXMob2JqQik7XG5cbiAgICBpZiAoa2V5c0EubGVuZ3RoICE9PSBrZXlzQi5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIFRlc3QgZm9yIEEncyBrZXlzIGRpZmZlcmVudCBmcm9tIEIuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzQS5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoIWhhc093blByb3BlcnR5LmNhbGwob2JqQiwga2V5c0FbaV0pIHx8ICFpcyhvYmpBW2tleXNBW2ldXSwgb2JqQltrZXlzQVtpXV0pKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxuZXhwb3J0cy5kZWZhdWx0ID0gc2hhbGxvd0VxdWFsO1xuXG4vKioqLyB9KVxuLyoqKioqKi8gXSk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIG1haW4uanMiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA1KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCBhNDE3OGM0YWQ5YzA0OTc3NmY0YSIsIi8vIEBmbG93XG5cbmltcG9ydCB0eXBlIHtTdG9yYWdlRHJpdmVyfSBmcm9tIFwiLi9pbnRlcmZhY2VzXCI7XG5cbmNvbnN0IHByb3BzTWFwOiBNYXA8YW55LCBhbnk+ID0gbmV3IE1hcDtcblxuY29uc3QgZXZlbnRzTWFwOiBNYXA8YW55LCBhbnk+ID0gbmV3IE1hcDtcblxuZXhwb3J0IGNvbnN0IHN0b3JhZ2VLZXlzID0ge1xuICAgIFBST1BTOiBcInByb3BzXCIsXG4gICAgRVZFTlRTOiBcImV2ZW50c1wiXG59O1xuXG5jb25zdCBkcml2ZXI6IFN0b3JhZ2VEcml2ZXIgPSB7XG4gICAgaXRlbXM6IE9iamVjdC5jcmVhdGUoe1xuICAgICAgICBbc3RvcmFnZUtleXMuUFJPUFNdOiBwcm9wc01hcCxcbiAgICAgICAgW3N0b3JhZ2VLZXlzLkVWRU5UU106IGV2ZW50c01hcCxcbiAgICB9KSxcbiAgICBzZXRJdGVtKGtleTogc3RyaW5nLCB2YWx1ZTogYW55KSB7XG4gICAgICAgIHRoaXMuaXRlbXNba2V5XSA9IHZhbHVlXG4gICAgfSxcbiAgICBnZXRJdGVtKGtleTogc3RyaW5nKSB7XG4gICAgICAgIHJldHVybiB0aGlzLml0ZW1zW2tleV1cbiAgICB9LFxuICAgIHJlbW92ZUl0ZW0oa2V5OiBzdHJpbmcpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuaXRlbXNba2V5XVxuICAgIH0sXG4gICAgbWlncmF0ZShkcml2ZXI6IFN0b3JhZ2VEcml2ZXIpIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5pdGVtcykge1xuICAgICAgICAgICAgZHJpdmVyLnNldEl0ZW0oXG4gICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgIHRoaXMuaXRlbXNba2V5XVxuICAgICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkcml2ZXJcbiAgICB9XG59O1xuXG5leHBvcnQgY29uc3Qgc3RvcmFnZSA9IHtcbiAgICBkcml2ZXJcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRTdG9yYWdlRHJpdmVyKGRyaXZlcjogU3RvcmFnZURyaXZlcik6IHZvaWQge1xuICAgIHN0b3JhZ2UuZHJpdmVyID0gc3RvcmFnZS5kcml2ZXIubWlncmF0ZShkcml2ZXIpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTdG9yYWdlKGtleTogc3RyaW5nKTogYW55IHtcbiAgICByZXR1cm4gc3RvcmFnZS5kcml2ZXIuZ2V0SXRlbShrZXkpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRTdG9yYWdlKGtleTogc3RyaW5nLCB2YWx1ZTogYW55KTogdm9pZCB7XG4gICAgc3RvcmFnZS5kcml2ZXIuc2V0SXRlbShrZXksIHZhbHVlKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlU3RvcmFnZShrZXk6IHN0cmluZyk6IHZvaWQge1xuICAgIHN0b3JhZ2UuZHJpdmVyLnJlbW92ZUl0ZW0oa2V5KVxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9zdG9yYWdlLmpzIiwiLy8gQGZsb3dcblxuaW1wb3J0IHR5cGUge1dlYkNvbXBvbmVudHMgYXMgSW1wbGVtZW50YXRpb259IGZyb20gXCIuL2ludGVyZmFjZXNcIlxuXG5jb25zdCBkZWZhdWx0SW1wbGVtZW50YXRpb246IEltcGxlbWVudGF0aW9uID0ge1xuICAgIHJlZ2lzdGVyQ29tcG9uZW50KG5hbWU6IHN0cmluZywgY29tcG9uZW50OiBDbGFzczxFbGVtZW50Pikge1xuICAgICAgICBpZiAoJ2N1c3RvbUVsZW1lbnRzJyBpbiB3aW5kb3cpIHtcbiAgICAgICAgICAgIGN1c3RvbUVsZW1lbnRzLmRlZmluZShuYW1lLCBjb21wb25lbnQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY3VycmVudFJlYWR5Q2hlY2soKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICByZWdpc3RlckNvbXBvbmVudChuYW1lLCBjb21wb25lbnQpXG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfSxcbiAgICBpc0N1c3RvbUNvbXBvbmVudChub2RlOiBOb2RlKSB7XG4gICAgICAgIHJldHVybiBub2RlLm5vZGVOYW1lLmluY2x1ZGVzKFwiLVwiKVxuICAgIH1cbn07XG5cbmxldCBjdXJyZW50SW1wbGVtZW50YXRpb24gPSBkZWZhdWx0SW1wbGVtZW50YXRpb247XG5cbmNvbnN0IHJlZ2lzdGVyQ29tcG9uZW50ID0gKG5hbWU6IHN0cmluZywgY29tcG9uZW50OiBDbGFzczxFbGVtZW50PikgPT4ge1xuICAgIHJldHVybiBjdXJyZW50SW1wbGVtZW50YXRpb24ucmVnaXN0ZXJDb21wb25lbnQobmFtZSwgY29tcG9uZW50KTtcbn07XG5cbmV4cG9ydCBjb25zdCBzZXRJbXBsZW1lbnRhdGlvbiA9IChpbXBsZW1lbnRhdGlvbjogSW1wbGVtZW50YXRpb24pID0+IHtcbiAgICBjdXJyZW50SW1wbGVtZW50YXRpb24gPSBpbXBsZW1lbnRhdGlvbjtcbn07XG5cbmxldCBjdXJyZW50UmVhZHlDaGVjayA9ICgpID0+IFByb21pc2UucmVzb2x2ZSgpO1xuXG5leHBvcnQgY29uc3QgY29tcG9uZW50c1JlYWR5ID0gKCkgPT4ge1xuICAgIHJldHVybiBjdXJyZW50UmVhZHlDaGVjaygpXG59O1xuXG5leHBvcnQgY29uc3Qgc2V0UmVhZHlDaGVjayA9IChyZWFkeUNoZWNrOiBGdW5jdGlvbikgPT4ge1xuICAgIGN1cnJlbnRSZWFkeUNoZWNrID0gcmVhZHlDaGVjaztcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHJlZ2lzdGVyQ29tcG9uZW50O1xuXG5leHBvcnQgY29uc3QgaXNDdXN0b21Db21wb25lbnQgPSAobm9kZTogTm9kZSkgPT4ge1xuICAgIHJldHVybiBjdXJyZW50SW1wbGVtZW50YXRpb24uaXNDdXN0b21Db21wb25lbnQobm9kZSlcbn07XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3dlYi1jb21wb25lbnRzLmpzIiwiLy8gQGZsb3dcblxuaW1wb3J0IHR5cGUge1N0b3JlLCBSZWR1Y2VyfSBmcm9tIFwiLi9pbnRlcmZhY2VzXCJcblxuY29uc3Qgc3R1YkltcGxlbWVudGF0aW9uOiBTdG9yZSA9IHtcbiAgICByZWR1Y2Vyczoge30sXG4gICAgc3Vic2NyaXB0aW9uczoge30sXG4gICAgYWRkUmVkdWNlcihrZXk6IHN0cmluZywgcmVkdWNlcjogUmVkdWNlcikge1xuICAgICAgICB0aGlzLnJlZHVjZXJzW2tleV0gPSByZWR1Y2VyO1xuICAgIH0sXG4gICAgcmVtb3ZlUmVkdWNlcihrZXk6IHN0cmluZykge1xuICAgICAgICBkZWxldGUgdGhpcy5yZWR1Y2Vyc1trZXldO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcbiAgICBzdWJzY3JpYmUoa2V5OiBzdHJpbmcsIGNiOiBGdW5jdGlvbikge1xuICAgICAgICBpZiAoIXRoaXMuc3Vic2NyaXB0aW9uc1trZXldKSB7XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnNba2V5XSA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uc1trZXldLnB1c2goY2IpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdW5zdWJzY3JpYmU6ICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnNba2V5XSA9IHRoaXMuc3Vic2NyaXB0aW9uc1trZXldLmZpbHRlcihlbCA9PiBlbCAhPT0gY2IpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGdldFN0YXRlKGtleTogc3RyaW5nKSB7fSxcbiAgICBtaWdyYXRlKG5ld1N0b3JlOiBTdG9yZSkge1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLnJlZHVjZXJzKSB7XG4gICAgICAgICAgICBjb25zdCByZWR1Y2VyID0gdGhpcy5yZWR1Y2Vyc1trZXldO1xuICAgICAgICAgICAgbmV3U3RvcmUuYWRkUmVkdWNlcihrZXksIHJlZHVjZXIpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMuc3Vic2NyaXB0aW9ucykge1xuICAgICAgICAgICAgZm9yIChjb25zdCBzdWJzY3JpcHRpb24gb2YgdGhpcy5zdWJzY3JpcHRpb25zW2tleV0pIHtcbiAgICAgICAgICAgICAgICBuZXdTdG9yZS5zdWJzY3JpYmUoa2V5LCBzdWJzY3JpcHRpb24pXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ld1N0b3JlO1xuICAgIH1cbn07XG5cbmNvbnN0IHN0b3JlID0ge1xuICAgIGN1cnJlbnRJbXBsZW1lbnRhdGlvbjogc3R1YkltcGxlbWVudGF0aW9uXG59O1xuXG5leHBvcnQgY29uc3Qgc2V0SW1wbGVtZW50YXRpb24gPSAoaW1wbGVtZW50YXRpb246IFN0b3JlKSA9PiB7XG4gICAgc3RvcmUuY3VycmVudEltcGxlbWVudGF0aW9uID0gc3RvcmUuY3VycmVudEltcGxlbWVudGF0aW9uLm1pZ3JhdGUoaW1wbGVtZW50YXRpb24pXG59O1xuXG5leHBvcnQgY29uc3QgcmVnaXN0ZXJSZWR1Y2VyID0gKGtleTogc3RyaW5nLCByZWR1Y2VyOiBSZWR1Y2VyKSA9PiB7XG4gICAgc3RvcmUuY3VycmVudEltcGxlbWVudGF0aW9uLmFkZFJlZHVjZXIoa2V5LCByZWR1Y2VyKVxufTtcbmV4cG9ydCBjb25zdCByZW1vdmVSZWR1Y2VyID0gKGtleTogc3RyaW5nKSA9PiB7XG4gICAgc3RvcmUuY3VycmVudEltcGxlbWVudGF0aW9uLnJlbW92ZVJlZHVjZXIoa2V5KVxufTtcbmV4cG9ydCBjb25zdCBzdWJzY3JpYmUgPSAoa2V5OiBzdHJpbmcsIGNiOiBGdW5jdGlvbikgPT4ge1xuICAgIHJldHVybiBzdG9yZS5jdXJyZW50SW1wbGVtZW50YXRpb24uc3Vic2NyaWJlKGtleSwgY2IpXG59O1xuZXhwb3J0IGNvbnN0IGdldFN0YXRlID0gKGtleTogc3RyaW5nKSA9PiB7XG4gICAgcmV0dXJuIHN0b3JlLmN1cnJlbnRJbXBsZW1lbnRhdGlvbi5nZXRTdGF0ZShrZXkpXG59O1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9zdG9yZS5qcyIsIi8vIEBmbG93XG5cbmltcG9ydCB0eXBlIHtUZW1wbGF0ZUhhbmRsZXJ9IGZyb20gXCIuL2ludGVyZmFjZXNcIlxuaW1wb3J0IHtnZXRTdG9yYWdlLCBzdG9yYWdlS2V5c30gZnJvbSBcIi4vc3RvcmFnZVwiXG5pbXBvcnQge3RhZ05hbWVUb1Byb3B9IGZyb20gXCIuL3V0aWxzXCI7XG5pbXBvcnQge2lzQ3VzdG9tQ29tcG9uZW50fSBmcm9tIFwiLi93ZWItY29tcG9uZW50c1wiO1xuXG5jb25zdCBwcm9wc1N0b3JhZ2UgPSBnZXRTdG9yYWdlKHN0b3JhZ2VLZXlzLlBST1BTKTtcbmNvbnN0IGV2ZW50c1N0b3JhZ2UgPSBnZXRTdG9yYWdlKHN0b3JhZ2VLZXlzLkVWRU5UUyk7XG5cbmNvbnN0IEV2ZW50c1RhZ0hhbmRsZXI6IFRlbXBsYXRlSGFuZGxlciA9IHtcbiAgICBjYWxsOiAobm9kZTogYW55LCBhcmdzOiBhbnlbXSkgPT4ge1xuICAgICAgICBjb25zdCBhdHRyaWJ1dGVzID0gbm9kZS5hdHRyaWJ1dGVzIHx8IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGF0dHJpYnV0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZSA9IGF0dHJpYnV0ZXNbaV07XG4gICAgICAgICAgICBpZiAoYXR0cmlidXRlLm5vZGVOYW1lLnN0YXJ0c1dpdGgoXCJvblwiKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gYXR0cmlidXRlLm5vZGVWYWx1ZS5tYXRjaCgvX19BUkdfXyhcXGQrKS8pO1xuICAgICAgICAgICAgICAgIGlmIChtYXRjaCAmJiBtYXRjaFsxXSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IE51bWJlcihtYXRjaFsxXSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpc3RlbmVyID0gYXJnc1tpbmRleF07XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbGlzdGVuZXIgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlLm5vZGVOYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZXZlbnROYW1lID0gYXR0cmlidXRlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkuc2xpY2UoMik7XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnROYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RlbmVyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSBldmVudHNTdG9yYWdlLmdldChub2RlKSB8fCB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50c1N0b3JhZ2Uuc2V0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5saXN0ZW5lcnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtldmVudE5hbWVdOiBsaXN0ZW5lclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn07XG5cbmNvbnN0IE1hcEhhbmRsZXI6IFRlbXBsYXRlSGFuZGxlciA9IHtcbiAgICBjYWxsOiAobm9kZTogTm9kZSwgYXJnczogYW55W10pID0+IHtcbiAgICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBIVE1MVGVtcGxhdGVFbGVtZW50KSB7XG4gICAgICAgICAgICBpZiAobm9kZS5oYXNBdHRyaWJ1dGUoXCJtYXBcIikpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtYXRjaCA9IFN0cmluZyhub2RlLmdldEF0dHJpYnV0ZShcIm1hcFwiKSkubWF0Y2goL19fQVJHX18oXFxkKykvKTtcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2ggJiYgbWF0Y2hbMV0pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBOdW1iZXIobWF0Y2hbMV0pO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhcnIgPSBhcmdzW2luZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHBsID0gbm9kZS5pbm5lckhUTUw7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgICAgICAgICAgICAgICAgICBhcnIuZm9yRWFjaChlbCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHBsLnJlcGxhY2UoL19fQVJHX18oXFxkKykvZywgKG1hdGNoLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFyZyA9IGFyZ3NbaW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYXJnID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdHBsQ2FsbCA9IGFyZyhlbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0cGxDYWxsIGluc3RhbmNlb2YgSFRNTFRlbXBsYXRlRWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQodHBsQ2FsbC5jb250ZW50KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdG1wVHBsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRlbXBsYXRlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wVHBsLmlubmVySFRNTCA9IHRwbENhbGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZCh0bXBUcGwuY29udGVudClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJnXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gJEZsb3dGaXhNZVxuICAgICAgICAgICAgICAgICAgICBub2RlLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKFxuICAgICAgICAgICAgICAgICAgICAgICAgZnJhZ21lbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5mdW5jdGlvbiBzaG91bGRTZXRQcm9wVG9TdG9yYWdlKHZhbHVlOiBhbnksIG5vZGU6IE5vZGUpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCIgfHwgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiIHx8IGlzQ3VzdG9tQ29tcG9uZW50KG5vZGUpXG59XG5cbmZ1bmN0aW9uIHBhcnNlQXR0cmlidXRlKGF0dHJpYnV0ZTogTm9kZSwgbm9kZTogTm9kZSwgYXJnczogYW55W10pIHtcbiAgICBjb25zdCBtYXRjaCA9IGF0dHJpYnV0ZS5ub2RlVmFsdWUubWF0Y2goL19fQVJHX18oXFxkKykvKTtcbiAgICBpZiAobWF0Y2ggJiYgbWF0Y2hbMV0pIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSBOdW1iZXIobWF0Y2hbMV0pO1xuICAgICAgICBjb25zdCBub2RlTmFtZSA9IGF0dHJpYnV0ZS5ub2RlTmFtZTtcbiAgICAgICAgY29uc3QgcHJvcE5hbWUgPSB0YWdOYW1lVG9Qcm9wKG5vZGVOYW1lKTtcbiAgICAgICAgY29uc3QgdmFsdWUgPSBhcmdzW2luZGV4XTtcbiAgICAgICAgcmV0dXJuIFtwcm9wTmFtZSwgdmFsdWVdXG4gICAgfVxuICAgIHJldHVybiBbYXR0cmlidXRlLm5vZGVOYW1lLCBhdHRyaWJ1dGUubm9kZVZhbHVlXVxufVxuXG5jb25zdCBQcm9wc0hhbmRsZXI6IFRlbXBsYXRlSGFuZGxlciA9IHtcbiAgICBjYWxsOiAobm9kZTogYW55LCBhcmdzOiBhbnlbXSkgPT4ge1xuICAgICAgICBjb25zdCBhdHRyaWJ1dGVzID0gbm9kZS5hdHRyaWJ1dGVzIHx8IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGF0dHJpYnV0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZSA9IGF0dHJpYnV0ZXNbaV07XG4gICAgICAgICAgICBjb25zdCBbcHJvcE5hbWUsIHZhbHVlXSA9IHBhcnNlQXR0cmlidXRlKFxuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZSxcbiAgICAgICAgICAgICAgICBub2RlLFxuICAgICAgICAgICAgICAgIGFyZ3NcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAoc2hvdWxkU2V0UHJvcFRvU3RvcmFnZSh2YWx1ZSwgbm9kZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9wcyA9IHByb3BzU3RvcmFnZS5nZXQobm9kZSkgfHwge307XG4gICAgICAgICAgICAgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUoXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZS5ub2RlTmFtZSxcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHByb3BzU3RvcmFnZS5zZXQoXG4gICAgICAgICAgICAgICAgICAgIG5vZGUsXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLnByb3BzLFxuICAgICAgICAgICAgICAgICAgICAgICAgW3Byb3BOYW1lXTogdmFsdWVcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn07XG5cbmNvbnN0IGNvcmVIYW5kbGVycyA9IHtcbiAgICBldmVudHM6IEV2ZW50c1RhZ0hhbmRsZXIsXG4gICAgbWFwOiBNYXBIYW5kbGVyLFxuICAgIHByb3BzOiBQcm9wc0hhbmRsZXJcbn07XG5cbmNvbnN0IGN1c3RvbUhhbmRsZXJzID0ge307XG5cbmxldCBoYW5kbGVyczogQXJyYXk8RnVuY3Rpb24+ID0gW1xuICAgIGNvcmVIYW5kbGVycy5tYXAuY2FsbCxcbiAgICBjb3JlSGFuZGxlcnMuZXZlbnRzLmNhbGwsXG4gICAgY29yZUhhbmRsZXJzLnByb3BzLmNhbGwsXG5dO1xuXG5leHBvcnQgZnVuY3Rpb24gY2FsbEhhbmRsZXJzKGVsZW1lbnQ6IERvY3VtZW50RnJhZ21lbnQgfCBOb2RlLCBhcmdzOiBhbnlbXSk6IHZvaWQge1xuICAgIGlmICgoKGVsZW1lbnQ6IGFueSkuYXR0cmlidXRlcyB8fCBbXSkubGVuZ3RoKSB7XG4gICAgICAgIGhhbmRsZXJzLmZvckVhY2goaGFuZGxlciA9PiB7XG4gICAgICAgICAgICBoYW5kbGVyKGVsZW1lbnQsIGFyZ3MpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbGVtZW50LmNoaWxkTm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY2FsbEhhbmRsZXJzKFxuICAgICAgICAgICAgZWxlbWVudC5jaGlsZE5vZGVzW2ldLFxuICAgICAgICAgICAgYXJnc1xuICAgICAgICApXG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gYWRkVGVtcGxhdGVIYW5kbGVyKGtleTpzdHJpbmcsIGhhbmRsZXI6IFRlbXBsYXRlSGFuZGxlcik6IHZvaWQge1xuICAgIGN1c3RvbUhhbmRsZXJzW2tleV0gPSBoYW5kbGVyO1xuICAgIC8vICRGbG93Rml4TWVcbiAgICBoYW5kbGVycy51bnNoaWZ0KGhhbmRsZXIuY2FsbClcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFjY2Vzc0hhbmRsZXIoa2V5OiBzdHJpbmcpOiBUZW1wbGF0ZUhhbmRsZXIge1xuICAgIHJldHVybiBjdXN0b21IYW5kbGVyc1trZXldXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1bmxvYWRIYW5kbGVyKGtleTogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc3QgaGFuZGxlciA9IGN1c3RvbUhhbmRsZXJzW2tleV07XG4gICAgaGFuZGxlcnMgPSBoYW5kbGVycy5maWx0ZXIoZWwgPT4gZWwgIT09IGhhbmRsZXIuY2FsbClcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldENvcmVIYW5kbGVyKGtleTogc3RyaW5nLCBoYW5kbGVyOiBUZW1wbGF0ZUhhbmRsZXIpOiB2b2lkIHtcbiAgICBjb3JlSGFuZGxlcnNba2V5XSA9IGhhbmRsZXJcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvaGFuZGxlcnMuanMiLCIvLyBAZmxvd1xuXG5pbXBvcnQge2dldFN0b3JhZ2UsIHN0b3JhZ2VLZXlzfSBmcm9tIFwiLi9zdG9yYWdlXCI7XG5cbmNvbnN0IHByb3BzU3RvcmFnZSA9IGdldFN0b3JhZ2Uoc3RvcmFnZUtleXMuUFJPUFMpO1xuY29uc3QgZXZlbnRzU3RvcmFnZSA9IGdldFN0b3JhZ2Uoc3RvcmFnZUtleXMuRVZFTlRTKTtcblxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyUHJvcHNTdG9yYWdlKCk6IHZvaWQge1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBwcm9wc1N0b3JhZ2Uua2V5cygpKSB7XG4gICAgICAgICAgICBpZiAoIWtleS5pc0Nvbm5lY3RlZCkge1xuICAgICAgICAgICAgICAgIHByb3BzU3RvcmFnZS5kZWxldGUoa2V5KVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyRXZlbnRzU3RvcmFnZSgpOiB2b2lkIHtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgZXZlbnRzU3RvcmFnZS5rZXlzKCkpIHtcbiAgICAgICAgICAgIGlmICgha2V5LmlzQ29ubmVjdGVkKSB7XG4gICAgICAgICAgICAgICAgZXZlbnRzU3RvcmFnZS5kZWxldGUoa2V5KVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRhZ05hbWVUb1Byb3Aobm9kZU5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIG5vZGVOYW1lLnNwbGl0KFwiLVwiKS5yZWR1Y2UoXG4gICAgICAgIChhY2MsIG5leHQpID0+IHtcbiAgICAgICAgICAgIGlmIChuZXh0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFjYyArIG5leHRbMF0udG9VcHBlckNhc2UoKSArIG5leHQuc2xpY2UoMSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBhY2NcbiAgICAgICAgfVxuICAgICk7XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3V0aWxzLmpzIiwiLy8gQGZsb3dcblxuZXhwb3J0IHtcbiAgICBzZXRJbXBsZW1lbnRhdGlvbiBhcyBjaGFuZ2VXZWJDb21wb25lbnRzSW1wbGVtZW5hdGlvbixcbiAgICBjb21wb25lbnRzUmVhZHksXG4gICAgc2V0UmVhZHlDaGVjayBhcyBjaGFuZ2VXZWJDb21wb25lbnRzUmVhZHlDaGVjayxcbiAgICBkZWZhdWx0IGFzIHJlZ2lzdGVyQ29tcG9uZW50XG59IGZyb20gXCIuL3dlYi1jb21wb25lbnRzXCJcblxuZXhwb3J0IHtcbiAgICBzZXRJbXBsZW1lbnRhdGlvbiBhcyBjaGFuZ2VTdG9yZUltcGxlbWVudGF0aW9uLFxuICAgIHJlZ2lzdGVyUmVkdWNlcixcbiAgICByZW1vdmVSZWR1Y2VyLFxuICAgIHN1YnNjcmliZSxcbiAgICBnZXRTdGF0ZVxufSBmcm9tIFwiLi9zdG9yZVwiXG5cbmV4cG9ydCB7XG4gICAgYWRkVGVtcGxhdGVIYW5kbGVyLFxuICAgIHNldENvcmVIYW5kbGVyLFxuICAgIHVubG9hZEhhbmRsZXIsXG4gICAgYWNjZXNzSGFuZGxlcixcbn0gZnJvbSBcIi4vaGFuZGxlcnNcIlxuXG5leHBvcnQge1xuICAgIGh0bWwsXG4gICAgY3NzXG59IGZyb20gXCIuL3RhZ1wiXG5cbmV4cG9ydCB7XG4gICAgZ2V0U3RvcmFnZSxcbiAgICBhZGRTdG9yYWdlLFxuICAgIHJlbW92ZVN0b3JhZ2UsXG4gICAgc2V0U3RvcmFnZURyaXZlclxufSBmcm9tIFwiLi9zdG9yYWdlXCJcblxuZXhwb3J0IHtiaW5kfSBmcm9tIFwiLi9iaW5kXCJcblxuZXhwb3J0IHtkZWZhdWx0IGFzIENvbXBvbmVudH0gZnJvbSBcIi4vQ29tcG9uZW50XCJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9pbmRleC5qcyIsIi8vIEBmbG93XG5cbmltcG9ydCB7Y2FsbEhhbmRsZXJzfSBmcm9tIFwiLi9oYW5kbGVyc1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gaHRtbChzdHJpbmdzOiBzdHJpbmdbXSwgLi4uYXJnczogYW55W10pIHtcbiAgICBpZiAoIWFyZ3MubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBzdHJpbmdzWzBdXG4gICAgfVxuXG4gICAgY29uc3QgQVJHID0gXCJfX0FSR19fXCI7XG4gICAgbGV0IHRwbDogc3RyaW5nID0gXCJcIjtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0cmluZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdHBsICs9IHN0cmluZ3NbaV07XG4gICAgICAgIGlmIChpIDwgc3RyaW5ncy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGFyZ3NbaV0gPT09IFwiZnVuY3Rpb25cIiB8fCB0eXBlb2YgYXJnc1tpXSA9PT0gXCJvYmplY3RcIilcbiAgICAgICAgICAgICAgICB0cGwgKz0gQVJHICsgaTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB0cGwgKz0gYXJnc1tpXVxuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRlbXBsYXRlXCIpO1xuICAgIHRlbXBsYXRlLmlubmVySFRNTCA9IHRwbDtcbiAgICBjYWxsSGFuZGxlcnModGVtcGxhdGUuY29udGVudCwgYXJncyk7XG4gICAgcmV0dXJuIHRlbXBsYXRlXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjc3Moc3RyaW5nczogc3RyaW5nW10sIC4uLmFyZ3M6IGFueVtdKSB7XG4gICAgbGV0IHJlc3VsdCA9ICcnO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyaW5ncy5sZW5ndGg7IGkrKykge1xuICAgICAgICByZXN1bHQgKz0gc3RyaW5nc1tpXTtcbiAgICAgICAgaWYgKGkgPCBzdHJpbmdzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYXJnc1tpXSA9PT0gXCJmdW5jdGlvblwiKVxuICAgICAgICAgICAgICAgIHJlc3VsdCArPSBhcmdzW2ldKCk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgcmVzdWx0ICs9IGFyZ3NbaV1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3RhZy5qcyIsIi8vIEBmbG93XG5cbmltcG9ydCB7YWRkU3RvcmFnZSwgZ2V0U3RvcmFnZX0gZnJvbSBcIi4vc3RvcmFnZVwiXG5cbmNvbnN0IEtFWSA9IFwiQk9VTkRTXCI7XG5jb25zdCBNQVhfU1RPUkFHRV9TSVpFID0gMTAwO1xuXG5hZGRTdG9yYWdlKFxuICAgIEtFWSxcbiAgICBuZXcgTWFwKClcbik7XG5cbmZ1bmN0aW9uIGFwcGVuZFRvU3RvcmFnZShmbjogRnVuY3Rpb24sIHZhbHVlOiBNYXA8YW55LCBGdW5jdGlvbj4pOiB2b2lkIHtcbiAgICBjb25zdCBzdG9yYWdlOiBNYXA8RnVuY3Rpb24sIE1hcDxhbnksIEZ1bmN0aW9uPj4gPSBnZXRTdG9yYWdlKEtFWSk7XG4gICAgaWYgKHN0b3JhZ2Uuc2l6ZSA9PT0gTUFYX1NUT1JBR0VfU0laRSkge1xuICAgICAgICBjb25zdCBrZXlzID0gc3RvcmFnZS5rZXlzKCk7XG4gICAgICAgIC8vICRGbG93Rml4TWVcbiAgICAgICAgc3RvcmFnZS5kZWxldGUoa2V5cy5uZXh0KCkudmFsdWUpO1xuICAgIH1cbiAgICBzdG9yYWdlLnNldChmbiwgdmFsdWUpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBiaW5kKGZuOiBGdW5jdGlvbiwgLi4uYXJnczogYW55W10pOiBGdW5jdGlvbiB7XG4gICAgY29uc3Qgc3RvcmFnZTogTWFwPEZ1bmN0aW9uLCBNYXA8YW55LCBGdW5jdGlvbj4+ID0gZ2V0U3RvcmFnZShLRVkpO1xuICAgIGNvbnN0IGJvdW5kID0gc3RvcmFnZS5nZXQoZm4pO1xuICAgIGNvbnN0IGZpcnN0QXJnID0gYXJnc1swXTtcbiAgICBjb25zdCBib3VuZEZuID0gZm4uYmluZChudWxsLCAuLi5hcmdzKTtcbiAgICBpZiAoYm91bmQpIHtcbiAgICAgICAgaWYgKCFib3VuZC5nZXQoZmlyc3RBcmcpKSB7XG4gICAgICAgICAgICBib3VuZC5zZXQoXG4gICAgICAgICAgICAgICAgZmlyc3RBcmcsXG4gICAgICAgICAgICAgICAgYm91bmRGblxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJldHVybiBib3VuZEZuXG4gICAgICAgIH1cbiAgICAgICAgLy8gJEZsb3dGaXhNZVxuICAgICAgICByZXR1cm4gYm91bmQuZ2V0KGZpcnN0QXJnKVxuICAgIH1cblxuICAgIGNvbnN0IGZuTWFwID0gbmV3IE1hcCgpO1xuICAgIGZuTWFwLnNldChcbiAgICAgICAgZmlyc3RBcmcsXG4gICAgICAgIGJvdW5kRm5cbiAgICApO1xuICAgIGFwcGVuZFRvU3RvcmFnZShcbiAgICAgICAgZm4sXG4gICAgICAgIGZuTWFwXG4gICAgKTtcbiAgICByZXR1cm4gYm91bmRGblxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9iaW5kLmpzIiwiLy8gQGZsb3dcblxuaW1wb3J0IHtzdWJzY3JpYmUsIGdldFN0YXRlfSBmcm9tIFwiLi9zdG9yZVwiXG5pbXBvcnQge3JlbmRlcn0gZnJvbSBcIi4vcmVuZGVyXCJcbmltcG9ydCB7Z2V0U3RvcmFnZSwgc3RvcmFnZUtleXN9IGZyb20gXCIuL3N0b3JhZ2VcIlxuaW1wb3J0IHtjbGVhckV2ZW50c1N0b3JhZ2UsIGNsZWFyUHJvcHNTdG9yYWdlfSBmcm9tIFwiLi91dGlsc1wiO1xuXG5jb25zdCBwcm9wc1N0b3JhZ2UgPSBnZXRTdG9yYWdlKHN0b3JhZ2VLZXlzLlBST1BTKTtcblxuZnVuY3Rpb24gcGFyc2VBdHRyaWJ1dGVzKGF0dHJpYnV0ZXM6IE5hbWVkTm9kZU1hcCk6IE9iamVjdCB7XG4gICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgZm9yIChjb25zdCBhdHRyaWJ1dGUgb2YgYXR0cmlidXRlcykge1xuICAgICAgICByZXN1bHRbYXR0cmlidXRlLm5hbWVdID0gYXR0cmlidXRlLnZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb21wb25lbnQgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIHJldHVybiBPYmplY3QuZ2V0UHJvdG90eXBlT2YodGhpcykuY29uc3RydWN0b3IubmFtZVxuICAgIH1cblxuICAgIGdldCBpc1NoYWRvdygpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG5cbiAgICBnZXQgcHJvcHMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi50aGlzLl9fZGVmYXVsdFByb3BzLFxuICAgICAgICAgICAgLi4ucGFyc2VBdHRyaWJ1dGVzKHRoaXMuYXR0cmlidXRlcyksXG4gICAgICAgICAgICAuLi4ocHJvcHNTdG9yYWdlLmdldCh0aGlzKSB8fCB7fSlcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldCBwcm9wcyhwcm9wczogT2JqZWN0KSB7XG4gICAgICAgIHRoaXMuX19kZWZhdWx0UHJvcHMgPSBwcm9wcztcbiAgICB9XG5cbiAgICBnZXQga2V5cygpIHtcbiAgICAgICAgcmV0dXJuIFtdXG4gICAgfVxuXG4gICAgZ2V0IHN0eWxlcygpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gXCJcIlxuICAgIH1cblxuICAgIHN0YXRpYyBnZXQgb2JzZXJ2ZWRBdHRyaWJ1dGVzKCk6IHN0cmluZ1tdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub2JzZXJ2YWJsZVByb3BzLm1hcCgocHJvcDogc3RyaW5nKTogc3RyaW5nID0+IHtcbiAgICAgICAgICAgIGxldCByZXMgPSBcIlwiO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcm9wLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHByb3BbaV0gPT09IHByb3BbaV0udG9VcHBlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgICAgICByZXMgKz0gXCItXCIrcHJvcFtpXS50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzICs9IHByb3BbaV1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgc3RhdGljIGdldCBvYnNlcnZhYmxlUHJvcHMoKSB7XG4gICAgICAgIHJldHVybiBbXVxuICAgIH1cblxuICAgIF9fZGVmYXVsdFByb3BzID0ge307XG5cbiAgICBzdWJzY3JpcHRpb25zID0gW107XG5cbiAgICBzdGF0ZSA9IHt9O1xuXG4gICAgbW91bnRlZCA9IGZhbHNlO1xuXG4gICAgYmVmb3JlUmVuZGVyKCkge31cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuICcnXG4gICAgfVxuXG4gICAgYWZ0ZXJSZW5kZXIoKSB7fVxuXG4gICAgc3Vic2NyaWJlVG9TdG9yZSgpIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgdGhpcy5rZXlzKSB7XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMucHVzaChcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmUoa2V5LCBzdGF0ZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGVba2V5XSA9IHN0YXRlO1xuICAgICAgICAgICAgICAgICAgICByZW5kZXIuY2FsbCh0aGlzKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZVtrZXldID0gZ2V0U3RhdGUoa2V5KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICB0aGlzLnN1YnNjcmliZVRvU3RvcmUoKTtcbiAgICAgICAgcmVuZGVyLmNhbGwodGhpcyk7XG5cbiAgICAgICAgdGhpcy5jb25uZWN0ZWQoKVxuICAgIH1cblxuICAgIGNvbm5lY3RlZCgpIHt9XG5cbiAgICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgZm9yIChjb25zdCBzdWJzY3JpcHRpb24gb2YgdGhpcy5zdWJzY3JpcHRpb25zKSB7XG4gICAgICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKVxuICAgICAgICB9XG4gICAgICAgIGNsZWFyUHJvcHNTdG9yYWdlKCk7XG4gICAgICAgIGNsZWFyRXZlbnRzU3RvcmFnZSgpO1xuXG4gICAgICAgIHRoaXMuZGlzY29ubmVjdGVkKClcbiAgICB9XG5cbiAgICBkaXNjb25uZWN0ZWQoKSB7fVxuXG4gICAgYWRvcHRlZENhbGxiYWNrKCkge1xuICAgICAgICB0aGlzLnN1YnNjcmliZVRvU3RvcmUoKTtcbiAgICAgICAgcmVuZGVyLmNhbGwodGhpcyk7XG5cbiAgICAgICAgdGhpcy5hZG9wdGVkKClcbiAgICB9XG5cbiAgICBhZG9wdGVkKCkge31cblxuICAgIGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhhdHRyaWJ1dGVOYW1lOiBzdHJpbmcsIG9sZFZhbHVlOiBzdHJpbmcsIG5ld1ZhbHVlOiBzdHJpbmcpIHtcbiAgICAgICAgaWYgKHRoaXMubW91bnRlZCAmJiBvbGRWYWx1ZSAhPSBuZXdWYWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5wcm9wc0NoYW5nZWQoXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAuLi50aGlzLnByb3BzLFxuICAgICAgICAgICAgICAgICAgICBbYXR0cmlidXRlTmFtZV06IG5ld1ZhbHVlLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICByZW5kZXIuY2FsbCh0aGlzKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJvcHNDaGFuZ2VkKG5ld1Byb3BzOiBPYmplY3QpIHt9XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL0NvbXBvbmVudC5qcyIsIi8vIEBmbG93XG5cbmltcG9ydCB7aXNDdXN0b21Db21wb25lbnR9IGZyb20gXCIuL3dlYi1jb21wb25lbnRzXCJcbmltcG9ydCB7Z2V0U3RvcmFnZSwgc3RvcmFnZUtleXN9IGZyb20gXCIuL3N0b3JhZ2VcIlxuaW1wb3J0IHNoYWxsb3dFcXVhbCBmcm9tIFwiLi9zaGFsbG93LWVxdWFsXCI7XG5cbmNvbnN0IHByb3BzU3RvcmFnZSA9IGdldFN0b3JhZ2Uoc3RvcmFnZUtleXMuUFJPUFMpO1xuXG5mdW5jdGlvbiBub2RlRXF1YWxzKGVsZW1lbnROb2RlOiBOb2RlLCBmcmFnbWVudE5vZGU6IE5vZGUpOiBib29sZWFuIHtcbiAgICBjb25zdCBlbENsb25lID0gZWxlbWVudE5vZGUuY2xvbmVOb2RlKGZhbHNlKTtcbiAgICBjb25zdCBmckNsb25lID0gZnJhZ21lbnROb2RlLmNsb25lTm9kZShmYWxzZSk7XG4gICAgaWYgKHByb3BzU3RvcmFnZS5nZXQoZnJhZ21lbnROb2RlKSkge1xuICAgICAgICByZXR1cm4gc2hhbGxvd0VxdWFsKFxuICAgICAgICAgICAgcHJvcHNTdG9yYWdlLmdldChlbGVtZW50Tm9kZSksXG4gICAgICAgICAgICBwcm9wc1N0b3JhZ2UuZ2V0KGZyYWdtZW50Tm9kZSlcbiAgICAgICAgKSAmJiBlbENsb25lLmlzRXF1YWxOb2RlKGZyQ2xvbmUpXG4gICAgfVxuICAgIHJldHVybiBlbENsb25lLmlzRXF1YWxOb2RlKGZyQ2xvbmUpXG59XG5cbmZ1bmN0aW9uIGNvbnRlbnREaWZmZXIoZWxlbWVudE5vZGU6IE5vZGUsIGZyYWdtZW50Tm9kZTogTm9kZSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBlbGVtZW50Tm9kZS5pc0VxdWFsTm9kZShmcmFnbWVudE5vZGUpID09PSBmYWxzZVxufVxuXG5mdW5jdGlvbiBlbGVtZW50c0RlbGV0ZWQoZWxlbWVudE5vZGVzOiBOb2RlW10sIGZyYWdtZW50Tm9kZXM6IE5vZGVbXSk6IEFycmF5PE5vZGU+IHtcbiAgICBpZiAoZWxlbWVudE5vZGVzLmxlbmd0aCA+IGZyYWdtZW50Tm9kZXMubGVuZ3RoKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZWxlbWVudE5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoZWxlbWVudE5vZGVzW2ldICYmICFmcmFnbWVudE5vZGVzW2ldKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtlbGVtZW50Tm9kZXNbaV1dLmNvbmNhdChcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudHNEZWxldGVkKFxuICAgICAgICAgICAgICAgICAgICAgICAgQXJyYXkuZnJvbShlbGVtZW50Tm9kZXMpLnNsaWNlKGkgKyAxKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIEFycmF5LmZyb20oZnJhZ21lbnROb2Rlcykuc2xpY2UoaSlcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghbm9kZUVxdWFscyhlbGVtZW50Tm9kZXNbaV0sIGZyYWdtZW50Tm9kZXNbaV0pKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVsZXRlZCA9IGVsZW1lbnRzRGVsZXRlZChcbiAgICAgICAgICAgICAgICAgICAgQXJyYXkuZnJvbShlbGVtZW50Tm9kZXMpLnNsaWNlKGkgKyAxKSxcbiAgICAgICAgICAgICAgICAgICAgQXJyYXkuZnJvbShmcmFnbWVudE5vZGVzKS5zbGljZShpKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgaWYgKGRlbGV0ZWQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbZWxlbWVudE5vZGVzW2ldXVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gW11cbn1cblxuZnVuY3Rpb24gY2hpbGRyZW5DaGFuZ2VkQ291bnQoZWxlbWVudE5vZGVzOiBOb2RlW10sIGZyYWdtZW50Tm9kZXM6IE5vZGVbXSk6IG51bWJlciB7XG4gICAgaWYgKGVsZW1lbnROb2Rlcy5sZW5ndGggPiBmcmFnbWVudE5vZGVzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gZnJhZ21lbnROb2Rlcy5sZW5ndGhcbiAgICB9XG4gICAgbGV0IGNoYW5nZWQgPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZWxlbWVudE5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGVsQ2xvbmUgPSBlbGVtZW50Tm9kZXNbaV0uY2xvbmVOb2RlKGZhbHNlKTtcbiAgICAgICAgY29uc3QgZnJDbG9uZSA9IGZyYWdtZW50Tm9kZXNbaV0uY2xvbmVOb2RlKGZhbHNlKTtcbiAgICAgICAgaWYgKCFub2RlRXF1YWxzKGVsZW1lbnROb2Rlc1tpXSwgZnJhZ21lbnROb2Rlc1tpXSkpIHtcbiAgICAgICAgICAgIGlmICghaXNFbXB0eU5vZGUoZWxDbG9uZSkgJiYgIWlzRW1wdHlOb2RlKGZyQ2xvbmUpKSB7XG4gICAgICAgICAgICAgICAgY2hhbmdlZCsrXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNoYW5nZWRcbn1cblxuZnVuY3Rpb24gYXBwZW5kQ2hpbGRyZW4oZWxlbWVudE5vZGU6IE5vZGUsIGVsZW1lbnRDaGlsZHJlbjogTm9kZVtdLCBmcmFnbWVudENoaWxkcmVuOiBOb2RlW10pOiB2b2lkIHtcbiAgICBjb25zdCBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICBmb3IgKGxldCBpID0gZWxlbWVudENoaWxkcmVuLmxlbmd0aDsgaSA8IGZyYWdtZW50Q2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoXG4gICAgICAgICAgICBmcmFnbWVudENoaWxkcmVuW2ldXG4gICAgICAgIClcbiAgICB9XG4gICAgZWxlbWVudE5vZGUuYXBwZW5kQ2hpbGQoXG4gICAgICAgIGZyYWdtZW50XG4gICAgKVxufVxuXG5mdW5jdGlvbiB1cGRhdGVBdHRyaWJ1dGVzKGVsZW1lbnROb2RlOiBOb2RlLCBmcmFnbWVudE5vZGU6IE5vZGUpOiB2b2lkIHtcbiAgICBjb25zdCBhdHRyaWJ1dGVzID0gKGZyYWdtZW50Tm9kZTogYW55KS5hdHRyaWJ1dGVzIHx8IFtdO1xuICAgIGNvbnN0IGVsZW1lbnRBdHRyaWJ1dGVzID0gKGVsZW1lbnROb2RlOiBhbnkpLmF0dHJpYnV0ZXMgfHwgW107XG4gICAgaWYgKGVsZW1lbnRBdHRyaWJ1dGVzLmxlbmd0aCA+IGF0dHJpYnV0ZXMubGVuZ3RoKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZWxlbWVudEF0dHJpYnV0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZSA9IGVsZW1lbnRBdHRyaWJ1dGVzW2ldO1xuICAgICAgICAgICAgaWYgKCEoZnJhZ21lbnROb2RlOiBhbnkpLmhhc0F0dHJpYnV0ZShhdHRyaWJ1dGUubm9kZU5hbWUpKSB7XG4gICAgICAgICAgICAgICAgKGVsZW1lbnROb2RlOiBhbnkpLnJlbW92ZUF0dHJpYnV0ZShcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlLm5vZGVOYW1lXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXR0cmlidXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBhdHRyaWJ1dGUgPSBhdHRyaWJ1dGVzW2ldO1xuICAgICAgICAoZWxlbWVudE5vZGU6IGFueSkuc2V0QXR0cmlidXRlKFxuICAgICAgICAgICAgYXR0cmlidXRlLm5vZGVOYW1lLFxuICAgICAgICAgICAgYXR0cmlidXRlLm5vZGVWYWx1ZVxuICAgICAgICApO1xuICAgIH1cbiAgICBpZiAocHJvcHNTdG9yYWdlLmdldChmcmFnbWVudE5vZGUpKSB7XG4gICAgICAgIGNvbnN0IGVsUHJvcHMgPSBwcm9wc1N0b3JhZ2UuZ2V0KGVsZW1lbnROb2RlKTtcbiAgICAgICAgY29uc3QgZnJQcm9wcyA9IHByb3BzU3RvcmFnZS5nZXQoZnJhZ21lbnROb2RlKTtcbiAgICAgICAgcHJvcHNTdG9yYWdlLnNldChcbiAgICAgICAgICAgIGVsZW1lbnROb2RlLFxuICAgICAgICAgICAgZnJQcm9wc1xuICAgICAgICApO1xuICAgICAgICBpZiAoIXNoYWxsb3dFcXVhbChlbFByb3BzLCBmclByb3BzKSkge1xuICAgICAgICAgICAgaWYgKGlzQ3VzdG9tQ29tcG9uZW50KGVsZW1lbnROb2RlKSkge1xuICAgICAgICAgICAgICAgIHJlbmRlci5jYWxsKChlbGVtZW50Tm9kZTogYW55KSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gdXBkYXRlRWxlbWVudChlbGVtZW50Tm9kZTogTm9kZSwgZnJhZ21lbnROb2RlOiBOb2RlKTogdm9pZCB7XG4gICAgaWYgKGlzQ3VzdG9tQ29tcG9uZW50KGVsZW1lbnROb2RlKSkge1xuICAgICAgICByZXR1cm4gdXBkYXRlQXR0cmlidXRlcyhcbiAgICAgICAgICAgIGVsZW1lbnROb2RlLFxuICAgICAgICAgICAgZnJhZ21lbnROb2RlXG4gICAgICAgIClcbiAgICB9XG4gICAgaWYgKCFub2RlRXF1YWxzKGVsZW1lbnROb2RlLCBmcmFnbWVudE5vZGUpKSB7XG4gICAgICAgIHVwZGF0ZUF0dHJpYnV0ZXMoXG4gICAgICAgICAgICBlbGVtZW50Tm9kZSxcbiAgICAgICAgICAgIGZyYWdtZW50Tm9kZVxuICAgICAgICApXG4gICAgfVxuICAgIHVwZGF0ZUNoaWxkcmVuKFxuICAgICAgICBlbGVtZW50Tm9kZSxcbiAgICAgICAgZnJhZ21lbnROb2RlXG4gICAgKVxufVxuXG5mdW5jdGlvbiBpc0VtcHR5Tm9kZShub2RlOiBOb2RlKTogYm9vbGVhbiB7XG4gICAgaWYgKG5vZGUubm9kZVR5cGUgIT09IE5vZGUuVEVYVF9OT0RFKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBpZiAobm9kZS5jaGlsZE5vZGVzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgaWYgKG5vZGUuaW5uZXJUZXh0KSB7XG4gICAgICAgIHJldHVybiBCb29sZWFuKG5vZGUuaW5uZXJUZXh0LnRyaW0oKSkgPT09IGZhbHNlXG4gICAgfVxuICAgIGlmICgobm9kZTogYW55KS5pbm5lckhUTUwpIHtcbiAgICAgICAgcmV0dXJuIEJvb2xlYW4oKG5vZGU6IGFueSkuaW5uZXJIVE1MLnRyaW0oKSkgPT09IGZhbHNlXG4gICAgfVxuICAgIGlmICgobm9kZTogYW55KS50ZXh0Q29udGVudCkge1xuICAgICAgICByZXR1cm4gQm9vbGVhbigobm9kZTogYW55KS50ZXh0Q29udGVudC50cmltKCkpID09PSBmYWxzZVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZVxufVxuXG5mdW5jdGlvbiBub2RlRmlsdGVyKG5vZGU6IE5vZGUpOiBib29sZWFuIHtcbiAgICBpZiAobm9kZSkge1xuICAgICAgICByZXR1cm4gKG5vZGUubm9kZVR5cGUgPT09IE5vZGUuRUxFTUVOVF9OT0RFIHx8XG4gICAgICAgICAgICBub2RlLm5vZGVUeXBlID09PSBOb2RlLlRFWFRfTk9ERSkgJiZcbiAgICAgICAgICAgIG5vZGUubm9kZU5hbWUgIT09IFwiU1RZTEVcIiAmJlxuICAgICAgICAgICAgIWlzRW1wdHlOb2RlKG5vZGUpXG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxufVxuXG5mdW5jdGlvbiBoYW5kbGVDaGlsZHJlbkNvdW50Q2hhbmdlZChlbGVtZW50Tm9kZTogTm9kZSwgZnJhZ21lbnROb2RlOiBOb2RlLCBlbGVtZW50Tm9kZXM6IE5vZGVbXSwgZnJhZ21lbnROb2RlczogTm9kZVtdKTogdm9pZCB7XG4gICAgY29uc3QgZGVsZXRlZCA9IGVsZW1lbnRzRGVsZXRlZChcbiAgICAgICAgZWxlbWVudE5vZGVzLFxuICAgICAgICBmcmFnbWVudE5vZGVzLFxuICAgICk7XG4gICAgaWYgKGZyYWdtZW50Tm9kZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiAoZWxlbWVudE5vZGUucGFyZW50Tm9kZTogYW55KS5yZXBsYWNlQ2hpbGQoXG4gICAgICAgICAgICBmcmFnbWVudE5vZGUsXG4gICAgICAgICAgICBlbGVtZW50Tm9kZSxcbiAgICAgICAgKTtcbiAgICB9XG4gICAgaWYgKGRlbGV0ZWQubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIChkZWxldGVkWzBdLnBhcmVudE5vZGU6IGFueSkucmVtb3ZlQ2hpbGQoZGVsZXRlZFswXSk7XG4gICAgICAgIHJldHVybiB1cGRhdGVDaGlsZHJlbihcbiAgICAgICAgICAgIGVsZW1lbnROb2RlLFxuICAgICAgICAgICAgZnJhZ21lbnROb2RlXG4gICAgICAgIClcbiAgICB9XG4gICAgaWYgKGNoaWxkcmVuQ2hhbmdlZENvdW50KGVsZW1lbnROb2RlcywgZnJhZ21lbnROb2RlcykgPiAwKSB7XG4gICAgICAgIHJldHVybiAoZWxlbWVudE5vZGUucGFyZW50Tm9kZTogYW55KS5yZXBsYWNlQ2hpbGQoXG4gICAgICAgICAgICBmcmFnbWVudE5vZGUsXG4gICAgICAgICAgICBlbGVtZW50Tm9kZSxcbiAgICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIGFwcGVuZENoaWxkcmVuKFxuICAgICAgICBlbGVtZW50Tm9kZSxcbiAgICAgICAgZWxlbWVudE5vZGVzLFxuICAgICAgICBmcmFnbWVudE5vZGVzLFxuICAgIClcbn1cblxuZnVuY3Rpb24gdXBkYXRlQ2hpbGRyZW4oZWxlbWVudE5vZGU6IE5vZGUsIGZyYWdtZW50Tm9kZTogTm9kZSk6IHZvaWQge1xuICAgIGNvbnN0IGVsZW1lbnROb2RlcyA9IEFycmF5LmZyb20oZWxlbWVudE5vZGUuY2hpbGROb2RlcykuZmlsdGVyKG5vZGVGaWx0ZXIpO1xuICAgIGNvbnN0IGZyYWdtZW50Tm9kZXMgPSBBcnJheS5mcm9tKGZyYWdtZW50Tm9kZS5jaGlsZE5vZGVzKS5maWx0ZXIobm9kZUZpbHRlcik7XG4gICAgaWYgKGVsZW1lbnROb2Rlcy5sZW5ndGggIT09IGZyYWdtZW50Tm9kZXMubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBoYW5kbGVDaGlsZHJlbkNvdW50Q2hhbmdlZChcbiAgICAgICAgICAgIGVsZW1lbnROb2RlLFxuICAgICAgICAgICAgZnJhZ21lbnROb2RlLFxuICAgICAgICAgICAgZWxlbWVudE5vZGVzLFxuICAgICAgICAgICAgZnJhZ21lbnROb2Rlc1xuICAgICAgICApXG4gICAgfVxuICAgIGlmIChlbGVtZW50Tm9kZXMubGVuZ3RoID09PSAwICYmIGZyYWdtZW50Tm9kZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGlmIChjb250ZW50RGlmZmVyKGVsZW1lbnROb2RlLCBmcmFnbWVudE5vZGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gKGVsZW1lbnROb2RlLnBhcmVudE5vZGU6IGFueSkucmVwbGFjZUNoaWxkKFxuICAgICAgICAgICAgICAgIGZyYWdtZW50Tm9kZSxcbiAgICAgICAgICAgICAgICBlbGVtZW50Tm9kZSxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbGVtZW50Tm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdXBkYXRlRWxlbWVudChcbiAgICAgICAgICAgIGVsZW1lbnROb2Rlc1tpXSxcbiAgICAgICAgICAgIGZyYWdtZW50Tm9kZXNbaV1cbiAgICAgICAgKVxuICAgIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlRnJhZ21lbnRGcm9tU3RyKHRwbDogc3RyaW5nKTogSFRNTFRlbXBsYXRlRWxlbWVudCB7XG4gICAgY29uc3QgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGVtcGxhdGVcIik7XG4gICAgdGVtcGxhdGUuaW5uZXJIVE1MID0gdHBsO1xuICAgIHJldHVybiB0ZW1wbGF0ZVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgIHBlcmZvcm1hbmNlLm1hcmsoJ211c2tvdCBzdGFydCByZW5kZXJpbmcnKTtcbiAgICB0aGlzLmJlZm9yZVJlbmRlcigpO1xuXG4gICAgaWYgKHRoaXMuaXNTaGFkb3cgJiYgIXRoaXMuc2hhZG93Um9vdCkge1xuICAgICAgICBwZXJmb3JtYW5jZS5tYXJrKCdtdXNrb3QgYXR0YWNoaW5nIHJvb3QnKTtcbiAgICAgICAgdGhpcy5hdHRhY2hTaGFkb3coe21vZGU6ICdvcGVuJ30pO1xuICAgICAgICBwZXJmb3JtYW5jZS5tYXJrKCdtdXNrb3Qgcm9vdCBhdHRhY2hlZCcpO1xuICAgICAgICBwZXJmb3JtYW5jZS5tZWFzdXJlKFxuICAgICAgICAgICAgXCJtdXNrb3QgYXR0YWNoIHJvb3RcIixcbiAgICAgICAgICAgICdtdXNrb3QgYXR0YWNoaW5nIHJvb3QnLFxuICAgICAgICAgICAgJ211c2tvdCByb290IGF0dGFjaGVkJ1xuICAgICAgICApO1xuICAgIH1cbiAgICBwZXJmb3JtYW5jZS5tYXJrKCdtdXNrb3QgY3JlYXRlIHJlbmRlciBET00nKTtcbiAgICBjb25zdCByZW5kZXJSZXMgPSB0aGlzLnJlbmRlcigpO1xuICAgIHBlcmZvcm1hbmNlLm1hcmsoJ211c2tvdCByZW5kZXIgRE9NIGNyZWF0ZWQnKTtcbiAgICBwZXJmb3JtYW5jZS5tZWFzdXJlKFxuICAgICAgICBcIm11c2tvdCBjb21wb25lbnQgcmVuZGVyIHJlc3VsdFwiLFxuICAgICAgICAnbXVza290IGNyZWF0ZSByZW5kZXIgRE9NJyxcbiAgICAgICAgJ211c2tvdCByZW5kZXIgRE9NIGNyZWF0ZWQnXG4gICAgKTtcblxuICAgIGNvbnN0IHJvb3QgPSB0aGlzLmlzU2hhZG93ID8gKHRoaXMuc2hhZG93Um9vdDogYW55KSA6IHRoaXM7XG4gICAgcGVyZm9ybWFuY2UubWFyaygnbXVza290IGNyZWF0ZSBmcmFnbWVudCcpO1xuICAgIGNvbnN0IGZyYWdtZW50ID0gdHlwZW9mIHJlbmRlclJlcyA9PT0gXCJzdHJpbmdcIiA/IGNyZWF0ZUZyYWdtZW50RnJvbVN0cihyZW5kZXJSZXMpIDogcmVuZGVyUmVzO1xuICAgIHBlcmZvcm1hbmNlLm1hcmsoJ211c2tvdCBmcmFnbWVudCBjcmVhdGVkJyk7XG4gICAgcGVyZm9ybWFuY2UubWVhc3VyZShcbiAgICAgICAgXCJtdXNrb3QgZnJhZ21lbnQgY3JlYXRpb25cIixcbiAgICAgICAgJ211c2tvdCBjcmVhdGUgZnJhZ21lbnQnLFxuICAgICAgICAnbXVza290IGZyYWdtZW50IGNyZWF0ZWQnXG4gICAgKTtcblxuICAgIGlmICghdGhpcy5tb3VudGVkKSB7XG4gICAgICAgIHBlcmZvcm1hbmNlLm1hcmsoJ211c2tvdCBpbnNlcnQgc3R5bGUgaW50byBjb21wb25lbnQnKTtcbiAgICAgICAgcm9vdC5pbm5lckhUTUwgPSBgPHN0eWxlPiR7dGhpcy5zdHlsZXN9PC9zdHlsZT5gO1xuICAgICAgICBwZXJmb3JtYW5jZS5tYXJrKCdtdXNrb3Qgc3R5bGUgaW5zZXJ0ZWQnKTtcbiAgICAgICAgcGVyZm9ybWFuY2UubWVhc3VyZShcbiAgICAgICAgICAgIFwibXVza290IHN0eWxlIGNyZWF0aW9uICYgaW5zZXJ0IGJ5IGlubmVySFRNTFwiLFxuICAgICAgICAgICAgJ211c2tvdCBpbnNlcnQgc3R5bGUgaW50byBjb21wb25lbnQnLFxuICAgICAgICAgICAgJ211c2tvdCBzdHlsZSBpbnNlcnRlZCdcbiAgICAgICAgKTtcblxuICAgICAgICBwZXJmb3JtYW5jZS5tYXJrKCdtdXNrb3QgYXBwZW5kIGNoaWxkIHdpdGggY29udGVudCcpO1xuICAgICAgICByb290LmFwcGVuZENoaWxkKGZyYWdtZW50LmNvbnRlbnQpO1xuICAgICAgICBwZXJmb3JtYW5jZS5tYXJrKCdtdXNrb3QgY29udGVudCBhcHBlbmRlZCcpO1xuICAgICAgICBwZXJmb3JtYW5jZS5tZWFzdXJlKFxuICAgICAgICAgICAgXCJtdXNrb3QgYXBwZW5kIGNvbnRlbnQgb24gaW5pdGlhbCByZW5kZXJcIixcbiAgICAgICAgICAgICdtdXNrb3QgYXBwZW5kIGNoaWxkIHdpdGggY29udGVudCcsXG4gICAgICAgICAgICAnbXVza290IGNvbnRlbnQgYXBwZW5kZWQnXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5tb3VudGVkID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBwZXJmb3JtYW5jZS5tYXJrKCdtdXNrb3QgaW5zZXJ0IHN0eWxlcyBiZWZvcmUgY29udGVudCBvbiB1cGRhdGUnKTtcbiAgICAgICAgY29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG4gICAgICAgIHN0eWxlLmlubmVySFRNTCA9IHRoaXMuc3R5bGVzO1xuICAgICAgICBmcmFnbWVudC5jb250ZW50Lmluc2VydEJlZm9yZShcbiAgICAgICAgICAgIHN0eWxlLFxuICAgICAgICAgICAgZnJhZ21lbnQuY29udGVudC5maXJzdENoaWxkXG4gICAgICAgICk7XG4gICAgICAgIHBlcmZvcm1hbmNlLm1hcmsoJ211c2tvdCBzdHlsZXMgaW5zZXJ0ZWQgb24gdXBkYXRlJyk7XG4gICAgICAgIHBlcmZvcm1hbmNlLm1lYXN1cmUoXG4gICAgICAgICAgICBcIm11c2tvdCBhZGQgc3R5bGVzIGJ5IGluc2VydEJlZm9yZVwiLFxuICAgICAgICAgICAgJ211c2tvdCBpbnNlcnQgc3R5bGVzIGJlZm9yZSBjb250ZW50IG9uIHVwZGF0ZScsXG4gICAgICAgICAgICAnbXVza290IHN0eWxlcyBpbnNlcnRlZCBvbiB1cGRhdGUnXG4gICAgICAgICk7XG5cbiAgICAgICAgcGVyZm9ybWFuY2UubWFyaygnbXVza290IHVwZGF0ZSBjaGlsZHJlbicpO1xuICAgICAgICB1cGRhdGVDaGlsZHJlbihcbiAgICAgICAgICAgIHJvb3QsXG4gICAgICAgICAgICBmcmFnbWVudC5jb250ZW50XG4gICAgICAgICk7XG4gICAgICAgIHBlcmZvcm1hbmNlLm1hcmsoJ211c2tvdCBjaGlsZHJlbiB1cGRhdGVkJyk7XG4gICAgICAgIHBlcmZvcm1hbmNlLm1lYXN1cmUoXG4gICAgICAgICAgICBcIm11c2tvdCB1cGRhdGUgY29tcG9uZW50J3MgY2hpbGRyZW5cIixcbiAgICAgICAgICAgICdtdXNrb3QgdXBkYXRlIGNoaWxkcmVuJyxcbiAgICAgICAgICAgICdtdXNrb3QgY2hpbGRyZW4gdXBkYXRlZCdcbiAgICAgICAgKTtcbiAgICB9XG4gICAgcGVyZm9ybWFuY2UubWFyaygnbXVza290IGZpbmlzaCByZW5kZXJpbmcnKTtcbiAgICBwZXJmb3JtYW5jZS5tZWFzdXJlKFxuICAgICAgICBcIm11c2tvdCBmdWxsIHJlbmRlclwiLFxuICAgICAgICAnbXVza290IHN0YXJ0IHJlbmRlcmluZycsXG4gICAgICAgICdtdXNrb3QgZmluaXNoIHJlbmRlcmluZydcbiAgICApO1xuXG4gICAgdGhpcy5hZnRlclJlbmRlcigpO1xufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9yZW5kZXIuanMiLCJjb25zdCBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cbi8qKlxuICogaW5saW5lZCBPYmplY3QuaXMgcG9seWZpbGwgdG8gYXZvaWQgcmVxdWlyaW5nIGNvbnN1bWVycyBzaGlwIHRoZWlyIG93blxuICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2lzXG4gKi9cbmZ1bmN0aW9uIGlzKHgsIHkpIHtcbiAgICAvLyBTYW1lVmFsdWUgYWxnb3JpdGhtXG4gICAgaWYgKHggPT09IHkpIHtcbiAgICAgICAgLy8gU3RlcHMgMS01LCA3LTEwXG4gICAgICAgIC8vIFN0ZXBzIDYuYi02LmU6ICswICE9IC0wXG4gICAgICAgIC8vIEFkZGVkIHRoZSBub256ZXJvIHkgY2hlY2sgdG8gbWFrZSBGbG93IGhhcHB5LCBidXQgaXQgaXMgcmVkdW5kYW50XG4gICAgICAgIHJldHVybiB4ICE9PSAwIHx8IHkgIT09IDAgfHwgMSAvIHggPT09IDEgLyB5O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFN0ZXAgNi5hOiBOYU4gPT0gTmFOXG4gICAgICAgIHJldHVybiB4ICE9PSB4ICYmIHkgIT09IHk7XG4gICAgfVxufVxuXG4vKipcbiAqIFBlcmZvcm1zIGVxdWFsaXR5IGJ5IGl0ZXJhdGluZyB0aHJvdWdoIGtleXMgb24gYW4gb2JqZWN0IGFuZCByZXR1cm5pbmcgZmFsc2VcbiAqIHdoZW4gYW55IGtleSBoYXMgdmFsdWVzIHdoaWNoIGFyZSBub3Qgc3RyaWN0bHkgZXF1YWwgYmV0d2VlbiB0aGUgYXJndW1lbnRzLlxuICogUmV0dXJucyB0cnVlIHdoZW4gdGhlIHZhbHVlcyBvZiBhbGwga2V5cyBhcmUgc3RyaWN0bHkgZXF1YWwuXG4gKi9cbmZ1bmN0aW9uIHNoYWxsb3dFcXVhbChvYmpBOiBtaXhlZCwgb2JqQjogbWl4ZWQpOiBib29sZWFuIHtcbiAgICBpZiAoaXMob2JqQSwgb2JqQikpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgICB0eXBlb2Ygb2JqQSAhPT0gJ29iamVjdCcgfHxcbiAgICAgICAgb2JqQSA9PT0gbnVsbCB8fFxuICAgICAgICB0eXBlb2Ygb2JqQiAhPT0gJ29iamVjdCcgfHxcbiAgICAgICAgb2JqQiA9PT0gbnVsbFxuICAgICkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3Qga2V5c0EgPSBPYmplY3Qua2V5cyhvYmpBKTtcbiAgICBjb25zdCBrZXlzQiA9IE9iamVjdC5rZXlzKG9iakIpO1xuXG4gICAgaWYgKGtleXNBLmxlbmd0aCAhPT0ga2V5c0IubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBUZXN0IGZvciBBJ3Mga2V5cyBkaWZmZXJlbnQgZnJvbSBCLlxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwga2V5c0EubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgIWhhc093blByb3BlcnR5LmNhbGwob2JqQiwga2V5c0FbaV0pIHx8XG4gICAgICAgICAgICAhaXMob2JqQVtrZXlzQVtpXV0sIG9iakJba2V5c0FbaV1dKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xufVxuXG5leHBvcnQgZGVmYXVsdCBzaGFsbG93RXF1YWw7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3NoYWxsb3ctZXF1YWwuanMiXSwic291cmNlUm9vdCI6IiJ9