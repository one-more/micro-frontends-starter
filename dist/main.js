module.exports=function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=4)}([function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e){d.driver=d.driver.migrate(e)}function i(e){return d.driver.getItem(e)}function u(e,t){d.driver.setItem(e,t)}function c(e){d.driver.removeItem(e)}Object.defineProperty(t,"__esModule",{value:!0});var a;t.setStorageDriver=o,t.getStorage=i,t.addStorage=u,t.removeStorage=c;var s=new Map,f=new Map,l=t.storageKeys={PROPS:"props",EVENTS:"events"},p={items:Object.create((a={},n(a,l.PROPS,s),n(a,l.EVENTS,f),a)),setItem:function(e,t){this.items[e]=t},getItem:function(e){return this.items[e]},removeItem:function(e){delete this.items[e]},migrate:function(e){for(var t in this.items)e.setItem(t,this.items[t]);return e}},d=t.storage={driver:p}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={registerComponent:function(e,t){"customElements"in window?customElements.define(e,t):u().then(function(){i(e,t)})},isCustomComponent:function(e){return e.nodeName.includes("-")}},o=n,i=function(e,t){return o.registerComponent(e,t)},u=(t.setImplementation=function(e){o=e},function(){return Promise.resolve()});t.componentsReady=function(){return u()},t.setReadyCheck=function(e){u=e};t.default=i;t.isCustomComponent=function(e){return o.isCustomComponent(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={reducers:{},subscriptions:{},addReducer:function(e,t){this.reducers[e]=t},removeReducer:function(e){return delete this.reducers[e],!1},subscribe:function(e,t){var r=this;return this.subscriptions[e]||(this.subscriptions[e]=[]),this.subscriptions[e].push(t),{unsubscribe:function(){r.subscriptions[e]=r.subscriptions[e].filter(function(e){return e!==t})}}},getState:function(e){},migrate:function(e){for(var t in this.reducers){var r=this.reducers[t];e.addReducer(t,r)}for(var n in this.subscriptions){var o=!0,i=!1,u=void 0;try{for(var c,a=this.subscriptions[n][Symbol.iterator]();!(o=(c=a.next()).done);o=!0){var s=c.value;e.subscribe(n,s)}}catch(e){i=!0,u=e}finally{try{!o&&a.return&&a.return()}finally{if(i)throw u}}}return e}},o={currentImplementation:n};t.setImplementation=function(e){o.currentImplementation=o.currentImplementation.migrate(e)},t.registerReducer=function(e,t){o.currentImplementation.addReducer(e,t)},t.removeReducer=function(e){o.currentImplementation.removeReducer(e)},t.subscribe=function(e,t){return o.currentImplementation.subscribe(e,t)},t.getState=function(e){return o.currentImplementation.getState(e)}},function(e,t,r){"use strict";function n(e){return e.split("-").reduce(function(e,t){return t?e+t[0].toUpperCase()+t.slice(1):e})}function o(e){for(var t="",r=0;r<e.length;r++)e[r]===e[r].toUpperCase()?t+="-"+e[r].toLowerCase():t+=e[r];return t}function i(e,t){return t?"__ARG__"+e:"\x3c!--__ARG__"+e+"--\x3e"}function u(e){return e.match(/(?:<!--)?__ARG__(\d+)(?:-->)?/)}function c(e,t){return e.replace(/(?:<!--)?__ARG__(\d+)(?:-->)?/g,t)}function a(e){return'="'===e.trim().slice(-2)}Object.defineProperty(t,"__esModule",{value:!0}),t.tagNameToProp=n,t.propNameToTag=o,t.createTagArg=i,t.matchTagArg=u,t.replaceTagArg=c,t.attributeStarts=a},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(1);Object.defineProperty(t,"changeWebComponentsImplemenation",{enumerable:!0,get:function(){return o.setImplementation}}),Object.defineProperty(t,"componentsReady",{enumerable:!0,get:function(){return o.componentsReady}}),Object.defineProperty(t,"changeWebComponentsReadyCheck",{enumerable:!0,get:function(){return o.setReadyCheck}}),Object.defineProperty(t,"registerComponent",{enumerable:!0,get:function(){return n(o).default}});var i=r(2);Object.defineProperty(t,"changeStoreImplementation",{enumerable:!0,get:function(){return i.setImplementation}}),Object.defineProperty(t,"registerReducer",{enumerable:!0,get:function(){return i.registerReducer}}),Object.defineProperty(t,"removeReducer",{enumerable:!0,get:function(){return i.removeReducer}}),Object.defineProperty(t,"subscribe",{enumerable:!0,get:function(){return i.subscribe}}),Object.defineProperty(t,"getState",{enumerable:!0,get:function(){return i.getState}});var u=r(5);Object.defineProperty(t,"css",{enumerable:!0,get:function(){return u.css}});var c=r(0);Object.defineProperty(t,"getStorage",{enumerable:!0,get:function(){return c.getStorage}}),Object.defineProperty(t,"addStorage",{enumerable:!0,get:function(){return c.addStorage}}),Object.defineProperty(t,"removeStorage",{enumerable:!0,get:function(){return c.removeStorage}}),Object.defineProperty(t,"setStorageDriver",{enumerable:!0,get:function(){return c.setStorageDriver}});var a=r(6);Object.defineProperty(t,"bind",{enumerable:!0,get:function(){return a.bind}});var s=r(3);Object.defineProperty(t,"matchTagArg",{enumerable:!0,get:function(){return s.matchTagArg}}),Object.defineProperty(t,"replaceTagArg",{enumerable:!0,get:function(){return s.replaceTagArg}});var f=r(7);Object.defineProperty(t,"Component",{enumerable:!0,get:function(){return n(f).default}}),Object.defineProperty(t,"connect",{enumerable:!0,get:function(){return f.connect}}),Object.defineProperty(t,"define",{enumerable:!0,get:function(){return f.define}}),Object.defineProperty(t,"props",{enumerable:!0,get:function(){return f.props}})},function(e,t,r){"use strict";function n(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(!r.length)return e[0];for(var o="",i=0;i<e.length;i++)o+=e[i],i<e.length-1&&(Array.isArray(r[i])?o+=r[i].join(""):o+=r[i]);return o}function o(e){for(var t="",r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];for(var i=0;i<e.length;i++)t+=e[i],i<e.length-1&&("function"==typeof n[i]?t+=n[i]():t+=n[i]);return t}Object.defineProperty(t,"__esModule",{value:!0}),t.html=n,t.css=o},function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e,t){var r=(0,u.getStorage)(c);if(r.size===a){var n=r.keys();r.delete(n.next().value)}r.set(e,t)}function i(e){for(var t=(0,u.getStorage)(c),r=t.get(e),i=arguments.length,a=Array(i>1?i-1:0),s=1;s<i;s++)a[s-1]=arguments[s];var f=a[0],l=e.bind.apply(e,[null].concat(n(a)));if(r)return r.get(f)?r.get(f):(r.set(f,l),l);var p=new Map;return p.set(f,l),o(e,p),l}Object.defineProperty(t,"__esModule",{value:!0}),t.bind=i;var u=r(0),c="BOUNDS",a=100;(0,u.addStorage)(c,new Map)},function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(e){var t={},r=!0,n=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done);r=!0){var c=i.value;t[(0,v.tagNameToProp)(c.name)]=c.value}}catch(e){n=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(n)throw o}}return t}function a(e){return function(t){return function(t){function r(){return o(this,r),i(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return u(r,t),d(r,[{key:"keys",get:function(){return[e]}}]),r}(t)}}function s(e){return function(t){return(0,y.default)(e,t),t}}function f(e){var t=S++;return P.set(t,e),{"props-id":t,toString:function(){return'props-id="'+t+'"'}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.connect=a,t.define=s,t.props=f;var b=r(1),y=function(e){return e&&e.__esModule?e:{default:e}}(b),m=r(2),g=r(8),h=r(0),v=r(3),_=r(5),O=function(e){var t=e.getPrototypeOf||function(e){return e.__proto__},r=e.setPrototypeOf||function(e,t){return e.__proto__=t,e},n="object"===("undefined"==typeof Reflect?"undefined":l(Reflect))?Reflect.construct:function(e,t,n){var o,i=[null];return i.push.apply(i,t),o=e.bind.apply(e,i),r(new o,n.prototype)};return function(e){var o=t(e);return r(e,r(function(){return n(o,arguments,t(this).constructor)},o))}}(Object),P=(0,h.getStorage)(h.storageKeys.PROPS),j=O(function(e){function t(){var e,r,n,u;o(this,t);for(var c=arguments.length,a=Array(c),s=0;s<c;s++)a[s]=arguments[s];return r=n=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),n.__defaultProps={},n.subscriptions=[],n.state={},n.mounted=!1,n.css=_.css,u=r,i(n,u)}return u(t,e),d(t,[{key:"beforeRender",value:function(){}},{key:"render",value:function(){return""}},{key:"insertContent",value:function(e,t){if("string"!=typeof t)throw new Error("default renderer can handle only strings");e.innerHTML=t}},{key:"afterRender",value:function(){}},{key:"subscribeToStore",value:function(){var e=this,t=!0,r=!1,n=void 0;try{for(var o,i=this.keys[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var u=o.value;this.subscriptions.push((0,m.subscribe)(u,function(t){e.state=t,g.render.call(e)})),this.state=(0,m.getState)(u)}}catch(e){r=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw n}}}},{key:"connectedCallback",value:function(){this.subscribeToStore(),g.render.call(this),this.connected()}},{key:"connected",value:function(){}},{key:"disconnectedCallback",value:function(){var e=!0,t=!1,r=void 0;try{for(var n,o=this.subscriptions[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){n.value.unsubscribe()}}catch(e){t=!0,r=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw r}}this.disconnected()}},{key:"disconnected",value:function(){}},{key:"adoptedCallback",value:function(){this.subscribeToStore(),g.render.call(this),this.adopted()}},{key:"adopted",value:function(){}},{key:"attributeChangedCallback",value:function(e,t,r){this.mounted&&t!=r&&(this.propsChanged(p({},this.props,n({},e,r))),g.render.call(this))}},{key:"propsChanged",value:function(e){}},{key:"name",get:function(){return Object.getPrototypeOf(this).constructor.name}},{key:"isShadow",get:function(){return!0}},{key:"props",get:function(){var e=c(this.attributes),t=Number(e.propsId);return p({},this.__defaultProps,e,P.get(t)||{})},set:function(e){this.__defaultProps=e}},{key:"keys",get:function(){return[]}},{key:"styles",get:function(){return""}},{key:"html",get:function(){return _.html}}],[{key:"observedAttributes",get:function(){return this.observableProps.map(v.propNameToTag).concat("props-id")}},{key:"observableProps",get:function(){return[]}}]),t}(HTMLElement));t.default=j;var S=0},function(e,t,r){"use strict";function n(){this.beforeRender(),this.isShadow&&!this.shadowRoot&&this.attachShadow({mode:"open"}),this.root||(this.root=document.createElement("div"),this.root.style.display="contents",this.isShadow?(this.shadowRoot.innerHTML="<style>"+this.styles+"</style>",this.shadowRoot.appendChild(this.root)):(this.styles&&(this.innerHTML="<style>"+this.styles+"</style>"),this.appendChild(this.root)));var e=this.render();e&&this.insertContent(this.root,e),this.mounted=!0,this.afterRender()}Object.defineProperty(t,"__esModule",{value:!0}),t.render=n}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vbWFpbi5qcyIsIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgNTdmZDJmZTAyYjA3ZDU4ZDE3NDQiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0b3JhZ2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3dlYi1jb21wb25lbnRzLmpzIiwid2VicGFjazovLy8uL3NyYy9zdG9yZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovLy8uL3NyYy90YWcuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2JpbmQuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0NvbXBvbmVudC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcmVuZGVyLmpzIl0sIm5hbWVzIjpbIm1vZHVsZSIsImV4cG9ydHMiLCJtb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaW5zdGFsbGVkTW9kdWxlcyIsImkiLCJsIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwiZ2V0IiwibiIsIl9fZXNNb2R1bGUiLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJfZGVmaW5lUHJvcGVydHkiLCJvYmoiLCJrZXkiLCJ2YWx1ZSIsIndyaXRhYmxlIiwic2V0U3RvcmFnZURyaXZlciIsImRyaXZlciIsInN0b3JhZ2UiLCJtaWdyYXRlIiwiZ2V0U3RvcmFnZSIsImdldEl0ZW0iLCJhZGRTdG9yYWdlIiwic2V0SXRlbSIsInJlbW92ZVN0b3JhZ2UiLCJyZW1vdmVJdGVtIiwiX09iamVjdCRjcmVhdGUiLCJwcm9wc01hcCIsIk1hcCIsImV2ZW50c01hcCIsInN0b3JhZ2VLZXlzIiwiUFJPUFMiLCJFVkVOVFMiLCJpdGVtcyIsImNyZWF0ZSIsInRoaXMiLCJkZWZhdWx0SW1wbGVtZW50YXRpb24iLCJyZWdpc3RlckNvbXBvbmVudCIsImNvbXBvbmVudCIsIndpbmRvdyIsImN1c3RvbUVsZW1lbnRzIiwiZGVmaW5lIiwiY3VycmVudFJlYWR5Q2hlY2siLCJ0aGVuIiwiaXNDdXN0b21Db21wb25lbnQiLCJub2RlIiwibm9kZU5hbWUiLCJpbmNsdWRlcyIsImN1cnJlbnRJbXBsZW1lbnRhdGlvbiIsInNldEltcGxlbWVudGF0aW9uIiwiaW1wbGVtZW50YXRpb24iLCJQcm9taXNlIiwicmVzb2x2ZSIsImNvbXBvbmVudHNSZWFkeSIsInNldFJlYWR5Q2hlY2siLCJyZWFkeUNoZWNrIiwiZGVmYXVsdCIsInN0dWJJbXBsZW1lbnRhdGlvbiIsInJlZHVjZXJzIiwic3Vic2NyaXB0aW9ucyIsImFkZFJlZHVjZXIiLCJyZWR1Y2VyIiwicmVtb3ZlUmVkdWNlciIsInN1YnNjcmliZSIsImNiIiwiX3RoaXMiLCJwdXNoIiwidW5zdWJzY3JpYmUiLCJmaWx0ZXIiLCJlbCIsImdldFN0YXRlIiwibmV3U3RvcmUiLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uIiwiX2RpZEl0ZXJhdG9yRXJyb3IiLCJfaXRlcmF0b3JFcnJvciIsInVuZGVmaW5lZCIsIl9zdGVwIiwiX2l0ZXJhdG9yIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJuZXh0IiwiZG9uZSIsInN1YnNjcmlwdGlvbiIsImVyciIsInJldHVybiIsInN0b3JlIiwicmVnaXN0ZXJSZWR1Y2VyIiwidGFnTmFtZVRvUHJvcCIsInNwbGl0IiwicmVkdWNlIiwiYWNjIiwidG9VcHBlckNhc2UiLCJzbGljZSIsInByb3BOYW1lVG9UYWciLCJwcm9wIiwicmVzIiwibGVuZ3RoIiwidG9Mb3dlckNhc2UiLCJjcmVhdGVUYWdBcmciLCJpbmRleCIsInN0YXJ0QXR0cmlidXRlIiwibWF0Y2hUYWdBcmciLCJzdHIiLCJtYXRjaCIsInJlcGxhY2VUYWdBcmciLCJmbiIsInJlcGxhY2UiLCJhdHRyaWJ1dGVTdGFydHMiLCJ0cmltIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIl93ZWJDb21wb25lbnRzIiwiX3N0b3JlIiwiX3RhZyIsImNzcyIsIl9zdG9yYWdlIiwiX2JpbmQiLCJiaW5kIiwiX3V0aWxzIiwiX0NvbXBvbmVudCIsImNvbm5lY3QiLCJwcm9wcyIsImh0bWwiLCJzdHJpbmdzIiwiX2xlbiIsImFyZ3VtZW50cyIsImFyZ3MiLCJBcnJheSIsIl9rZXkiLCJ0cGwiLCJpc0FycmF5Iiwiam9pbiIsInJlc3VsdCIsIl9sZW4yIiwiX2tleTIiLCJfdG9Db25zdW1hYmxlQXJyYXkiLCJhcnIiLCJhcnIyIiwiZnJvbSIsImFwcGVuZFRvU3RvcmFnZSIsIktFWSIsInNpemUiLCJNQVhfU1RPUkFHRV9TSVpFIiwia2V5cyIsImRlbGV0ZSIsInNldCIsImJvdW5kIiwiZmlyc3RBcmciLCJib3VuZEZuIiwiYXBwbHkiLCJjb25jYXQiLCJmbk1hcCIsIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsInNlbGYiLCJSZWZlcmVuY2VFcnJvciIsIl9pbmhlcml0cyIsInN1YkNsYXNzIiwic3VwZXJDbGFzcyIsImNvbnN0cnVjdG9yIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJwYXJzZUF0dHJpYnV0ZXMiLCJhdHRyaWJ1dGVzIiwiYXR0cmlidXRlIiwiV3JhcHBlZCIsIl9XcmFwcGVkIiwiX2NsYXNzMiIsImdldFByb3RvdHlwZU9mIiwiX2NyZWF0ZUNsYXNzIiwiX3dlYkNvbXBvbmVudHMyIiwiaWQiLCJwcm9wc0lkIiwicHJvcHNTdG9yYWdlIiwicHJvcHMtaWQiLCJ0b1N0cmluZyIsIl90eXBlb2YiLCJfZXh0ZW5kcyIsImFzc2lnbiIsInRhcmdldCIsInNvdXJjZSIsImRlZmluZVByb3BlcnRpZXMiLCJkZXNjcmlwdG9yIiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwiX3JlbmRlciIsIl9maXhCYWJlbEV4dGVuZCIsIk8iLCJnUE8iLCJzUE8iLCJjb25zdHJ1Y3QiLCJSZWZsZWN0IiwiUGFyZW50IiwiQ2xhc3MiLCJhIiwiQ29tcG9uZW50IiwiX0hUTUxFbGVtZW50IiwiX3JlZiIsIl90ZW1wIiwiX3JldCIsIl9fZGVmYXVsdFByb3BzIiwic3RhdGUiLCJtb3VudGVkIiwicm9vdCIsImNvbnRlbnQiLCJFcnJvciIsImlubmVySFRNTCIsIl90aGlzMiIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yIiwiX2RpZEl0ZXJhdG9yRXJyb3IyIiwiX2l0ZXJhdG9yRXJyb3IyIiwiX3N0ZXAyIiwiX2l0ZXJhdG9yMiIsInJlbmRlciIsInN1YnNjcmliZVRvU3RvcmUiLCJjb25uZWN0ZWQiLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyIsIl9kaWRJdGVyYXRvckVycm9yMyIsIl9pdGVyYXRvckVycm9yMyIsIl9zdGVwMyIsIl9pdGVyYXRvcjMiLCJkaXNjb25uZWN0ZWQiLCJhZG9wdGVkIiwiYXR0cmlidXRlTmFtZSIsIm9sZFZhbHVlIiwibmV3VmFsdWUiLCJwcm9wc0NoYW5nZWQiLCJuZXdQcm9wcyIsIk51bWJlciIsIm9ic2VydmFibGVQcm9wcyIsIm1hcCIsIkhUTUxFbGVtZW50IiwiYmVmb3JlUmVuZGVyIiwiaXNTaGFkb3ciLCJzaGFkb3dSb290IiwiYXR0YWNoU2hhZG93IiwibW9kZSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInN0eWxlIiwiZGlzcGxheSIsInN0eWxlcyIsImFwcGVuZENoaWxkIiwicmVuZGVyUmVzIiwiaW5zZXJ0Q29udGVudCIsImFmdGVyUmVuZGVyIl0sIm1hcHBpbmdzIjoiQUFBQUEsT0FBT0MsUUFDRSxTQUFVQyxHQ0duQixRQUFBQyxHQUFBQyxHQUdBLEdBQUFDLEVBQUFELEdBQ0EsTUFBQUMsR0FBQUQsR0FBQUgsT0FHQSxJQUFBRCxHQUFBSyxFQUFBRCxJQUNBRSxFQUFBRixFQUNBRyxHQUFBLEVBQ0FOLFdBVUEsT0FOQUMsR0FBQUUsR0FBQUksS0FBQVIsRUFB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LE1BQU91SCxhVDJ5QlA1RyxJQUFLLHFCQUNMWCxJQUFLLFdTNXpCTCxNQUFPaUMsTUFBS29NLGdCQUFnQkMsSUFBSTNJLGlCQUFld0QsT0FBTyxlVGcwQnREeEksSUFBSyxrQkFDTFgsSUFBSyxXUzd6QkwsYVRrMEJHbU0sR1N0MkI0Qm9DLGFUeTJCdkN6UCxHQUFRd0UsUVN6MkJhNkksQ0ErSXJCLElBQUl2QixHQUFVLEdUd3dCUixTQUFVL0wsRUFBUUMsRUFBU0UsR0FFakMsWVUxNkJPLFNBQVNxTyxLQUNacEwsS0FBS3VNLGVBRUR2TSxLQUFLd00sV0FBYXhNLEtBQUt5TSxZQUN2QnpNLEtBQUswTSxjQUFjQyxLQUFNLFNBR3hCM00sS0FBSzBLLE9BQ04xSyxLQUFLMEssS0FBT2tDLFNBQVNDLGNBQWMsT0FDbkM3TSxLQUFLMEssS0FBS29DLE1BQU1DLFFBQVUsV0FDdEIvTSxLQUFLd00sVUFDTHhNLEtBQUt5TSxXQUFXNUIsVUFBaEIsVUFBc0M3SyxLQUFLZ04sT0FBM0MsV0FDQWhOLEtBQUt5TSxXQUFXUSxZQUFZak4sS0FBSzBLLFFBRWpDMUssS0FBS2dOLFNBQVdoTixLQUFLNkssVUFBTCxVQUEyQjdLLEtBQUtnTixPQUFoQyxZQUNoQmhOLEtBQUtpTixZQUFZak4sS0FBSzBLLE9BSTlCLElBQU13QyxHQUFZbE4sS0FBS29MLFFBQ25COEIsSUFDQWxOLEtBQUttTixjQUFjbk4sS0FBSzBLLEtBQU13QyxHQUdsQ2xOLEtBQUt5SyxTQUFVLEVBRWZ6SyxLQUFLb04sY1ZtNUJUelAsT0FBT0MsZUFBZWYsRUFBUyxjQUMzQjhCLE9BQU8sSUFFWDlCLEVVaDdCZ0J1TyIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPVxuLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4vKioqKioqLyBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHRpOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdGw6IGZhbHNlLFxuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge31cbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbi8qKioqKiovIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4vKioqKioqLyBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuLyoqKioqKi8gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuLyoqKioqKi8gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuLyoqKioqKi8gXHRcdFx0XHRnZXQ6IGdldHRlclxuLyoqKioqKi8gXHRcdFx0fSk7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4vKioqKioqLyBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4vKioqKioqLyBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuLyoqKioqKi8gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbi8qKioqKiovIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4vKioqKioqLyBcdFx0cmV0dXJuIGdldHRlcjtcbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDQpO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfT2JqZWN0JGNyZWF0ZTtcblxuZXhwb3J0cy5zZXRTdG9yYWdlRHJpdmVyID0gc2V0U3RvcmFnZURyaXZlcjtcbmV4cG9ydHMuZ2V0U3RvcmFnZSA9IGdldFN0b3JhZ2U7XG5leHBvcnRzLmFkZFN0b3JhZ2UgPSBhZGRTdG9yYWdlO1xuZXhwb3J0cy5yZW1vdmVTdG9yYWdlID0gcmVtb3ZlU3RvcmFnZTtcblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblxudmFyIHByb3BzTWFwID0gbmV3IE1hcCgpO1xuXG52YXIgZXZlbnRzTWFwID0gbmV3IE1hcCgpO1xuXG52YXIgc3RvcmFnZUtleXMgPSBleHBvcnRzLnN0b3JhZ2VLZXlzID0ge1xuICAgIFBST1BTOiBcInByb3BzXCIsXG4gICAgRVZFTlRTOiBcImV2ZW50c1wiXG59O1xuXG52YXIgZHJpdmVyID0ge1xuICAgIGl0ZW1zOiBPYmplY3QuY3JlYXRlKChfT2JqZWN0JGNyZWF0ZSA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX09iamVjdCRjcmVhdGUsIHN0b3JhZ2VLZXlzLlBST1BTLCBwcm9wc01hcCksIF9kZWZpbmVQcm9wZXJ0eShfT2JqZWN0JGNyZWF0ZSwgc3RvcmFnZUtleXMuRVZFTlRTLCBldmVudHNNYXApLCBfT2JqZWN0JGNyZWF0ZSkpLFxuICAgIHNldEl0ZW06IGZ1bmN0aW9uIHNldEl0ZW0oa2V5LCB2YWx1ZSkge1xuICAgICAgICB0aGlzLml0ZW1zW2tleV0gPSB2YWx1ZTtcbiAgICB9LFxuICAgIGdldEl0ZW06IGZ1bmN0aW9uIGdldEl0ZW0oa2V5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLml0ZW1zW2tleV07XG4gICAgfSxcbiAgICByZW1vdmVJdGVtOiBmdW5jdGlvbiByZW1vdmVJdGVtKGtleSkge1xuICAgICAgICBkZWxldGUgdGhpcy5pdGVtc1trZXldO1xuICAgIH0sXG4gICAgbWlncmF0ZTogZnVuY3Rpb24gbWlncmF0ZShkcml2ZXIpIHtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMuaXRlbXMpIHtcbiAgICAgICAgICAgIGRyaXZlci5zZXRJdGVtKGtleSwgdGhpcy5pdGVtc1trZXldKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZHJpdmVyO1xuICAgIH1cbn07XG5cbnZhciBzdG9yYWdlID0gZXhwb3J0cy5zdG9yYWdlID0ge1xuICAgIGRyaXZlcjogZHJpdmVyXG59O1xuXG5mdW5jdGlvbiBzZXRTdG9yYWdlRHJpdmVyKGRyaXZlcikge1xuICAgIHN0b3JhZ2UuZHJpdmVyID0gc3RvcmFnZS5kcml2ZXIubWlncmF0ZShkcml2ZXIpO1xufVxuXG5mdW5jdGlvbiBnZXRTdG9yYWdlKGtleSkge1xuICAgIHJldHVybiBzdG9yYWdlLmRyaXZlci5nZXRJdGVtKGtleSk7XG59XG5cbmZ1bmN0aW9uIGFkZFN0b3JhZ2Uoa2V5LCB2YWx1ZSkge1xuICAgIHN0b3JhZ2UuZHJpdmVyLnNldEl0ZW0oa2V5LCB2YWx1ZSk7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVN0b3JhZ2Uoa2V5KSB7XG4gICAgc3RvcmFnZS5kcml2ZXIucmVtb3ZlSXRlbShrZXkpO1xufVxuXG4vKioqLyB9KSxcbi8qIDEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG5cbnZhciBkZWZhdWx0SW1wbGVtZW50YXRpb24gPSB7XG4gICAgcmVnaXN0ZXJDb21wb25lbnQ6IGZ1bmN0aW9uIHJlZ2lzdGVyQ29tcG9uZW50KG5hbWUsIGNvbXBvbmVudCkge1xuICAgICAgICBpZiAoJ2N1c3RvbUVsZW1lbnRzJyBpbiB3aW5kb3cpIHtcbiAgICAgICAgICAgIGN1c3RvbUVsZW1lbnRzLmRlZmluZShuYW1lLCBjb21wb25lbnQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY3VycmVudFJlYWR5Q2hlY2soKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfcmVnaXN0ZXJDb21wb25lbnQobmFtZSwgY29tcG9uZW50KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBpc0N1c3RvbUNvbXBvbmVudDogZnVuY3Rpb24gaXNDdXN0b21Db21wb25lbnQobm9kZSkge1xuICAgICAgICByZXR1cm4gbm9kZS5ub2RlTmFtZS5pbmNsdWRlcyhcIi1cIik7XG4gICAgfVxufTtcblxudmFyIGN1cnJlbnRJbXBsZW1lbnRhdGlvbiA9IGRlZmF1bHRJbXBsZW1lbnRhdGlvbjtcblxudmFyIF9yZWdpc3RlckNvbXBvbmVudCA9IGZ1bmN0aW9uIF9yZWdpc3RlckNvbXBvbmVudChuYW1lLCBjb21wb25lbnQpIHtcbiAgICByZXR1cm4gY3VycmVudEltcGxlbWVudGF0aW9uLnJlZ2lzdGVyQ29tcG9uZW50KG5hbWUsIGNvbXBvbmVudCk7XG59O1xuXG52YXIgc2V0SW1wbGVtZW50YXRpb24gPSBleHBvcnRzLnNldEltcGxlbWVudGF0aW9uID0gZnVuY3Rpb24gc2V0SW1wbGVtZW50YXRpb24oaW1wbGVtZW50YXRpb24pIHtcbiAgICBjdXJyZW50SW1wbGVtZW50YXRpb24gPSBpbXBsZW1lbnRhdGlvbjtcbn07XG5cbnZhciBjdXJyZW50UmVhZHlDaGVjayA9IGZ1bmN0aW9uIGN1cnJlbnRSZWFkeUNoZWNrKCkge1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbn07XG5cbnZhciBjb21wb25lbnRzUmVhZHkgPSBleHBvcnRzLmNvbXBvbmVudHNSZWFkeSA9IGZ1bmN0aW9uIGNvbXBvbmVudHNSZWFkeSgpIHtcbiAgICByZXR1cm4gY3VycmVudFJlYWR5Q2hlY2soKTtcbn07XG5cbnZhciBzZXRSZWFkeUNoZWNrID0gZXhwb3J0cy5zZXRSZWFkeUNoZWNrID0gZnVuY3Rpb24gc2V0UmVhZHlDaGVjayhyZWFkeUNoZWNrKSB7XG4gICAgY3VycmVudFJlYWR5Q2hlY2sgPSByZWFkeUNoZWNrO1xufTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gX3JlZ2lzdGVyQ29tcG9uZW50O1xudmFyIGlzQ3VzdG9tQ29tcG9uZW50ID0gZXhwb3J0cy5pc0N1c3RvbUNvbXBvbmVudCA9IGZ1bmN0aW9uIGlzQ3VzdG9tQ29tcG9uZW50KG5vZGUpIHtcbiAgICByZXR1cm4gY3VycmVudEltcGxlbWVudGF0aW9uLmlzQ3VzdG9tQ29tcG9uZW50KG5vZGUpO1xufTtcblxuLyoqKi8gfSksXG4vKiAyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxuXG52YXIgc3R1YkltcGxlbWVudGF0aW9uID0ge1xuICAgIHJlZHVjZXJzOiB7fSxcbiAgICBzdWJzY3JpcHRpb25zOiB7fSxcbiAgICBhZGRSZWR1Y2VyOiBmdW5jdGlvbiBhZGRSZWR1Y2VyKGtleSwgcmVkdWNlcikge1xuICAgICAgICB0aGlzLnJlZHVjZXJzW2tleV0gPSByZWR1Y2VyO1xuICAgIH0sXG4gICAgcmVtb3ZlUmVkdWNlcjogZnVuY3Rpb24gcmVtb3ZlUmVkdWNlcihrZXkpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMucmVkdWNlcnNba2V5XTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0sXG4gICAgc3Vic2NyaWJlOiBmdW5jdGlvbiBzdWJzY3JpYmUoa2V5LCBjYikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgIGlmICghdGhpcy5zdWJzY3JpcHRpb25zW2tleV0pIHtcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0aW9uc1trZXldID0gW107XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zW2tleV0ucHVzaChjYik7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB1bnN1YnNjcmliZTogZnVuY3Rpb24gdW5zdWJzY3JpYmUoKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuc3Vic2NyaXB0aW9uc1trZXldID0gX3RoaXMuc3Vic2NyaXB0aW9uc1trZXldLmZpbHRlcihmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsICE9PSBjYjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9LFxuICAgIGdldFN0YXRlOiBmdW5jdGlvbiBnZXRTdGF0ZShrZXkpIHt9LFxuICAgIG1pZ3JhdGU6IGZ1bmN0aW9uIG1pZ3JhdGUobmV3U3RvcmUpIHtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMucmVkdWNlcnMpIHtcbiAgICAgICAgICAgIHZhciByZWR1Y2VyID0gdGhpcy5yZWR1Y2Vyc1trZXldO1xuICAgICAgICAgICAgbmV3U3RvcmUuYWRkUmVkdWNlcihrZXksIHJlZHVjZXIpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIF9rZXkgaW4gdGhpcy5zdWJzY3JpcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWU7XG4gICAgICAgICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBfaXRlcmF0b3JFcnJvciA9IHVuZGVmaW5lZDtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSB0aGlzLnN1YnNjcmlwdGlvbnNbX2tleV1bU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gKF9zdGVwID0gX2l0ZXJhdG9yLm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSBfc3RlcC52YWx1ZTtcblxuICAgICAgICAgICAgICAgICAgICBuZXdTdG9yZS5zdWJzY3JpYmUoX2tleSwgc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgX2l0ZXJhdG9yRXJyb3IgPSBlcnI7XG4gICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiAmJiBfaXRlcmF0b3IucmV0dXJuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3IucmV0dXJuKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXdTdG9yZTtcbiAgICB9XG59O1xuXG52YXIgc3RvcmUgPSB7XG4gICAgY3VycmVudEltcGxlbWVudGF0aW9uOiBzdHViSW1wbGVtZW50YXRpb25cbn07XG5cbnZhciBzZXRJbXBsZW1lbnRhdGlvbiA9IGV4cG9ydHMuc2V0SW1wbGVtZW50YXRpb24gPSBmdW5jdGlvbiBzZXRJbXBsZW1lbnRhdGlvbihpbXBsZW1lbnRhdGlvbikge1xuICAgIHN0b3JlLmN1cnJlbnRJbXBsZW1lbnRhdGlvbiA9IHN0b3JlLmN1cnJlbnRJbXBsZW1lbnRhdGlvbi5taWdyYXRlKGltcGxlbWVudGF0aW9uKTtcbn07XG5cbnZhciByZWdpc3RlclJlZHVjZXIgPSBleHBvcnRzLnJlZ2lzdGVyUmVkdWNlciA9IGZ1bmN0aW9uIHJlZ2lzdGVyUmVkdWNlcihrZXksIHJlZHVjZXIpIHtcbiAgICBzdG9yZS5jdXJyZW50SW1wbGVtZW50YXRpb24uYWRkUmVkdWNlcihrZXksIHJlZHVjZXIpO1xufTtcbnZhciByZW1vdmVSZWR1Y2VyID0gZXhwb3J0cy5yZW1vdmVSZWR1Y2VyID0gZnVuY3Rpb24gcmVtb3ZlUmVkdWNlcihrZXkpIHtcbiAgICBzdG9yZS5jdXJyZW50SW1wbGVtZW50YXRpb24ucmVtb3ZlUmVkdWNlcihrZXkpO1xufTtcbnZhciBzdWJzY3JpYmUgPSBleHBvcnRzLnN1YnNjcmliZSA9IGZ1bmN0aW9uIHN1YnNjcmliZShrZXksIGNiKSB7XG4gICAgcmV0dXJuIHN0b3JlLmN1cnJlbnRJbXBsZW1lbnRhdGlvbi5zdWJzY3JpYmUoa2V5LCBjYik7XG59O1xudmFyIGdldFN0YXRlID0gZXhwb3J0cy5nZXRTdGF0ZSA9IGZ1bmN0aW9uIGdldFN0YXRlKGtleSkge1xuICAgIHJldHVybiBzdG9yZS5jdXJyZW50SW1wbGVtZW50YXRpb24uZ2V0U3RhdGUoa2V5KTtcbn07XG5cbi8qKiovIH0pLFxuLyogMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLnRhZ05hbWVUb1Byb3AgPSB0YWdOYW1lVG9Qcm9wO1xuZXhwb3J0cy5wcm9wTmFtZVRvVGFnID0gcHJvcE5hbWVUb1RhZztcbmV4cG9ydHMuY3JlYXRlVGFnQXJnID0gY3JlYXRlVGFnQXJnO1xuZXhwb3J0cy5tYXRjaFRhZ0FyZyA9IG1hdGNoVGFnQXJnO1xuZXhwb3J0cy5yZXBsYWNlVGFnQXJnID0gcmVwbGFjZVRhZ0FyZztcbmV4cG9ydHMuYXR0cmlidXRlU3RhcnRzID0gYXR0cmlidXRlU3RhcnRzO1xuZnVuY3Rpb24gdGFnTmFtZVRvUHJvcChub2RlTmFtZSkge1xuICAgIHJldHVybiBub2RlTmFtZS5zcGxpdChcIi1cIikucmVkdWNlKGZ1bmN0aW9uIChhY2MsIG5leHQpIHtcbiAgICAgICAgaWYgKG5leHQpIHtcbiAgICAgICAgICAgIHJldHVybiBhY2MgKyBuZXh0WzBdLnRvVXBwZXJDYXNlKCkgKyBuZXh0LnNsaWNlKDEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIHByb3BOYW1lVG9UYWcocHJvcCkge1xuICAgIHZhciByZXMgPSBcIlwiO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcC5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAocHJvcFtpXSA9PT0gcHJvcFtpXS50b1VwcGVyQ2FzZSgpKSB7XG4gICAgICAgICAgICByZXMgKz0gXCItXCIgKyBwcm9wW2ldLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXMgKz0gcHJvcFtpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVUYWdBcmcoaW5kZXgsIHN0YXJ0QXR0cmlidXRlKSB7XG4gICAgaWYgKHN0YXJ0QXR0cmlidXRlKSByZXR1cm4gXCJfX0FSR19fXCIgKyBpbmRleDtcbiAgICByZXR1cm4gXCI8IS0tX19BUkdfX1wiICsgaW5kZXggKyBcIi0tPlwiO1xufVxuXG5mdW5jdGlvbiBtYXRjaFRhZ0FyZyhzdHIpIHtcbiAgICByZXR1cm4gc3RyLm1hdGNoKC8oPzo8IS0tKT9fX0FSR19fKFxcZCspKD86LS0+KT8vKTtcbn1cblxuZnVuY3Rpb24gcmVwbGFjZVRhZ0FyZyhzdHIsIGZuKSB7XG4gICAgcmV0dXJuIHN0ci5yZXBsYWNlKC8oPzo8IS0tKT9fX0FSR19fKFxcZCspKD86LS0+KT8vZywgZm4pO1xufVxuXG5mdW5jdGlvbiBhdHRyaWJ1dGVTdGFydHMoc3RyKSB7XG4gICAgcmV0dXJuIHN0ci50cmltKCkuc2xpY2UoLTIpID09PSBcIj1cXFwiXCI7XG59XG5cbi8qKiovIH0pLFxuLyogNCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfd2ViQ29tcG9uZW50cyA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcImNoYW5nZVdlYkNvbXBvbmVudHNJbXBsZW1lbmF0aW9uXCIsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gX3dlYkNvbXBvbmVudHMuc2V0SW1wbGVtZW50YXRpb247XG4gICAgfVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJjb21wb25lbnRzUmVhZHlcIiwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBfd2ViQ29tcG9uZW50cy5jb21wb25lbnRzUmVhZHk7XG4gICAgfVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJjaGFuZ2VXZWJDb21wb25lbnRzUmVhZHlDaGVja1wiLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIF93ZWJDb21wb25lbnRzLnNldFJlYWR5Q2hlY2s7XG4gICAgfVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJyZWdpc3RlckNvbXBvbmVudFwiLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3dlYkNvbXBvbmVudHMpLmRlZmF1bHQ7XG4gICAgfVxufSk7XG5cbnZhciBfc3RvcmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJjaGFuZ2VTdG9yZUltcGxlbWVudGF0aW9uXCIsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gX3N0b3JlLnNldEltcGxlbWVudGF0aW9uO1xuICAgIH1cbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwicmVnaXN0ZXJSZWR1Y2VyXCIsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gX3N0b3JlLnJlZ2lzdGVyUmVkdWNlcjtcbiAgICB9XG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcInJlbW92ZVJlZHVjZXJcIiwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBfc3RvcmUucmVtb3ZlUmVkdWNlcjtcbiAgICB9XG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcInN1YnNjcmliZVwiLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIF9zdG9yZS5zdWJzY3JpYmU7XG4gICAgfVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJnZXRTdGF0ZVwiLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIF9zdG9yZS5nZXRTdGF0ZTtcbiAgICB9XG59KTtcblxudmFyIF90YWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJjc3NcIiwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBfdGFnLmNzcztcbiAgICB9XG59KTtcblxudmFyIF9zdG9yYWdlID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiZ2V0U3RvcmFnZVwiLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIF9zdG9yYWdlLmdldFN0b3JhZ2U7XG4gICAgfVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJhZGRTdG9yYWdlXCIsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gX3N0b3JhZ2UuYWRkU3RvcmFnZTtcbiAgICB9XG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcInJlbW92ZVN0b3JhZ2VcIiwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBfc3RvcmFnZS5yZW1vdmVTdG9yYWdlO1xuICAgIH1cbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwic2V0U3RvcmFnZURyaXZlclwiLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIF9zdG9yYWdlLnNldFN0b3JhZ2VEcml2ZXI7XG4gICAgfVxufSk7XG5cbnZhciBfYmluZCA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcImJpbmRcIiwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBfYmluZC5iaW5kO1xuICAgIH1cbn0pO1xuXG52YXIgX3V0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwibWF0Y2hUYWdBcmdcIiwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBfdXRpbHMubWF0Y2hUYWdBcmc7XG4gICAgfVxufSk7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJyZXBsYWNlVGFnQXJnXCIsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gX3V0aWxzLnJlcGxhY2VUYWdBcmc7XG4gICAgfVxufSk7XG5cbnZhciBfQ29tcG9uZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiQ29tcG9uZW50XCIsIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQ29tcG9uZW50KS5kZWZhdWx0O1xuICAgIH1cbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiY29ubmVjdFwiLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIF9Db21wb25lbnQuY29ubmVjdDtcbiAgICB9XG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcImRlZmluZVwiLCB7XG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIF9Db21wb25lbnQuZGVmaW5lO1xuICAgIH1cbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwicHJvcHNcIiwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBfQ29tcG9uZW50LnByb3BzO1xuICAgIH1cbn0pO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG4vKioqLyB9KSxcbi8qIDUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5odG1sID0gaHRtbDtcbmV4cG9ydHMuY3NzID0gY3NzO1xuZnVuY3Rpb24gaHRtbChzdHJpbmdzKSB7XG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICAgIGFyZ3NbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIGlmICghYXJncy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHN0cmluZ3NbMF07XG4gICAgfVxuXG4gICAgdmFyIHRwbCA9IFwiXCI7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHJpbmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRwbCArPSBzdHJpbmdzW2ldO1xuICAgICAgICBpZiAoaSA8IHN0cmluZ3MubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXJnc1tpXSkpIHtcbiAgICAgICAgICAgICAgICB0cGwgKz0gYXJnc1tpXS5qb2luKFwiXCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0cGwgKz0gYXJnc1tpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHBsO1xufVxuXG5mdW5jdGlvbiBjc3Moc3RyaW5ncykge1xuICAgIHZhciByZXN1bHQgPSAnJztcblxuICAgIGZvciAodmFyIF9sZW4yID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4yID4gMSA/IF9sZW4yIC0gMSA6IDApLCBfa2V5MiA9IDE7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHtcbiAgICAgICAgYXJnc1tfa2V5MiAtIDFdID0gYXJndW1lbnRzW19rZXkyXTtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0cmluZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcmVzdWx0ICs9IHN0cmluZ3NbaV07XG4gICAgICAgIGlmIChpIDwgc3RyaW5ncy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGFyZ3NbaV0gPT09IFwiZnVuY3Rpb25cIikgcmVzdWx0ICs9IGFyZ3NbaV0oKTtlbHNlIHJlc3VsdCArPSBhcmdzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKiovIH0pLFxuLyogNiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmJpbmQgPSBiaW5kO1xuXG52YXIgX3N0b3JhZ2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG5mdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9IGVsc2UgeyByZXR1cm4gQXJyYXkuZnJvbShhcnIpOyB9IH1cblxudmFyIEtFWSA9IFwiQk9VTkRTXCI7XG52YXIgTUFYX1NUT1JBR0VfU0laRSA9IDEwMDtcblxuKDAsIF9zdG9yYWdlLmFkZFN0b3JhZ2UpKEtFWSwgbmV3IE1hcCgpKTtcblxuZnVuY3Rpb24gYXBwZW5kVG9TdG9yYWdlKGZuLCB2YWx1ZSkge1xuICAgIHZhciBzdG9yYWdlID0gKDAsIF9zdG9yYWdlLmdldFN0b3JhZ2UpKEtFWSk7XG4gICAgaWYgKHN0b3JhZ2Uuc2l6ZSA9PT0gTUFYX1NUT1JBR0VfU0laRSkge1xuICAgICAgICB2YXIga2V5cyA9IHN0b3JhZ2Uua2V5cygpO1xuICAgICAgICAvLyAkRmxvd0ZpeE1lXG4gICAgICAgIHN0b3JhZ2UuZGVsZXRlKGtleXMubmV4dCgpLnZhbHVlKTtcbiAgICB9XG4gICAgc3RvcmFnZS5zZXQoZm4sIHZhbHVlKTtcbn1cblxuZnVuY3Rpb24gYmluZChmbikge1xuICAgIHZhciBzdG9yYWdlID0gKDAsIF9zdG9yYWdlLmdldFN0b3JhZ2UpKEtFWSk7XG4gICAgdmFyIGJvdW5kID0gc3RvcmFnZS5nZXQoZm4pO1xuXG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICAgIGFyZ3NbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIHZhciBmaXJzdEFyZyA9IGFyZ3NbMF07XG4gICAgdmFyIGJvdW5kRm4gPSBmbi5iaW5kLmFwcGx5KGZuLCBbbnVsbF0uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShhcmdzKSkpO1xuICAgIGlmIChib3VuZCkge1xuICAgICAgICBpZiAoIWJvdW5kLmdldChmaXJzdEFyZykpIHtcbiAgICAgICAgICAgIGJvdW5kLnNldChmaXJzdEFyZywgYm91bmRGbik7XG4gICAgICAgICAgICByZXR1cm4gYm91bmRGbjtcbiAgICAgICAgfVxuICAgICAgICAvLyAkRmxvd0ZpeE1lXG4gICAgICAgIHJldHVybiBib3VuZC5nZXQoZmlyc3RBcmcpO1xuICAgIH1cblxuICAgIHZhciBmbk1hcCA9IG5ldyBNYXAoKTtcbiAgICBmbk1hcC5zZXQoZmlyc3RBcmcsIGJvdW5kRm4pO1xuICAgIGFwcGVuZFRvU3RvcmFnZShmbiwgZm5NYXApO1xuICAgIHJldHVybiBib3VuZEZuO1xufVxuXG4vKioqLyB9KSxcbi8qIDcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdW5kZWZpbmVkO1xuXG52YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmV4cG9ydHMuY29ubmVjdCA9IGNvbm5lY3Q7XG5leHBvcnRzLmRlZmluZSA9IGRlZmluZTtcbmV4cG9ydHMucHJvcHMgPSBwcm9wcztcblxudmFyIF93ZWJDb21wb25lbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblxudmFyIF93ZWJDb21wb25lbnRzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3dlYkNvbXBvbmVudHMpO1xuXG52YXIgX3N0b3JlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblxudmFyIF9yZW5kZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXG52YXIgX3N0b3JhZ2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX3V0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblxudmFyIF90YWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBfZml4QmFiZWxFeHRlbmQgPSBmdW5jdGlvbiAoTykge1xuICAgIHZhciBnUE8gPSBPLmdldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIChvKSB7XG4gICAgICAgIHJldHVybiBvLl9fcHJvdG9fXztcbiAgICB9LFxuICAgICAgICBzUE8gPSBPLnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIChvLCBwKSB7XG4gICAgICAgIG8uX19wcm90b19fID0gcDtcbiAgICAgICAgcmV0dXJuIG87XG4gICAgfSxcbiAgICAgICAgY29uc3RydWN0ID0gKHR5cGVvZiBSZWZsZWN0ID09PSBcInVuZGVmaW5lZFwiID8gXCJ1bmRlZmluZWRcIiA6IF90eXBlb2YoUmVmbGVjdCkpID09PSAnb2JqZWN0JyA/IFJlZmxlY3QuY29uc3RydWN0IDogZnVuY3Rpb24gKFBhcmVudCwgYXJncywgQ2xhc3MpIHtcbiAgICAgICAgdmFyIENvbnN0cnVjdG9yLFxuICAgICAgICAgICAgYSA9IFtudWxsXTtcbiAgICAgICAgYS5wdXNoLmFwcGx5KGEsIGFyZ3MpO1xuICAgICAgICBDb25zdHJ1Y3RvciA9IFBhcmVudC5iaW5kLmFwcGx5KFBhcmVudCwgYSk7XG4gICAgICAgIHJldHVybiBzUE8obmV3IENvbnN0cnVjdG9yKCksIENsYXNzLnByb3RvdHlwZSk7XG4gICAgfTtcblxuICAgIHJldHVybiBmdW5jdGlvbiBmaXhCYWJlbEV4dGVuZChDbGFzcykge1xuICAgICAgICB2YXIgUGFyZW50ID0gZ1BPKENsYXNzKTtcbiAgICAgICAgcmV0dXJuIHNQTyhDbGFzcywgc1BPKGZ1bmN0aW9uIFN1cGVyKCkge1xuICAgICAgICAgICAgcmV0dXJuIGNvbnN0cnVjdChQYXJlbnQsIGFyZ3VtZW50cywgZ1BPKHRoaXMpLmNvbnN0cnVjdG9yKTtcbiAgICAgICAgfSwgUGFyZW50KSk7XG4gICAgfTtcbn0oT2JqZWN0KTtcblxudmFyIHByb3BzU3RvcmFnZSA9ICgwLCBfc3RvcmFnZS5nZXRTdG9yYWdlKShfc3RvcmFnZS5zdG9yYWdlS2V5cy5QUk9QUyk7XG5cbmZ1bmN0aW9uIHBhcnNlQXR0cmlidXRlcyhhdHRyaWJ1dGVzKSB7XG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZTtcbiAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IgPSBmYWxzZTtcbiAgICB2YXIgX2l0ZXJhdG9yRXJyb3IgPSB1bmRlZmluZWQ7XG5cbiAgICB0cnkge1xuICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSBhdHRyaWJ1dGVzW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXA7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IChfc3RlcCA9IF9pdGVyYXRvci5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZSkge1xuICAgICAgICAgICAgdmFyIGF0dHJpYnV0ZSA9IF9zdGVwLnZhbHVlO1xuXG4gICAgICAgICAgICByZXN1bHRbKDAsIF91dGlscy50YWdOYW1lVG9Qcm9wKShhdHRyaWJ1dGUubmFtZSldID0gYXR0cmlidXRlLnZhbHVlO1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIF9kaWRJdGVyYXRvckVycm9yID0gdHJ1ZTtcbiAgICAgICAgX2l0ZXJhdG9yRXJyb3IgPSBlcnI7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiAmJiBfaXRlcmF0b3IucmV0dXJuKSB7XG4gICAgICAgICAgICAgICAgX2l0ZXJhdG9yLnJldHVybigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG52YXIgQ29tcG9uZW50ID0gX2ZpeEJhYmVsRXh0ZW5kKGZ1bmN0aW9uIChfSFRNTEVsZW1lbnQpIHtcbiAgICBfaW5oZXJpdHMoQ29tcG9uZW50LCBfSFRNTEVsZW1lbnQpO1xuXG4gICAgZnVuY3Rpb24gQ29tcG9uZW50KCkge1xuICAgICAgICB2YXIgX3JlZjtcblxuICAgICAgICB2YXIgX3RlbXAsIF90aGlzLCBfcmV0O1xuXG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDb21wb25lbnQpO1xuXG4gICAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICAgICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIF9yZXQgPSAoX3RlbXAgPSAoX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoX3JlZiA9IENvbXBvbmVudC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKENvbXBvbmVudCkpLmNhbGwuYXBwbHkoX3JlZiwgW3RoaXNdLmNvbmNhdChhcmdzKSkpLCBfdGhpcyksIF90aGlzLl9fZGVmYXVsdFByb3BzID0ge30sIF90aGlzLnN1YnNjcmlwdGlvbnMgPSBbXSwgX3RoaXMuc3RhdGUgPSB7fSwgX3RoaXMubW91bnRlZCA9IGZhbHNlLCBfdGhpcy5jc3MgPSBfdGFnLmNzcywgX3RlbXApLCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihfdGhpcywgX3JldCk7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKENvbXBvbmVudCwgW3tcbiAgICAgICAga2V5OiBcImJlZm9yZVJlbmRlclwiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYmVmb3JlUmVuZGVyKCkge31cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJyZW5kZXJcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImluc2VydENvbnRlbnRcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGluc2VydENvbnRlbnQocm9vdCwgY29udGVudCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBjb250ZW50ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgcm9vdC5pbm5lckhUTUwgPSBjb250ZW50O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJkZWZhdWx0IHJlbmRlcmVyIGNhbiBoYW5kbGUgb25seSBzdHJpbmdzXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwiYWZ0ZXJSZW5kZXJcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFmdGVyUmVuZGVyKCkge31cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJzdWJzY3JpYmVUb1N0b3JlXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzdWJzY3JpYmVUb1N0b3JlKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgICAgICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiA9IHRydWU7XG4gICAgICAgICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IyID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgX2l0ZXJhdG9yRXJyb3IyID0gdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjIgPSB0aGlzLmtleXNbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDI7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSAoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiA9IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IF9zdGVwMi52YWx1ZTtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMucHVzaCgoMCwgX3N0b3JlLnN1YnNjcmliZSkoa2V5LCBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzMi5zdGF0ZSA9IHN0YXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3JlbmRlci5yZW5kZXIuY2FsbChfdGhpczIpO1xuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSAoMCwgX3N0b3JlLmdldFN0YXRlKShrZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yMiA9IHRydWU7XG4gICAgICAgICAgICAgICAgX2l0ZXJhdG9yRXJyb3IyID0gZXJyO1xuICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yICYmIF9pdGVyYXRvcjIucmV0dXJuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3IyLnJldHVybigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3IyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwiY29ubmVjdGVkQ2FsbGJhY2tcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICAgICAgdGhpcy5zdWJzY3JpYmVUb1N0b3JlKCk7XG4gICAgICAgICAgICBfcmVuZGVyLnJlbmRlci5jYWxsKHRoaXMpO1xuXG4gICAgICAgICAgICB0aGlzLmNvbm5lY3RlZCgpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwiY29ubmVjdGVkXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb25uZWN0ZWQoKSB7fVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImRpc2Nvbm5lY3RlZENhbGxiYWNrXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyA9IHRydWU7XG4gICAgICAgICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IzID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgX2l0ZXJhdG9yRXJyb3IzID0gdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pdGVyYXRvcjMgPSB0aGlzLnN1YnNjcmlwdGlvbnNbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDM7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjMgPSAoX3N0ZXAzID0gX2l0ZXJhdG9yMy5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyA9IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IF9zdGVwMy52YWx1ZTtcblxuICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvcjMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIF9pdGVyYXRvckVycm9yMyA9IGVycjtcbiAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMyAmJiBfaXRlcmF0b3IzLnJldHVybikge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yMy5yZXR1cm4oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcjMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yMztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5kaXNjb25uZWN0ZWQoKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImRpc2Nvbm5lY3RlZFwiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZGlzY29ubmVjdGVkKCkge31cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJhZG9wdGVkQ2FsbGJhY2tcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFkb3B0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaWJlVG9TdG9yZSgpO1xuICAgICAgICAgICAgX3JlbmRlci5yZW5kZXIuY2FsbCh0aGlzKTtcblxuICAgICAgICAgICAgdGhpcy5hZG9wdGVkKCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJhZG9wdGVkXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBhZG9wdGVkKCkge31cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhhdHRyaWJ1dGVOYW1lLCBvbGRWYWx1ZSwgbmV3VmFsdWUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm1vdW50ZWQgJiYgb2xkVmFsdWUgIT0gbmV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb3BzQ2hhbmdlZChfZXh0ZW5kcyh7fSwgdGhpcy5wcm9wcywgX2RlZmluZVByb3BlcnR5KHt9LCBhdHRyaWJ1dGVOYW1lLCBuZXdWYWx1ZSkpKTtcbiAgICAgICAgICAgICAgICBfcmVuZGVyLnJlbmRlci5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwicHJvcHNDaGFuZ2VkXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBwcm9wc0NoYW5nZWQobmV3UHJvcHMpIHt9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwibmFtZVwiLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuZ2V0UHJvdG90eXBlT2YodGhpcykuY29uc3RydWN0b3IubmFtZTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImlzU2hhZG93XCIsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJwcm9wc1wiLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHZhciBhdHRyaWJ1dGVzID0gcGFyc2VBdHRyaWJ1dGVzKHRoaXMuYXR0cmlidXRlcyk7XG4gICAgICAgICAgICB2YXIgaWQgPSBOdW1iZXIoYXR0cmlidXRlcy5wcm9wc0lkKTtcbiAgICAgICAgICAgIHJldHVybiBfZXh0ZW5kcyh7fSwgdGhpcy5fX2RlZmF1bHRQcm9wcywgYXR0cmlidXRlcywgcHJvcHNTdG9yYWdlLmdldChpZCkgfHwge30pO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldChwcm9wcykge1xuICAgICAgICAgICAgdGhpcy5fX2RlZmF1bHRQcm9wcyA9IHByb3BzO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwia2V5c1wiLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcInN0eWxlc1wiLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwiaHRtbFwiLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGFnLmh0bWw7XG4gICAgICAgIH1cbiAgICB9XSwgW3tcbiAgICAgICAga2V5OiBcIm9ic2VydmVkQXR0cmlidXRlc1wiLFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9ic2VydmFibGVQcm9wcy5tYXAoX3V0aWxzLnByb3BOYW1lVG9UYWcpLmNvbmNhdChcInByb3BzLWlkXCIpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwib2JzZXJ2YWJsZVByb3BzXCIsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIENvbXBvbmVudDtcbn0oSFRNTEVsZW1lbnQpKTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gQ29tcG9uZW50O1xuZnVuY3Rpb24gY29ubmVjdChrZXkpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKFdyYXBwZWQpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfV3JhcHBlZCkge1xuICAgICAgICAgICAgX2luaGVyaXRzKF9jbGFzczIsIF9XcmFwcGVkKTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gX2NsYXNzMigpIHtcbiAgICAgICAgICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgX2NsYXNzMik7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKF9jbGFzczIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihfY2xhc3MyKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIF9jcmVhdGVDbGFzcyhfY2xhc3MyLCBbe1xuICAgICAgICAgICAgICAgIGtleTogXCJrZXlzXCIsXG4gICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBba2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XSk7XG5cbiAgICAgICAgICAgIHJldHVybiBfY2xhc3MyO1xuICAgICAgICB9KFdyYXBwZWQpO1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIGRlZmluZShuYW1lKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChXcmFwcGVkKSB7XG4gICAgICAgICgwLCBfd2ViQ29tcG9uZW50czIuZGVmYXVsdCkobmFtZSwgV3JhcHBlZCk7XG4gICAgICAgIHJldHVybiBXcmFwcGVkO1xuICAgIH07XG59XG5cbnZhciBwcm9wc0lkID0gMDtcblxuZnVuY3Rpb24gcHJvcHMocHJvcHMpIHtcbiAgICB2YXIgaWQgPSBwcm9wc0lkKys7XG4gICAgcHJvcHNTdG9yYWdlLnNldChpZCwgcHJvcHMpO1xuICAgIHJldHVybiB7XG4gICAgICAgICdwcm9wcy1pZCc6IGlkLFxuICAgICAgICB0b1N0cmluZzogZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gICAgICAgICAgICByZXR1cm4gXCJwcm9wcy1pZD1cXFwiXCIgKyBpZCArIFwiXFxcIlwiO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuLyoqKi8gfSksXG4vKiA4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMucmVuZGVyID0gcmVuZGVyO1xuZnVuY3Rpb24gcmVuZGVyKCkge1xuICAgIHRoaXMuYmVmb3JlUmVuZGVyKCk7XG5cbiAgICBpZiAodGhpcy5pc1NoYWRvdyAmJiAhdGhpcy5zaGFkb3dSb290KSB7XG4gICAgICAgIHRoaXMuYXR0YWNoU2hhZG93KHsgbW9kZTogJ29wZW4nIH0pO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5yb290KSB7XG4gICAgICAgIHRoaXMucm9vdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIHRoaXMucm9vdC5zdHlsZS5kaXNwbGF5ID0gJ2NvbnRlbnRzJztcbiAgICAgICAgaWYgKHRoaXMuaXNTaGFkb3cpIHtcbiAgICAgICAgICAgIHRoaXMuc2hhZG93Um9vdC5pbm5lckhUTUwgPSAnPHN0eWxlPicgKyB0aGlzLnN0eWxlcyArICc8L3N0eWxlPic7XG4gICAgICAgICAgICB0aGlzLnNoYWRvd1Jvb3QuYXBwZW5kQ2hpbGQodGhpcy5yb290KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3R5bGVzICYmICh0aGlzLmlubmVySFRNTCA9ICc8c3R5bGU+JyArIHRoaXMuc3R5bGVzICsgJzwvc3R5bGU+Jyk7XG4gICAgICAgICAgICB0aGlzLmFwcGVuZENoaWxkKHRoaXMucm9vdCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgcmVuZGVyUmVzID0gdGhpcy5yZW5kZXIoKTtcbiAgICBpZiAocmVuZGVyUmVzKSB7XG4gICAgICAgIHRoaXMuaW5zZXJ0Q29udGVudCh0aGlzLnJvb3QsIHJlbmRlclJlcyk7XG4gICAgfVxuXG4gICAgdGhpcy5tb3VudGVkID0gdHJ1ZTtcblxuICAgIHRoaXMuYWZ0ZXJSZW5kZXIoKTtcbn1cblxuLyoqKi8gfSlcbi8qKioqKiovIF0pO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBtYWluLmpzIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGdldDogZ2V0dGVyXG4gXHRcdFx0fSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNCk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgNTdmZDJmZTAyYjA3ZDU4ZDE3NDQiLCIvLyBAZmxvd1xuXG5pbXBvcnQgdHlwZSB7U3RvcmFnZURyaXZlcn0gZnJvbSBcIi4vaW50ZXJmYWNlc1wiO1xuXG5jb25zdCBwcm9wc01hcDogTWFwPGFueSwgYW55PiA9IG5ldyBNYXA7XG5cbmNvbnN0IGV2ZW50c01hcDogTWFwPGFueSwgYW55PiA9IG5ldyBNYXA7XG5cbmV4cG9ydCBjb25zdCBzdG9yYWdlS2V5cyA9IHtcbiAgICBQUk9QUzogXCJwcm9wc1wiLFxuICAgIEVWRU5UUzogXCJldmVudHNcIlxufTtcblxuY29uc3QgZHJpdmVyOiBTdG9yYWdlRHJpdmVyID0ge1xuICAgIGl0ZW1zOiBPYmplY3QuY3JlYXRlKHtcbiAgICAgICAgW3N0b3JhZ2VLZXlzLlBST1BTXTogcHJvcHNNYXAsXG4gICAgICAgIFtzdG9yYWdlS2V5cy5FVkVOVFNdOiBldmVudHNNYXAsXG4gICAgfSksXG4gICAgc2V0SXRlbShrZXk6IHN0cmluZywgdmFsdWU6IGFueSkge1xuICAgICAgICB0aGlzLml0ZW1zW2tleV0gPSB2YWx1ZVxuICAgIH0sXG4gICAgZ2V0SXRlbShrZXk6IHN0cmluZykge1xuICAgICAgICByZXR1cm4gdGhpcy5pdGVtc1trZXldXG4gICAgfSxcbiAgICByZW1vdmVJdGVtKGtleTogc3RyaW5nKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLml0ZW1zW2tleV1cbiAgICB9LFxuICAgIG1pZ3JhdGUoZHJpdmVyOiBTdG9yYWdlRHJpdmVyKSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMuaXRlbXMpIHtcbiAgICAgICAgICAgIGRyaXZlci5zZXRJdGVtKFxuICAgICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgICB0aGlzLml0ZW1zW2tleV1cbiAgICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZHJpdmVyXG4gICAgfVxufTtcblxuZXhwb3J0IGNvbnN0IHN0b3JhZ2UgPSB7XG4gICAgZHJpdmVyXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gc2V0U3RvcmFnZURyaXZlcihkcml2ZXI6IFN0b3JhZ2VEcml2ZXIpOiB2b2lkIHtcbiAgICBzdG9yYWdlLmRyaXZlciA9IHN0b3JhZ2UuZHJpdmVyLm1pZ3JhdGUoZHJpdmVyKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U3RvcmFnZShrZXk6IHN0cmluZyk6IGFueSB7XG4gICAgcmV0dXJuIHN0b3JhZ2UuZHJpdmVyLmdldEl0ZW0oa2V5KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gYWRkU3RvcmFnZShrZXk6IHN0cmluZywgdmFsdWU6IGFueSk6IHZvaWQge1xuICAgIHN0b3JhZ2UuZHJpdmVyLnNldEl0ZW0oa2V5LCB2YWx1ZSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZVN0b3JhZ2Uoa2V5OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBzdG9yYWdlLmRyaXZlci5yZW1vdmVJdGVtKGtleSlcbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvc3RvcmFnZS5qcyIsIi8vIEBmbG93XG5cbmltcG9ydCB0eXBlIHtXZWJDb21wb25lbnRzIGFzIEltcGxlbWVudGF0aW9ufSBmcm9tIFwiLi9pbnRlcmZhY2VzXCJcblxuY29uc3QgZGVmYXVsdEltcGxlbWVudGF0aW9uOiBJbXBsZW1lbnRhdGlvbiA9IHtcbiAgICByZWdpc3RlckNvbXBvbmVudChuYW1lOiBzdHJpbmcsIGNvbXBvbmVudDogQ2xhc3M8RWxlbWVudD4pIHtcbiAgICAgICAgaWYgKCdjdXN0b21FbGVtZW50cycgaW4gd2luZG93KSB7XG4gICAgICAgICAgICBjdXN0b21FbGVtZW50cy5kZWZpbmUobmFtZSwgY29tcG9uZW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGN1cnJlbnRSZWFkeUNoZWNrKCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVnaXN0ZXJDb21wb25lbnQobmFtZSwgY29tcG9uZW50KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgIH0sXG4gICAgaXNDdXN0b21Db21wb25lbnQobm9kZTogTm9kZSkge1xuICAgICAgICByZXR1cm4gbm9kZS5ub2RlTmFtZS5pbmNsdWRlcyhcIi1cIilcbiAgICB9XG59O1xuXG5sZXQgY3VycmVudEltcGxlbWVudGF0aW9uID0gZGVmYXVsdEltcGxlbWVudGF0aW9uO1xuXG5jb25zdCByZWdpc3RlckNvbXBvbmVudCA9IChuYW1lOiBzdHJpbmcsIGNvbXBvbmVudDogQ2xhc3M8RWxlbWVudD4pID0+IHtcbiAgICByZXR1cm4gY3VycmVudEltcGxlbWVudGF0aW9uLnJlZ2lzdGVyQ29tcG9uZW50KG5hbWUsIGNvbXBvbmVudCk7XG59O1xuXG5leHBvcnQgY29uc3Qgc2V0SW1wbGVtZW50YXRpb24gPSAoaW1wbGVtZW50YXRpb246IEltcGxlbWVudGF0aW9uKSA9PiB7XG4gICAgY3VycmVudEltcGxlbWVudGF0aW9uID0gaW1wbGVtZW50YXRpb247XG59O1xuXG5sZXQgY3VycmVudFJlYWR5Q2hlY2sgPSAoKSA9PiBQcm9taXNlLnJlc29sdmUoKTtcblxuZXhwb3J0IGNvbnN0IGNvbXBvbmVudHNSZWFkeSA9ICgpID0+IHtcbiAgICByZXR1cm4gY3VycmVudFJlYWR5Q2hlY2soKVxufTtcblxuZXhwb3J0IGNvbnN0IHNldFJlYWR5Q2hlY2sgPSAocmVhZHlDaGVjazogRnVuY3Rpb24pID0+IHtcbiAgICBjdXJyZW50UmVhZHlDaGVjayA9IHJlYWR5Q2hlY2s7XG59O1xuXG5leHBvcnQgZGVmYXVsdCByZWdpc3RlckNvbXBvbmVudDtcblxuZXhwb3J0IGNvbnN0IGlzQ3VzdG9tQ29tcG9uZW50ID0gKG5vZGU6IE5vZGUpID0+IHtcbiAgICByZXR1cm4gY3VycmVudEltcGxlbWVudGF0aW9uLmlzQ3VzdG9tQ29tcG9uZW50KG5vZGUpXG59O1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy93ZWItY29tcG9uZW50cy5qcyIsIi8vIEBmbG93XG5cbmltcG9ydCB0eXBlIHtTdG9yZSwgUmVkdWNlcn0gZnJvbSBcIi4vaW50ZXJmYWNlc1wiXG5cbmNvbnN0IHN0dWJJbXBsZW1lbnRhdGlvbjogU3RvcmUgPSB7XG4gICAgcmVkdWNlcnM6IHt9LFxuICAgIHN1YnNjcmlwdGlvbnM6IHt9LFxuICAgIGFkZFJlZHVjZXIoa2V5OiBzdHJpbmcsIHJlZHVjZXI6IFJlZHVjZXIpIHtcbiAgICAgICAgdGhpcy5yZWR1Y2Vyc1trZXldID0gcmVkdWNlcjtcbiAgICB9LFxuICAgIHJlbW92ZVJlZHVjZXIoa2V5OiBzdHJpbmcpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMucmVkdWNlcnNba2V5XTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0sXG4gICAgc3Vic2NyaWJlKGtleTogc3RyaW5nLCBjYjogRnVuY3Rpb24pIHtcbiAgICAgICAgaWYgKCF0aGlzLnN1YnNjcmlwdGlvbnNba2V5XSkge1xuICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zW2tleV0gPSBbXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnNba2V5XS5wdXNoKGNiKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHVuc3Vic2NyaWJlOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zW2tleV0gPSB0aGlzLnN1YnNjcmlwdGlvbnNba2V5XS5maWx0ZXIoZWwgPT4gZWwgIT09IGNiKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcbiAgICBnZXRTdGF0ZShrZXk6IHN0cmluZykge30sXG4gICAgbWlncmF0ZShuZXdTdG9yZTogU3RvcmUpIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5yZWR1Y2Vycykge1xuICAgICAgICAgICAgY29uc3QgcmVkdWNlciA9IHRoaXMucmVkdWNlcnNba2V5XTtcbiAgICAgICAgICAgIG5ld1N0b3JlLmFkZFJlZHVjZXIoa2V5LCByZWR1Y2VyKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLnN1YnNjcmlwdGlvbnMpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgc3Vic2NyaXB0aW9uIG9mIHRoaXMuc3Vic2NyaXB0aW9uc1trZXldKSB7XG4gICAgICAgICAgICAgICAgbmV3U3RvcmUuc3Vic2NyaWJlKGtleSwgc3Vic2NyaXB0aW9uKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXdTdG9yZTtcbiAgICB9XG59O1xuXG5jb25zdCBzdG9yZSA9IHtcbiAgICBjdXJyZW50SW1wbGVtZW50YXRpb246IHN0dWJJbXBsZW1lbnRhdGlvblxufTtcblxuZXhwb3J0IGNvbnN0IHNldEltcGxlbWVudGF0aW9uID0gKGltcGxlbWVudGF0aW9uOiBTdG9yZSkgPT4ge1xuICAgIHN0b3JlLmN1cnJlbnRJbXBsZW1lbnRhdGlvbiA9IHN0b3JlLmN1cnJlbnRJbXBsZW1lbnRhdGlvbi5taWdyYXRlKGltcGxlbWVudGF0aW9uKVxufTtcblxuZXhwb3J0IGNvbnN0IHJlZ2lzdGVyUmVkdWNlciA9IChrZXk6IHN0cmluZywgcmVkdWNlcjogUmVkdWNlcikgPT4ge1xuICAgIHN0b3JlLmN1cnJlbnRJbXBsZW1lbnRhdGlvbi5hZGRSZWR1Y2VyKGtleSwgcmVkdWNlcilcbn07XG5leHBvcnQgY29uc3QgcmVtb3ZlUmVkdWNlciA9IChrZXk6IHN0cmluZykgPT4ge1xuICAgIHN0b3JlLmN1cnJlbnRJbXBsZW1lbnRhdGlvbi5yZW1vdmVSZWR1Y2VyKGtleSlcbn07XG5leHBvcnQgY29uc3Qgc3Vic2NyaWJlID0gKGtleTogc3RyaW5nLCBjYjogRnVuY3Rpb24pID0+IHtcbiAgICByZXR1cm4gc3RvcmUuY3VycmVudEltcGxlbWVudGF0aW9uLnN1YnNjcmliZShrZXksIGNiKVxufTtcbmV4cG9ydCBjb25zdCBnZXRTdGF0ZSA9IChrZXk6IHN0cmluZykgPT4ge1xuICAgIHJldHVybiBzdG9yZS5jdXJyZW50SW1wbGVtZW50YXRpb24uZ2V0U3RhdGUoa2V5KVxufTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvc3RvcmUuanMiLCIvLyBAZmxvd1xuXG5leHBvcnQgZnVuY3Rpb24gdGFnTmFtZVRvUHJvcChub2RlTmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gbm9kZU5hbWUuc3BsaXQoXCItXCIpLnJlZHVjZShcbiAgICAgICAgKGFjYywgbmV4dCkgPT4ge1xuICAgICAgICAgICAgaWYgKG5leHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYWNjICsgbmV4dFswXS50b1VwcGVyQ2FzZSgpICsgbmV4dC5zbGljZSgxKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGFjY1xuICAgICAgICB9XG4gICAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHByb3BOYW1lVG9UYWcocHJvcDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBsZXQgcmVzID0gXCJcIjtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHByb3AubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHByb3BbaV0gPT09IHByb3BbaV0udG9VcHBlckNhc2UoKSkge1xuICAgICAgICAgICAgcmVzICs9IFwiLVwiK3Byb3BbaV0udG9Mb3dlckNhc2UoKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzICs9IHByb3BbaV1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVUYWdBcmcoaW5kZXg6IG51bWJlciwgc3RhcnRBdHRyaWJ1dGU6IGJvb2xlYW4pOiBzdHJpbmcge1xuICAgIGlmIChzdGFydEF0dHJpYnV0ZSlcbiAgICAgICAgcmV0dXJuIGBfX0FSR19fJHtpbmRleH1gO1xuICAgIHJldHVybiBgPCEtLV9fQVJHX18ke2luZGV4fS0tPmBcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1hdGNoVGFnQXJnKHN0cjogc3RyaW5nKSB7XG4gICAgcmV0dXJuIHN0ci5tYXRjaCgvKD86PCEtLSk/X19BUkdfXyhcXGQrKSg/Oi0tPik/Lylcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlcGxhY2VUYWdBcmcoc3RyOiBzdHJpbmcsIGZuOiBGdW5jdGlvbikge1xuICAgIHJldHVybiBzdHIucmVwbGFjZSgvKD86PCEtLSk/X19BUkdfXyhcXGQrKSg/Oi0tPik/L2csIGZuKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gYXR0cmlidXRlU3RhcnRzKHN0cjogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHN0ci50cmltKCkuc2xpY2UoLTIpID09PSBgPVwiYFxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy91dGlscy5qcyIsIi8vIEBmbG93XG5cbmV4cG9ydCB7XG4gICAgc2V0SW1wbGVtZW50YXRpb24gYXMgY2hhbmdlV2ViQ29tcG9uZW50c0ltcGxlbWVuYXRpb24sXG4gICAgY29tcG9uZW50c1JlYWR5LFxuICAgIHNldFJlYWR5Q2hlY2sgYXMgY2hhbmdlV2ViQ29tcG9uZW50c1JlYWR5Q2hlY2ssXG4gICAgZGVmYXVsdCBhcyByZWdpc3RlckNvbXBvbmVudFxufSBmcm9tIFwiLi93ZWItY29tcG9uZW50c1wiXG5cbmV4cG9ydCB7XG4gICAgc2V0SW1wbGVtZW50YXRpb24gYXMgY2hhbmdlU3RvcmVJbXBsZW1lbnRhdGlvbixcbiAgICByZWdpc3RlclJlZHVjZXIsXG4gICAgcmVtb3ZlUmVkdWNlcixcbiAgICBzdWJzY3JpYmUsXG4gICAgZ2V0U3RhdGVcbn0gZnJvbSBcIi4vc3RvcmVcIlxuXG5leHBvcnQge1xuICAgIGNzc1xufSBmcm9tIFwiLi90YWdcIlxuXG5leHBvcnQge1xuICAgIGdldFN0b3JhZ2UsXG4gICAgYWRkU3RvcmFnZSxcbiAgICByZW1vdmVTdG9yYWdlLFxuICAgIHNldFN0b3JhZ2VEcml2ZXJcbn0gZnJvbSBcIi4vc3RvcmFnZVwiXG5cbmV4cG9ydCB7YmluZH0gZnJvbSBcIi4vYmluZFwiXG5cbmV4cG9ydCB7XG4gICAgbWF0Y2hUYWdBcmcsXG4gICAgcmVwbGFjZVRhZ0FyZ1xufSBmcm9tIFwiLi91dGlsc1wiXG5cbmV4cG9ydCB7XG4gICAgZGVmYXVsdCBhcyBDb21wb25lbnQsXG4gICAgY29ubmVjdCxcbiAgICBkZWZpbmUsXG4gICAgcHJvcHMsXG59IGZyb20gXCIuL0NvbXBvbmVudFwiXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvaW5kZXguanMiLCIvLyBAZmxvd1xuXG5leHBvcnQgZnVuY3Rpb24gaHRtbChzdHJpbmdzOiBzdHJpbmdbXSwgLi4uYXJnczogYW55W10pIHtcbiAgICBpZiAoIWFyZ3MubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBzdHJpbmdzWzBdXG4gICAgfVxuXG4gICAgbGV0IHRwbDogc3RyaW5nID0gXCJcIjtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0cmluZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdHBsICs9IHN0cmluZ3NbaV07XG4gICAgICAgIGlmIChpIDwgc3RyaW5ncy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhcmdzW2ldKSkge1xuICAgICAgICAgICAgICAgIHRwbCArPSBhcmdzW2ldLmpvaW4oXCJcIik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRwbCArPSBhcmdzW2ldXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRwbFxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3NzKHN0cmluZ3M6IHN0cmluZ1tdLCAuLi5hcmdzOiBhbnlbXSkge1xuICAgIGxldCByZXN1bHQgPSAnJztcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0cmluZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcmVzdWx0ICs9IHN0cmluZ3NbaV07XG4gICAgICAgIGlmIChpIDwgc3RyaW5ncy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGFyZ3NbaV0gPT09IFwiZnVuY3Rpb25cIilcbiAgICAgICAgICAgICAgICByZXN1bHQgKz0gYXJnc1tpXSgpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHJlc3VsdCArPSBhcmdzW2ldXG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdFxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy90YWcuanMiLCIvLyBAZmxvd1xuXG5pbXBvcnQge2FkZFN0b3JhZ2UsIGdldFN0b3JhZ2V9IGZyb20gXCIuL3N0b3JhZ2VcIlxuXG5jb25zdCBLRVkgPSBcIkJPVU5EU1wiO1xuY29uc3QgTUFYX1NUT1JBR0VfU0laRSA9IDEwMDtcblxuYWRkU3RvcmFnZShcbiAgICBLRVksXG4gICAgbmV3IE1hcCgpXG4pO1xuXG5mdW5jdGlvbiBhcHBlbmRUb1N0b3JhZ2UoZm46IEZ1bmN0aW9uLCB2YWx1ZTogTWFwPGFueSwgRnVuY3Rpb24+KTogdm9pZCB7XG4gICAgY29uc3Qgc3RvcmFnZTogTWFwPEZ1bmN0aW9uLCBNYXA8YW55LCBGdW5jdGlvbj4+ID0gZ2V0U3RvcmFnZShLRVkpO1xuICAgIGlmIChzdG9yYWdlLnNpemUgPT09IE1BWF9TVE9SQUdFX1NJWkUpIHtcbiAgICAgICAgY29uc3Qga2V5cyA9IHN0b3JhZ2Uua2V5cygpO1xuICAgICAgICAvLyAkRmxvd0ZpeE1lXG4gICAgICAgIHN0b3JhZ2UuZGVsZXRlKGtleXMubmV4dCgpLnZhbHVlKTtcbiAgICB9XG4gICAgc3RvcmFnZS5zZXQoZm4sIHZhbHVlKVxufVxuXG5leHBvcnQgZnVuY3Rpb24gYmluZChmbjogRnVuY3Rpb24sIC4uLmFyZ3M6IGFueVtdKTogRnVuY3Rpb24ge1xuICAgIGNvbnN0IHN0b3JhZ2U6IE1hcDxGdW5jdGlvbiwgTWFwPGFueSwgRnVuY3Rpb24+PiA9IGdldFN0b3JhZ2UoS0VZKTtcbiAgICBjb25zdCBib3VuZCA9IHN0b3JhZ2UuZ2V0KGZuKTtcbiAgICBjb25zdCBmaXJzdEFyZyA9IGFyZ3NbMF07XG4gICAgY29uc3QgYm91bmRGbiA9IGZuLmJpbmQobnVsbCwgLi4uYXJncyk7XG4gICAgaWYgKGJvdW5kKSB7XG4gICAgICAgIGlmICghYm91bmQuZ2V0KGZpcnN0QXJnKSkge1xuICAgICAgICAgICAgYm91bmQuc2V0KFxuICAgICAgICAgICAgICAgIGZpcnN0QXJnLFxuICAgICAgICAgICAgICAgIGJvdW5kRm5cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICByZXR1cm4gYm91bmRGblxuICAgICAgICB9XG4gICAgICAgIC8vICRGbG93Rml4TWVcbiAgICAgICAgcmV0dXJuIGJvdW5kLmdldChmaXJzdEFyZylcbiAgICB9XG5cbiAgICBjb25zdCBmbk1hcCA9IG5ldyBNYXAoKTtcbiAgICBmbk1hcC5zZXQoXG4gICAgICAgIGZpcnN0QXJnLFxuICAgICAgICBib3VuZEZuXG4gICAgKTtcbiAgICBhcHBlbmRUb1N0b3JhZ2UoXG4gICAgICAgIGZuLFxuICAgICAgICBmbk1hcFxuICAgICk7XG4gICAgcmV0dXJuIGJvdW5kRm5cbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvYmluZC5qcyIsIi8vIEBmbG93XG5cbmltcG9ydCByZWdpc3RlckNvbXBvbmVudCBmcm9tIFwiLi93ZWItY29tcG9uZW50c1wiXG5pbXBvcnQge3N1YnNjcmliZSwgZ2V0U3RhdGV9IGZyb20gXCIuL3N0b3JlXCJcbmltcG9ydCB7cmVuZGVyfSBmcm9tIFwiLi9yZW5kZXJcIlxuaW1wb3J0IHtnZXRTdG9yYWdlLCBzdG9yYWdlS2V5c30gZnJvbSBcIi4vc3RvcmFnZVwiXG5pbXBvcnQge3Byb3BOYW1lVG9UYWcsIHRhZ05hbWVUb1Byb3B9IGZyb20gXCIuL3V0aWxzXCI7XG5pbXBvcnQge2h0bWwsIGNzc30gZnJvbSBcIi4vdGFnXCJcblxuY29uc3QgcHJvcHNTdG9yYWdlID0gZ2V0U3RvcmFnZShzdG9yYWdlS2V5cy5QUk9QUyk7XG5cbmZ1bmN0aW9uIHBhcnNlQXR0cmlidXRlcyhhdHRyaWJ1dGVzOiBOYW1lZE5vZGVNYXApOiBPYmplY3Qge1xuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgIGZvciAoY29uc3QgYXR0cmlidXRlIG9mIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgcmVzdWx0W3RhZ05hbWVUb1Byb3AoYXR0cmlidXRlLm5hbWUpXSA9IGF0dHJpYnV0ZS52YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29tcG9uZW50IGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpLmNvbnN0cnVjdG9yLm5hbWVcbiAgICB9XG5cbiAgICBnZXQgaXNTaGFkb3coKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuXG4gICAgZ2V0IHByb3BzKCkge1xuICAgICAgICBjb25zdCBhdHRyaWJ1dGVzOiBPYmplY3QgPSBwYXJzZUF0dHJpYnV0ZXModGhpcy5hdHRyaWJ1dGVzKTtcbiAgICAgICAgY29uc3QgaWQgPSBOdW1iZXIoYXR0cmlidXRlcy5wcm9wc0lkKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnRoaXMuX19kZWZhdWx0UHJvcHMsXG4gICAgICAgICAgICAuLi5hdHRyaWJ1dGVzLFxuICAgICAgICAgICAgLi4uKHByb3BzU3RvcmFnZS5nZXQoaWQpIHx8IHt9KVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0IHByb3BzKHByb3BzOiBPYmplY3QpIHtcbiAgICAgICAgdGhpcy5fX2RlZmF1bHRQcm9wcyA9IHByb3BzO1xuICAgIH1cblxuICAgIGdldCBrZXlzKCkge1xuICAgICAgICByZXR1cm4gW11cbiAgICB9XG5cbiAgICBnZXQgc3R5bGVzKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBcIlwiXG4gICAgfVxuXG4gICAgc3RhdGljIGdldCBvYnNlcnZlZEF0dHJpYnV0ZXMoKTogc3RyaW5nW10ge1xuICAgICAgICByZXR1cm4gdGhpcy5vYnNlcnZhYmxlUHJvcHMubWFwKHByb3BOYW1lVG9UYWcpLmNvbmNhdChcInByb3BzLWlkXCIpXG4gICAgfVxuXG4gICAgc3RhdGljIGdldCBvYnNlcnZhYmxlUHJvcHMoKSB7XG4gICAgICAgIHJldHVybiBbXVxuICAgIH1cblxuICAgIF9fZGVmYXVsdFByb3BzID0ge307XG5cbiAgICBzdWJzY3JpcHRpb25zID0gW107XG5cbiAgICBzdGF0ZSA9IHt9O1xuXG4gICAgbW91bnRlZCA9IGZhbHNlO1xuXG4gICAgZ2V0IGh0bWwoKSB7XG4gICAgICAgIHJldHVybiBodG1sXG4gICAgfVxuXG4gICAgY3NzID0gY3NzO1xuXG4gICAgcm9vdDogSFRNTEVsZW1lbnQ7XG5cbiAgICBiZWZvcmVSZW5kZXIoKSB7fVxuXG4gICAgcmVuZGVyKCk6IHN0cmluZyB8IHZvaWQge1xuICAgICAgICByZXR1cm4gJydcbiAgICB9XG5cbiAgICBpbnNlcnRDb250ZW50KHJvb3Q6IEhUTUxFbGVtZW50LCBjb250ZW50OiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgaWYgKHR5cGVvZiBjb250ZW50ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByb290LmlubmVySFRNTCA9IGNvbnRlbnRcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImRlZmF1bHQgcmVuZGVyZXIgY2FuIGhhbmRsZSBvbmx5IHN0cmluZ3NcIilcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFmdGVyUmVuZGVyKCkge31cblxuICAgIHN1YnNjcmliZVRvU3RvcmUoKSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHRoaXMua2V5cykge1xuICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLnB1c2goXG4gICAgICAgICAgICAgICAgc3Vic2NyaWJlKGtleSwgc3RhdGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgICAgICAgICAgICAgICAgIHJlbmRlci5jYWxsKHRoaXMpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gZ2V0U3RhdGUoa2V5KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgICB0aGlzLnN1YnNjcmliZVRvU3RvcmUoKTtcbiAgICAgICAgcmVuZGVyLmNhbGwodGhpcyk7XG5cbiAgICAgICAgdGhpcy5jb25uZWN0ZWQoKVxuICAgIH1cblxuICAgIGNvbm5lY3RlZCgpIHt9XG5cbiAgICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgZm9yIChjb25zdCBzdWJzY3JpcHRpb24gb2YgdGhpcy5zdWJzY3JpcHRpb25zKSB7XG4gICAgICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5kaXNjb25uZWN0ZWQoKVxuICAgIH1cblxuICAgIGRpc2Nvbm5lY3RlZCgpIHt9XG5cbiAgICBhZG9wdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgIHRoaXMuc3Vic2NyaWJlVG9TdG9yZSgpO1xuICAgICAgICByZW5kZXIuY2FsbCh0aGlzKTtcblxuICAgICAgICB0aGlzLmFkb3B0ZWQoKVxuICAgIH1cblxuICAgIGFkb3B0ZWQoKSB7fVxuXG4gICAgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKGF0dHJpYnV0ZU5hbWU6IHN0cmluZywgb2xkVmFsdWU6IHN0cmluZywgbmV3VmFsdWU6IHN0cmluZykge1xuICAgICAgICBpZiAodGhpcy5tb3VudGVkICYmIG9sZFZhbHVlICE9IG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzQ2hhbmdlZChcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIC4uLnRoaXMucHJvcHMsXG4gICAgICAgICAgICAgICAgICAgIFthdHRyaWJ1dGVOYW1lXTogbmV3VmFsdWUsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJlbmRlci5jYWxsKHRoaXMpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcm9wc0NoYW5nZWQobmV3UHJvcHM6IE9iamVjdCkge31cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbm5lY3Qoa2V5OiBzdHJpbmcpIHtcbiAgICByZXR1cm4gKFdyYXBwZWQ6IENsYXNzPENvbXBvbmVudD4pID0+IHtcbiAgICAgICAgcmV0dXJuIGNsYXNzIGV4dGVuZHMgV3JhcHBlZCB7XG4gICAgICAgICAgICBnZXQga2V5cygpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW2tleV1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlZmluZShuYW1lOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gKFdyYXBwZWQ6IENsYXNzPENvbXBvbmVudD4pID0+IHtcbiAgICAgICAgcmVnaXN0ZXJDb21wb25lbnQobmFtZSwgV3JhcHBlZCk7XG4gICAgICAgIHJldHVybiBXcmFwcGVkXG4gICAgfVxufVxuXG5sZXQgcHJvcHNJZCA9IDA7XG5cbmV4cG9ydCBmdW5jdGlvbiBwcm9wcyhwcm9wczogT2JqZWN0KSB7XG4gICAgY29uc3QgaWQgPSBwcm9wc0lkKys7XG4gICAgcHJvcHNTdG9yYWdlLnNldChcbiAgICAgICAgaWQsXG4gICAgICAgIHByb3BzXG4gICAgKTtcbiAgICByZXR1cm4ge1xuICAgICAgICAncHJvcHMtaWQnOiBpZCxcbiAgICAgICAgdG9TdHJpbmcoKSB7XG4gICAgICAgICAgICByZXR1cm4gYHByb3BzLWlkPVwiJHtpZH1cImBcbiAgICAgICAgfVxuICAgIH1cbn1cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvQ29tcG9uZW50LmpzIiwiLy8gQGZsb3dcblxuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICB0aGlzLmJlZm9yZVJlbmRlcigpO1xuXG4gICAgaWYgKHRoaXMuaXNTaGFkb3cgJiYgIXRoaXMuc2hhZG93Um9vdCkge1xuICAgICAgICB0aGlzLmF0dGFjaFNoYWRvdyh7bW9kZTogJ29wZW4nfSk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnJvb3QpIHtcbiAgICAgICAgdGhpcy5yb290ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdGhpcy5yb290LnN0eWxlLmRpc3BsYXkgPSAnY29udGVudHMnO1xuICAgICAgICBpZiAodGhpcy5pc1NoYWRvdykge1xuICAgICAgICAgICAgdGhpcy5zaGFkb3dSb290LmlubmVySFRNTCA9IGA8c3R5bGU+JHt0aGlzLnN0eWxlc308L3N0eWxlPmA7XG4gICAgICAgICAgICB0aGlzLnNoYWRvd1Jvb3QuYXBwZW5kQ2hpbGQodGhpcy5yb290KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3R5bGVzICYmICh0aGlzLmlubmVySFRNTCA9IGA8c3R5bGU+JHt0aGlzLnN0eWxlc308L3N0eWxlPmApO1xuICAgICAgICAgICAgdGhpcy5hcHBlbmRDaGlsZCh0aGlzLnJvb3QpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCByZW5kZXJSZXMgPSB0aGlzLnJlbmRlcigpO1xuICAgIGlmIChyZW5kZXJSZXMpIHtcbiAgICAgICAgdGhpcy5pbnNlcnRDb250ZW50KHRoaXMucm9vdCwgcmVuZGVyUmVzKVxuICAgIH1cblxuICAgIHRoaXMubW91bnRlZCA9IHRydWU7XG5cbiAgICB0aGlzLmFmdGVyUmVuZGVyKCk7XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL3JlbmRlci5qcyJdLCJzb3VyY2VSb290IjoiIn0=